<!doctype html>
<html>
<head>
<title>../third_party/icu/source/common/uloc.cpp</title>
<style type="text/css">
 body { color:#000000; background-color:#ffffff }
 body { font-family:Helvetica, sans-serif; font-size:10pt }
 h1 { font-size:14pt }
 .code { border-collapse:collapse; width:100%; }
 .code { font-family: "Monospace", monospace; font-size:10pt }
 .code { line-height: 1.2em }
 .comment { color: green; font-style: oblique }
 .keyword { color: blue }
 .string_literal { color: red }
 .directive { color: darkmagenta }
 .expansion { display: none; }
 .macro:hover .expansion { display: block; border: 2px solid #FF0000; padding: 2px; background-color:#FFF0F0; font-weight: normal;   -webkit-border-radius:5px;  -webkit-box-shadow:1px 1px 7px #000;   border-radius:5px;  box-shadow:1px 1px 7px #000; position: absolute; top: -1em; left:10em; z-index: 1 } 
 .macro { color: darkmagenta; background-color:LemonChiffon; position: relative }
 .num { width:2.5em; padding-right:2ex; background-color:#eeeeee }
 .num { text-align:right; font-size:8pt }
 .num { color:#444444 }
 .line { padding-left: 1ex; border-left: 3px solid #ccc }
 .line { white-space: pre }
 .msg { -webkit-box-shadow:1px 1px 7px #000 }
 .msg { box-shadow:1px 1px 7px #000 }
 .msg { -webkit-border-radius:5px }
 .msg { border-radius:5px }
 .msg { font-family:Helvetica, sans-serif; font-size:8pt }
 .msg { float:left }
 .msg { padding:0.25em 1ex 0.25em 1ex }
 .msg { margin-top:10px; margin-bottom:10px }
 .msg { font-weight:bold }
 .msg { max-width:60em; word-wrap: break-word; white-space: pre-wrap }
 .msgT { padding:0x; spacing:0x }
 .msgEvent { background-color:#fff8b4; color:#000000 }
 .msgControl { background-color:#bbbbbb; color:#000000 }
 .mrange { background-color:#dfddf3 }
 .mrange { border-bottom:1px solid #6F9DBE }
 .PathIndex { font-weight: bold; padding:0px 5px; margin-right:5px; }
 .PathIndex { -webkit-border-radius:8px }
 .PathIndex { border-radius:8px }
 .PathIndexEvent { background-color:#bfba87 }
 .PathIndexControl { background-color:#8c8c8c }
 .PathNav a { text-decoration:none; font-size: larger }
 .CodeInsertionHint { font-weight: bold; background-color: #10dd10 }
 .CodeRemovalHint { background-color:#de1010 }
 .CodeRemovalHint { border-bottom:1px solid #6F9DBE }
 table.simpletable {
   padding: 5px;
   font-size:12pt;
   margin:20px;
   border-collapse: collapse; border-spacing: 0px;
 }
 td.rowname {
   text-align:right; font-weight:bold; color:#444444;
   padding-right:2ex; }
</style>
</head>
<body>
<!-- BUGDESC Value stored to 'startSearchHere' is never read -->

<!-- BUGTYPE Dead increment -->

<!-- BUGCATEGORY Dead store -->

<!-- BUGFILE /home/haha/code/v8_5_0/v8/out/../third_party/icu/source/common/uloc.cpp -->

<!-- FILENAME uloc.cpp -->

<!-- FUNCTIONNAME uloc_setKeywordValue_54 -->

<!-- ISSUEHASHCONTENTOFLINEINCONTEXT 3cb1597f59244555f71abdd50f631b66 -->

<!-- BUGLINE 988 -->

<!-- BUGCOLUMN 9 -->

<!-- BUGPATHLENGTH 1 -->

<!-- BUGMETAEND -->
<!-- REPORTHEADER -->
<h3>Bug Summary</h3>
<table class="simpletable">
<tr><td class="rowname">File:</td><td>out/../third_party/icu/source/common/uloc.cpp</td></tr>
<tr><td class="rowname">Location:</td><td><a href="#EndPath">line 988, column 9</a></td></tr>
<tr><td class="rowname">Description:</td><td>Value stored to 'startSearchHere' is never read</td></tr>
</table>
<!-- REPORTSUMMARYEXTRA -->
<h3>Annotated Source Code</h3>
<table class="code">
<tr><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr><td class="num" id="LN2">2</td><td class="line"><span class='comment'>**********************************************************************</span></td></tr>
<tr><td class="num" id="LN3">3</td><td class="line"><span class='comment'>*   Copyright (C) 1997-2014, International Business Machines</span></td></tr>
<tr><td class="num" id="LN4">4</td><td class="line"><span class='comment'>*   Corporation and others.  All Rights Reserved.</span></td></tr>
<tr><td class="num" id="LN5">5</td><td class="line"><span class='comment'>**********************************************************************</span></td></tr>
<tr><td class="num" id="LN6">6</td><td class="line"><span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN7">7</td><td class="line"><span class='comment'>* File ULOC.CPP</span></td></tr>
<tr><td class="num" id="LN8">8</td><td class="line"><span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN9">9</td><td class="line"><span class='comment'>* Modification History:</span></td></tr>
<tr><td class="num" id="LN10">10</td><td class="line"><span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN11">11</td><td class="line"><span class='comment'>*   Date        Name        Description</span></td></tr>
<tr><td class="num" id="LN12">12</td><td class="line"><span class='comment'>*   04/01/97    aliu        Creation.</span></td></tr>
<tr><td class="num" id="LN13">13</td><td class="line"><span class='comment'>*   08/21/98    stephen     JDK 1.2 sync</span></td></tr>
<tr><td class="num" id="LN14">14</td><td class="line"><span class='comment'>*   12/08/98    rtg         New Locale implementation and C API</span></td></tr>
<tr><td class="num" id="LN15">15</td><td class="line"><span class='comment'>*   03/15/99    damiba      overhaul.</span></td></tr>
<tr><td class="num" id="LN16">16</td><td class="line"><span class='comment'>*   04/06/99    stephen     changed setDefault() to realloc and copy</span></td></tr>
<tr><td class="num" id="LN17">17</td><td class="line"><span class='comment'>*   06/14/99    stephen     Changed calls to ures_open for new params</span></td></tr>
<tr><td class="num" id="LN18">18</td><td class="line"><span class='comment'>*   07/21/99    stephen     Modified setDefault() to propagate to C++</span></td></tr>
<tr><td class="num" id="LN19">19</td><td class="line"><span class='comment'>*   05/14/04    alan        7 years later: refactored, cleaned up, fixed bugs,</span></td></tr>
<tr><td class="num" id="LN20">20</td><td class="line"><span class='comment'>*                           brought canonicalization code into line with spec</span></td></tr>
<tr><td class="num" id="LN21">21</td><td class="line"><span class='comment'>*****************************************************************************/</span></td></tr>
<tr><td class="num" id="LN22">22</td><td class="line"> </td></tr>
<tr><td class="num" id="LN23">23</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr><td class="num" id="LN24">24</td><td class="line">   <span class='comment'>POSIX's locale format, from putil.c: [no spaces]</span></td></tr>
<tr><td class="num" id="LN25">25</td><td class="line"> </td></tr>
<tr><td class="num" id="LN26">26</td><td class="line">     <span class='comment'>ll [ _CC ] [ . MM ] [ @ VV]</span></td></tr>
<tr><td class="num" id="LN27">27</td><td class="line"> </td></tr>
<tr><td class="num" id="LN28">28</td><td class="line">     <span class='comment'>l = lang, C = ctry, M = charmap, V = variant</span></td></tr>
<tr><td class="num" id="LN29">29</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN30">30</td><td class="line"> </td></tr>
<tr><td class="num" id="LN31">31</td><td class="line"><span class='directive'>#include "unicode/utypes.h"</span></td></tr>
<tr><td class="num" id="LN32">32</td><td class="line"><span class='directive'>#include "unicode/ustring.h"</span></td></tr>
<tr><td class="num" id="LN33">33</td><td class="line"><span class='directive'>#include "unicode/uloc.h"</span></td></tr>
<tr><td class="num" id="LN34">34</td><td class="line"> </td></tr>
<tr><td class="num" id="LN35">35</td><td class="line"><span class='directive'>#include "putilimp.h"</span></td></tr>
<tr><td class="num" id="LN36">36</td><td class="line"><span class='directive'>#include "ustr_imp.h"</span></td></tr>
<tr><td class="num" id="LN37">37</td><td class="line"><span class='directive'>#include "ulocimp.h"</span></td></tr>
<tr><td class="num" id="LN38">38</td><td class="line"><span class='directive'>#include "umutex.h"</span></td></tr>
<tr><td class="num" id="LN39">39</td><td class="line"><span class='directive'>#include "cstring.h"</span></td></tr>
<tr><td class="num" id="LN40">40</td><td class="line"><span class='directive'>#include "cmemory.h"</span></td></tr>
<tr><td class="num" id="LN41">41</td><td class="line"><span class='directive'>#include "locmap.h"</span></td></tr>
<tr><td class="num" id="LN42">42</td><td class="line"><span class='directive'>#include "uarrsort.h"</span></td></tr>
<tr><td class="num" id="LN43">43</td><td class="line"><span class='directive'>#include "uenumimp.h"</span></td></tr>
<tr><td class="num" id="LN44">44</td><td class="line"><span class='directive'>#include "uassert.h"</span></td></tr>
<tr><td class="num" id="LN45">45</td><td class="line"> </td></tr>
<tr><td class="num" id="LN46">46</td><td class="line"><span class='directive'>#include &lt;stdio.h&gt; /* for sprintf */</span></td></tr>
<tr><td class="num" id="LN47">47</td><td class="line"> </td></tr>
<tr><td class="num" id="LN48">48</td><td class="line"><span class='comment'>/* ### Declarations **************************************************/</span></td></tr>
<tr><td class="num" id="LN49">49</td><td class="line"> </td></tr>
<tr><td class="num" id="LN50">50</td><td class="line"><span class='comment'>/* Locale stuff from locid.cpp */</span></td></tr>
<tr><td class="num" id="LN51">51</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> <span class='keyword'>void</span> <span class='macro'>locale_set_default<span class='expansion'>locale_set_default_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *id);</td></tr>
<tr><td class="num" id="LN52">52</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span> *<span class='macro'>locale_get_default<span class='expansion'>locale_get_default_54</span></span>(<span class='keyword'>void</span>);</td></tr>
<tr><td class="num" id="LN53">53</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> int32_t</td></tr>
<tr><td class="num" id="LN54">54</td><td class="line"><span class='macro'>locale_getKeywords<span class='expansion'>locale_getKeywords_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN55">55</td><td class="line">            <span class='keyword'>char</span> prev,</td></tr>
<tr><td class="num" id="LN56">56</td><td class="line">            <span class='keyword'>char</span> *keywords, int32_t keywordCapacity,</td></tr>
<tr><td class="num" id="LN57">57</td><td class="line">            <span class='keyword'>char</span> *values, int32_t valuesCapacity, int32_t *valLen,</td></tr>
<tr><td class="num" id="LN58">58</td><td class="line">            UBool valuesToo,</td></tr>
<tr><td class="num" id="LN59">59</td><td class="line">            UErrorCode *status);</td></tr>
<tr><td class="num" id="LN60">60</td><td class="line"> </td></tr>
<tr><td class="num" id="LN61">61</td><td class="line"><span class='comment'>/* ### Data tables **************************************************/</span></td></tr>
<tr><td class="num" id="LN62">62</td><td class="line"> </td></tr>
<tr><td class="num" id="LN63">63</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN64">64</td><td class="line"> <span class='comment'>* Table of language codes, both 2- and 3-letter, with preference</span></td></tr>
<tr><td class="num" id="LN65">65</td><td class="line"> <span class='comment'>* given to 2-letter codes where possible.  Includes 3-letter codes</span></td></tr>
<tr><td class="num" id="LN66">66</td><td class="line"> <span class='comment'>* that lack a 2-letter equivalent.</span></td></tr>
<tr><td class="num" id="LN67">67</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN68">68</td><td class="line"> <span class='comment'>* This list must be in sorted order.  This list is returned directly</span></td></tr>
<tr><td class="num" id="LN69">69</td><td class="line"> <span class='comment'>* to the user by some API.</span></td></tr>
<tr><td class="num" id="LN70">70</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN71">71</td><td class="line"> <span class='comment'>* This list must be kept in sync with LANGUAGES_3, with corresponding</span></td></tr>
<tr><td class="num" id="LN72">72</td><td class="line"> <span class='comment'>* entries matched.</span></td></tr>
<tr><td class="num" id="LN73">73</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN74">74</td><td class="line"> <span class='comment'>* This table should be terminated with a NULL entry, followed by a</span></td></tr>
<tr><td class="num" id="LN75">75</td><td class="line"> <span class='comment'>* second list, and another NULL entry.  The first list is visible to</span></td></tr>
<tr><td class="num" id="LN76">76</td><td class="line"> <span class='comment'>* user code when this array is returned by API.  The second list</span></td></tr>
<tr><td class="num" id="LN77">77</td><td class="line"> <span class='comment'>* contains codes we support, but do not expose through user API.</span></td></tr>
<tr><td class="num" id="LN78">78</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN79">79</td><td class="line"> <span class='comment'>* Notes</span></td></tr>
<tr><td class="num" id="LN80">80</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN81">81</td><td class="line"> <span class='comment'>* Tables updated per http://lcweb.loc.gov/standards/iso639-2/ to</span></td></tr>
<tr><td class="num" id="LN82">82</td><td class="line"> <span class='comment'>* include the revisions up to 2001/7/27 *CWB*</span></td></tr>
<tr><td class="num" id="LN83">83</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN84">84</td><td class="line"> <span class='comment'>* The 3 character codes are the terminology codes like RFC 3066.  This</span></td></tr>
<tr><td class="num" id="LN85">85</td><td class="line"> <span class='comment'>* is compatible with prior ICU codes</span></td></tr>
<tr><td class="num" id="LN86">86</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN87">87</td><td class="line"> <span class='comment'>* "in" "iw" "ji" "jw" &amp; "sh" have been withdrawn but are still in the</span></td></tr>
<tr><td class="num" id="LN88">88</td><td class="line"> <span class='comment'>* table but now at the end of the table because 3 character codes are</span></td></tr>
<tr><td class="num" id="LN89">89</td><td class="line"> <span class='comment'>* duplicates.  This avoids bad searches going from 3 to 2 character</span></td></tr>
<tr><td class="num" id="LN90">90</td><td class="line"> <span class='comment'>* codes.</span></td></tr>
<tr><td class="num" id="LN91">91</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN92">92</td><td class="line"> <span class='comment'>* The range qaa-qtz is reserved for local use</span></td></tr>
<tr><td class="num" id="LN93">93</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN94">94</td><td class="line"><span class='comment'>/* Generated using org.unicode.cldr.icu.GenerateISO639LanguageTables */</span></td></tr>
<tr><td class="num" id="LN95">95</td><td class="line"><span class='comment'>/* ISO639 table version is 20130531 */</span></td></tr>
<tr><td class="num" id="LN96">96</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> * <span class='keyword'>const</span> LANGUAGES[] = {</td></tr>
<tr><td class="num" id="LN97">97</td><td class="line">    <span class='string_literal'>"aa"</span>,  <span class='string_literal'>"ab"</span>,  <span class='string_literal'>"ace"</span>, <span class='string_literal'>"ach"</span>, <span class='string_literal'>"ada"</span>, <span class='string_literal'>"ady"</span>, <span class='string_literal'>"ae"</span>,  <span class='string_literal'>"af"</span>,  </td></tr>
<tr><td class="num" id="LN98">98</td><td class="line">    <span class='string_literal'>"afa"</span>, <span class='string_literal'>"afh"</span>, <span class='string_literal'>"agq"</span>, <span class='string_literal'>"ain"</span>, <span class='string_literal'>"ak"</span>,  <span class='string_literal'>"akk"</span>, <span class='string_literal'>"ale"</span>, <span class='string_literal'>"alg"</span>, </td></tr>
<tr><td class="num" id="LN99">99</td><td class="line">    <span class='string_literal'>"alt"</span>, <span class='string_literal'>"am"</span>,  <span class='string_literal'>"an"</span>,  <span class='string_literal'>"ang"</span>, <span class='string_literal'>"anp"</span>, <span class='string_literal'>"apa"</span>, <span class='string_literal'>"ar"</span>,  <span class='string_literal'>"arc"</span>, </td></tr>
<tr><td class="num" id="LN100">100</td><td class="line">    <span class='string_literal'>"arn"</span>, <span class='string_literal'>"arp"</span>, <span class='string_literal'>"art"</span>, <span class='string_literal'>"arw"</span>, <span class='string_literal'>"as"</span>,  <span class='string_literal'>"asa"</span>, <span class='string_literal'>"ast"</span>, <span class='string_literal'>"ath"</span>, </td></tr>
<tr><td class="num" id="LN101">101</td><td class="line">    <span class='string_literal'>"aus"</span>, <span class='string_literal'>"av"</span>,  <span class='string_literal'>"awa"</span>, <span class='string_literal'>"ay"</span>,  <span class='string_literal'>"az"</span>,  </td></tr>
<tr><td class="num" id="LN102">102</td><td class="line">    <span class='string_literal'>"ba"</span>,  <span class='string_literal'>"bad"</span>, <span class='string_literal'>"bai"</span>, <span class='string_literal'>"bal"</span>, <span class='string_literal'>"ban"</span>, <span class='string_literal'>"bas"</span>, <span class='string_literal'>"bat"</span>, <span class='string_literal'>"bax"</span>, </td></tr>
<tr><td class="num" id="LN103">103</td><td class="line">    <span class='string_literal'>"bbj"</span>, <span class='string_literal'>"be"</span>,  <span class='string_literal'>"bej"</span>, <span class='string_literal'>"bem"</span>, <span class='string_literal'>"ber"</span>, <span class='string_literal'>"bez"</span>, <span class='string_literal'>"bfd"</span>, <span class='string_literal'>"bg"</span>,  </td></tr>
<tr><td class="num" id="LN104">104</td><td class="line">    <span class='string_literal'>"bh"</span>,  <span class='string_literal'>"bho"</span>, <span class='string_literal'>"bi"</span>,  <span class='string_literal'>"bik"</span>, <span class='string_literal'>"bin"</span>, <span class='string_literal'>"bkm"</span>, <span class='string_literal'>"bla"</span>, <span class='string_literal'>"bm"</span>,  </td></tr>
<tr><td class="num" id="LN105">105</td><td class="line">    <span class='string_literal'>"bn"</span>,  <span class='string_literal'>"bnt"</span>, <span class='string_literal'>"bo"</span>,  <span class='string_literal'>"br"</span>,  <span class='string_literal'>"bra"</span>, <span class='string_literal'>"brx"</span>, <span class='string_literal'>"bs"</span>,  <span class='string_literal'>"bss"</span>, </td></tr>
<tr><td class="num" id="LN106">106</td><td class="line">    <span class='string_literal'>"btk"</span>, <span class='string_literal'>"bua"</span>, <span class='string_literal'>"bug"</span>, <span class='string_literal'>"bum"</span>, <span class='string_literal'>"byn"</span>, <span class='string_literal'>"byv"</span>, </td></tr>
<tr><td class="num" id="LN107">107</td><td class="line">    <span class='string_literal'>"ca"</span>,  <span class='string_literal'>"cad"</span>, <span class='string_literal'>"cai"</span>, <span class='string_literal'>"car"</span>, <span class='string_literal'>"cau"</span>, <span class='string_literal'>"cay"</span>, <span class='string_literal'>"cch"</span>, <span class='string_literal'>"ce"</span>,  </td></tr>
<tr><td class="num" id="LN108">108</td><td class="line">    <span class='string_literal'>"ceb"</span>, <span class='string_literal'>"cel"</span>, <span class='string_literal'>"cgg"</span>, <span class='string_literal'>"ch"</span>,  <span class='string_literal'>"chb"</span>, <span class='string_literal'>"chg"</span>, <span class='string_literal'>"chk"</span>, <span class='string_literal'>"chm"</span>, </td></tr>
<tr><td class="num" id="LN109">109</td><td class="line">    <span class='string_literal'>"chn"</span>, <span class='string_literal'>"cho"</span>, <span class='string_literal'>"chp"</span>, <span class='string_literal'>"chr"</span>, <span class='string_literal'>"chy"</span>, <span class='string_literal'>"ckb"</span>, <span class='string_literal'>"cmc"</span>, <span class='string_literal'>"co"</span>,  </td></tr>
<tr><td class="num" id="LN110">110</td><td class="line">    <span class='string_literal'>"cop"</span>, <span class='string_literal'>"cpe"</span>, <span class='string_literal'>"cpf"</span>, <span class='string_literal'>"cpp"</span>, <span class='string_literal'>"cr"</span>,  <span class='string_literal'>"crh"</span>, <span class='string_literal'>"crp"</span>, <span class='string_literal'>"cs"</span>,  </td></tr>
<tr><td class="num" id="LN111">111</td><td class="line">    <span class='string_literal'>"csb"</span>, <span class='string_literal'>"cu"</span>,  <span class='string_literal'>"cus"</span>, <span class='string_literal'>"cv"</span>,  <span class='string_literal'>"cy"</span>,  </td></tr>
<tr><td class="num" id="LN112">112</td><td class="line">    <span class='string_literal'>"da"</span>,  <span class='string_literal'>"dak"</span>, <span class='string_literal'>"dar"</span>, <span class='string_literal'>"dav"</span>, <span class='string_literal'>"day"</span>, <span class='string_literal'>"de"</span>,  <span class='string_literal'>"del"</span>, <span class='string_literal'>"den"</span>, </td></tr>
<tr><td class="num" id="LN113">113</td><td class="line">    <span class='string_literal'>"dgr"</span>, <span class='string_literal'>"din"</span>, <span class='string_literal'>"dje"</span>, <span class='string_literal'>"doi"</span>, <span class='string_literal'>"dra"</span>, <span class='string_literal'>"dsb"</span>, <span class='string_literal'>"dua"</span>, <span class='string_literal'>"dum"</span>, </td></tr>
<tr><td class="num" id="LN114">114</td><td class="line">    <span class='string_literal'>"dv"</span>,  <span class='string_literal'>"dyo"</span>, <span class='string_literal'>"dyu"</span>, <span class='string_literal'>"dz"</span>,  <span class='string_literal'>"dzg"</span>, </td></tr>
<tr><td class="num" id="LN115">115</td><td class="line">    <span class='string_literal'>"ebu"</span>, <span class='string_literal'>"ee"</span>,  <span class='string_literal'>"efi"</span>, <span class='string_literal'>"egy"</span>, <span class='string_literal'>"eka"</span>, <span class='string_literal'>"el"</span>,  <span class='string_literal'>"elx"</span>, <span class='string_literal'>"en"</span>,  </td></tr>
<tr><td class="num" id="LN116">116</td><td class="line">    <span class='string_literal'>"enm"</span>, <span class='string_literal'>"eo"</span>,  <span class='string_literal'>"es"</span>,  <span class='string_literal'>"et"</span>,  <span class='string_literal'>"eu"</span>,  <span class='string_literal'>"ewo"</span>, </td></tr>
<tr><td class="num" id="LN117">117</td><td class="line">    <span class='string_literal'>"fa"</span>,  <span class='string_literal'>"fan"</span>, <span class='string_literal'>"fat"</span>, <span class='string_literal'>"ff"</span>,  <span class='string_literal'>"fi"</span>,  <span class='string_literal'>"fil"</span>, <span class='string_literal'>"fiu"</span>, <span class='string_literal'>"fj"</span>,  </td></tr>
<tr><td class="num" id="LN118">118</td><td class="line">    <span class='string_literal'>"fo"</span>,  <span class='string_literal'>"fon"</span>, <span class='string_literal'>"fr"</span>,  <span class='string_literal'>"frm"</span>, <span class='string_literal'>"fro"</span>, <span class='string_literal'>"frr"</span>, <span class='string_literal'>"frs"</span>, <span class='string_literal'>"fur"</span>, </td></tr>
<tr><td class="num" id="LN119">119</td><td class="line">    <span class='string_literal'>"fy"</span>,  </td></tr>
<tr><td class="num" id="LN120">120</td><td class="line">    <span class='string_literal'>"ga"</span>,  <span class='string_literal'>"gaa"</span>, <span class='string_literal'>"gay"</span>, <span class='string_literal'>"gba"</span>, <span class='string_literal'>"gd"</span>,  <span class='string_literal'>"gem"</span>, <span class='string_literal'>"gez"</span>, <span class='string_literal'>"gil"</span>, </td></tr>
<tr><td class="num" id="LN121">121</td><td class="line">    <span class='string_literal'>"gl"</span>,  <span class='string_literal'>"gmh"</span>, <span class='string_literal'>"gn"</span>,  <span class='string_literal'>"goh"</span>, <span class='string_literal'>"gon"</span>, <span class='string_literal'>"gor"</span>, <span class='string_literal'>"got"</span>, <span class='string_literal'>"grb"</span>, </td></tr>
<tr><td class="num" id="LN122">122</td><td class="line">    <span class='string_literal'>"grc"</span>, <span class='string_literal'>"gsw"</span>, <span class='string_literal'>"gu"</span>,  <span class='string_literal'>"guz"</span>, <span class='string_literal'>"gv"</span>,  <span class='string_literal'>"gwi"</span>, </td></tr>
<tr><td class="num" id="LN123">123</td><td class="line">    <span class='string_literal'>"ha"</span>,  <span class='string_literal'>"hai"</span>, <span class='string_literal'>"haw"</span>, <span class='string_literal'>"he"</span>,  <span class='string_literal'>"hi"</span>,  <span class='string_literal'>"hil"</span>, <span class='string_literal'>"him"</span>, <span class='string_literal'>"hit"</span>, </td></tr>
<tr><td class="num" id="LN124">124</td><td class="line">    <span class='string_literal'>"hmn"</span>, <span class='string_literal'>"ho"</span>,  <span class='string_literal'>"hr"</span>,  <span class='string_literal'>"hsb"</span>, <span class='string_literal'>"ht"</span>,  <span class='string_literal'>"hu"</span>,  <span class='string_literal'>"hup"</span>, <span class='string_literal'>"hy"</span>,  </td></tr>
<tr><td class="num" id="LN125">125</td><td class="line">    <span class='string_literal'>"hz"</span>,  </td></tr>
<tr><td class="num" id="LN126">126</td><td class="line">    <span class='string_literal'>"ia"</span>,  <span class='string_literal'>"iba"</span>, <span class='string_literal'>"ibb"</span>, <span class='string_literal'>"id"</span>,  <span class='string_literal'>"ie"</span>,  <span class='string_literal'>"ig"</span>,  <span class='string_literal'>"ii"</span>,  <span class='string_literal'>"ijo"</span>, </td></tr>
<tr><td class="num" id="LN127">127</td><td class="line">    <span class='string_literal'>"ik"</span>,  <span class='string_literal'>"ilo"</span>, <span class='string_literal'>"inc"</span>, <span class='string_literal'>"ine"</span>, <span class='string_literal'>"inh"</span>, <span class='string_literal'>"io"</span>,  <span class='string_literal'>"ira"</span>, <span class='string_literal'>"iro"</span>, </td></tr>
<tr><td class="num" id="LN128">128</td><td class="line">    <span class='string_literal'>"is"</span>,  <span class='string_literal'>"it"</span>,  <span class='string_literal'>"iu"</span>,  </td></tr>
<tr><td class="num" id="LN129">129</td><td class="line">    <span class='string_literal'>"ja"</span>,  <span class='string_literal'>"jbo"</span>, <span class='string_literal'>"jgo"</span>, <span class='string_literal'>"jmc"</span>, <span class='string_literal'>"jpr"</span>, <span class='string_literal'>"jrb"</span>, <span class='string_literal'>"jv"</span>,  </td></tr>
<tr><td class="num" id="LN130">130</td><td class="line">    <span class='string_literal'>"ka"</span>,  <span class='string_literal'>"kaa"</span>, <span class='string_literal'>"kab"</span>, <span class='string_literal'>"kac"</span>, <span class='string_literal'>"kaj"</span>, <span class='string_literal'>"kam"</span>, <span class='string_literal'>"kar"</span>, <span class='string_literal'>"kaw"</span>, </td></tr>
<tr><td class="num" id="LN131">131</td><td class="line">    <span class='string_literal'>"kbd"</span>, <span class='string_literal'>"kbl"</span>, <span class='string_literal'>"kcg"</span>, <span class='string_literal'>"kde"</span>, <span class='string_literal'>"kea"</span>, <span class='string_literal'>"kfo"</span>, <span class='string_literal'>"kg"</span>,  <span class='string_literal'>"kha"</span>, </td></tr>
<tr><td class="num" id="LN132">132</td><td class="line">    <span class='string_literal'>"khi"</span>, <span class='string_literal'>"kho"</span>, <span class='string_literal'>"khq"</span>, <span class='string_literal'>"ki"</span>,  <span class='string_literal'>"kj"</span>,  <span class='string_literal'>"kk"</span>,  <span class='string_literal'>"kkj"</span>, <span class='string_literal'>"kl"</span>,  </td></tr>
<tr><td class="num" id="LN133">133</td><td class="line">    <span class='string_literal'>"kln"</span>, <span class='string_literal'>"km"</span>,  <span class='string_literal'>"kmb"</span>, <span class='string_literal'>"kn"</span>,  <span class='string_literal'>"ko"</span>,  <span class='string_literal'>"kok"</span>, <span class='string_literal'>"kos"</span>, <span class='string_literal'>"kpe"</span>, </td></tr>
<tr><td class="num" id="LN134">134</td><td class="line">    <span class='string_literal'>"kr"</span>,  <span class='string_literal'>"krc"</span>, <span class='string_literal'>"krl"</span>, <span class='string_literal'>"kro"</span>, <span class='string_literal'>"kru"</span>, <span class='string_literal'>"ks"</span>,  <span class='string_literal'>"ksb"</span>, <span class='string_literal'>"ksf"</span>, </td></tr>
<tr><td class="num" id="LN135">135</td><td class="line">    <span class='string_literal'>"ksh"</span>, <span class='string_literal'>"ku"</span>,  <span class='string_literal'>"kum"</span>, <span class='string_literal'>"kut"</span>, <span class='string_literal'>"kv"</span>,  <span class='string_literal'>"kw"</span>,  <span class='string_literal'>"ky"</span>,  </td></tr>
<tr><td class="num" id="LN136">136</td><td class="line">    <span class='string_literal'>"la"</span>,  <span class='string_literal'>"lad"</span>, <span class='string_literal'>"lag"</span>, <span class='string_literal'>"lah"</span>, <span class='string_literal'>"lam"</span>, <span class='string_literal'>"lb"</span>,  <span class='string_literal'>"lez"</span>, <span class='string_literal'>"lg"</span>,  </td></tr>
<tr><td class="num" id="LN137">137</td><td class="line">    <span class='string_literal'>"li"</span>,  <span class='string_literal'>"lkt"</span>, <span class='string_literal'>"ln"</span>,  <span class='string_literal'>"lo"</span>,  <span class='string_literal'>"lol"</span>, <span class='string_literal'>"loz"</span>, <span class='string_literal'>"lt"</span>,  <span class='string_literal'>"lu"</span>,  </td></tr>
<tr><td class="num" id="LN138">138</td><td class="line">    <span class='string_literal'>"lua"</span>, <span class='string_literal'>"lui"</span>, <span class='string_literal'>"lun"</span>, <span class='string_literal'>"luo"</span>, <span class='string_literal'>"lus"</span>, <span class='string_literal'>"luy"</span>, <span class='string_literal'>"lv"</span>,  </td></tr>
<tr><td class="num" id="LN139">139</td><td class="line">    <span class='string_literal'>"mad"</span>, <span class='string_literal'>"maf"</span>, <span class='string_literal'>"mag"</span>, <span class='string_literal'>"mai"</span>, <span class='string_literal'>"mak"</span>, <span class='string_literal'>"man"</span>, <span class='string_literal'>"map"</span>, <span class='string_literal'>"mas"</span>, </td></tr>
<tr><td class="num" id="LN140">140</td><td class="line">    <span class='string_literal'>"mde"</span>, <span class='string_literal'>"mdf"</span>, <span class='string_literal'>"mdr"</span>, <span class='string_literal'>"men"</span>, <span class='string_literal'>"mer"</span>, <span class='string_literal'>"mfe"</span>, <span class='string_literal'>"mg"</span>,  <span class='string_literal'>"mga"</span>, </td></tr>
<tr><td class="num" id="LN141">141</td><td class="line">    <span class='string_literal'>"mgh"</span>, <span class='string_literal'>"mgo"</span>, <span class='string_literal'>"mh"</span>,  <span class='string_literal'>"mi"</span>,  <span class='string_literal'>"mic"</span>, <span class='string_literal'>"min"</span>, <span class='string_literal'>"mis"</span>, <span class='string_literal'>"mk"</span>,  </td></tr>
<tr><td class="num" id="LN142">142</td><td class="line">    <span class='string_literal'>"mkh"</span>, <span class='string_literal'>"ml"</span>,  <span class='string_literal'>"mn"</span>,  <span class='string_literal'>"mnc"</span>, <span class='string_literal'>"mni"</span>, <span class='string_literal'>"mno"</span>, <span class='string_literal'>"mo"</span>,  <span class='string_literal'>"moh"</span>, </td></tr>
<tr><td class="num" id="LN143">143</td><td class="line">    <span class='string_literal'>"mos"</span>, <span class='string_literal'>"mr"</span>,  <span class='string_literal'>"ms"</span>,  <span class='string_literal'>"mt"</span>,  <span class='string_literal'>"mua"</span>, <span class='string_literal'>"mul"</span>, <span class='string_literal'>"mun"</span>, <span class='string_literal'>"mus"</span>, </td></tr>
<tr><td class="num" id="LN144">144</td><td class="line">    <span class='string_literal'>"mwl"</span>, <span class='string_literal'>"mwr"</span>, <span class='string_literal'>"my"</span>,  <span class='string_literal'>"mye"</span>, <span class='string_literal'>"myn"</span>, <span class='string_literal'>"myv"</span>, </td></tr>
<tr><td class="num" id="LN145">145</td><td class="line">    <span class='string_literal'>"na"</span>,  <span class='string_literal'>"nah"</span>, <span class='string_literal'>"nai"</span>, <span class='string_literal'>"nap"</span>, <span class='string_literal'>"naq"</span>, <span class='string_literal'>"nb"</span>,  <span class='string_literal'>"nd"</span>,  <span class='string_literal'>"nds"</span>, </td></tr>
<tr><td class="num" id="LN146">146</td><td class="line">    <span class='string_literal'>"ne"</span>,  <span class='string_literal'>"new"</span>, <span class='string_literal'>"ng"</span>,  <span class='string_literal'>"nia"</span>, <span class='string_literal'>"nic"</span>, <span class='string_literal'>"niu"</span>, <span class='string_literal'>"nl"</span>,  <span class='string_literal'>"nmg"</span>, </td></tr>
<tr><td class="num" id="LN147">147</td><td class="line">    <span class='string_literal'>"nn"</span>,  <span class='string_literal'>"nnh"</span>, <span class='string_literal'>"no"</span>,  <span class='string_literal'>"nog"</span>, <span class='string_literal'>"non"</span>, <span class='string_literal'>"nqo"</span>, <span class='string_literal'>"nr"</span>,  <span class='string_literal'>"nso"</span>, </td></tr>
<tr><td class="num" id="LN148">148</td><td class="line">    <span class='string_literal'>"nub"</span>, <span class='string_literal'>"nus"</span>, <span class='string_literal'>"nv"</span>,  <span class='string_literal'>"nwc"</span>, <span class='string_literal'>"ny"</span>,  <span class='string_literal'>"nym"</span>, <span class='string_literal'>"nyn"</span>, <span class='string_literal'>"nyo"</span>, </td></tr>
<tr><td class="num" id="LN149">149</td><td class="line">    <span class='string_literal'>"nzi"</span>, </td></tr>
<tr><td class="num" id="LN150">150</td><td class="line">    <span class='string_literal'>"oc"</span>,  <span class='string_literal'>"oj"</span>,  <span class='string_literal'>"om"</span>,  <span class='string_literal'>"or"</span>,  <span class='string_literal'>"os"</span>,  <span class='string_literal'>"osa"</span>, <span class='string_literal'>"ota"</span>, <span class='string_literal'>"oto"</span>, </td></tr>
<tr><td class="num" id="LN151">151</td><td class="line">    <span class='string_literal'>"pa"</span>,  <span class='string_literal'>"paa"</span>, <span class='string_literal'>"pag"</span>, <span class='string_literal'>"pal"</span>, <span class='string_literal'>"pam"</span>, <span class='string_literal'>"pap"</span>, <span class='string_literal'>"pau"</span>, <span class='string_literal'>"peo"</span>, </td></tr>
<tr><td class="num" id="LN152">152</td><td class="line">    <span class='string_literal'>"phi"</span>, <span class='string_literal'>"phn"</span>, <span class='string_literal'>"pi"</span>,  <span class='string_literal'>"pl"</span>,  <span class='string_literal'>"pon"</span>, <span class='string_literal'>"pra"</span>, <span class='string_literal'>"pro"</span>, <span class='string_literal'>"ps"</span>,  </td></tr>
<tr><td class="num" id="LN153">153</td><td class="line">    <span class='string_literal'>"pt"</span>,  </td></tr>
<tr><td class="num" id="LN154">154</td><td class="line">    <span class='string_literal'>"qu"</span>,  </td></tr>
<tr><td class="num" id="LN155">155</td><td class="line">    <span class='string_literal'>"raj"</span>, <span class='string_literal'>"rap"</span>, <span class='string_literal'>"rar"</span>, <span class='string_literal'>"rm"</span>,  <span class='string_literal'>"rn"</span>,  <span class='string_literal'>"ro"</span>,  <span class='string_literal'>"roa"</span>, <span class='string_literal'>"rof"</span>, </td></tr>
<tr><td class="num" id="LN156">156</td><td class="line">    <span class='string_literal'>"rom"</span>, <span class='string_literal'>"ru"</span>,  <span class='string_literal'>"rup"</span>, <span class='string_literal'>"rw"</span>,  <span class='string_literal'>"rwk"</span>, </td></tr>
<tr><td class="num" id="LN157">157</td><td class="line">    <span class='string_literal'>"sa"</span>,  <span class='string_literal'>"sad"</span>, <span class='string_literal'>"sah"</span>, <span class='string_literal'>"sai"</span>, <span class='string_literal'>"sal"</span>, <span class='string_literal'>"sam"</span>, <span class='string_literal'>"saq"</span>, <span class='string_literal'>"sas"</span>, </td></tr>
<tr><td class="num" id="LN158">158</td><td class="line">    <span class='string_literal'>"sat"</span>, <span class='string_literal'>"sba"</span>, <span class='string_literal'>"sbp"</span>, <span class='string_literal'>"sc"</span>,  <span class='string_literal'>"scn"</span>, <span class='string_literal'>"sco"</span>, <span class='string_literal'>"sd"</span>,  <span class='string_literal'>"se"</span>,  </td></tr>
<tr><td class="num" id="LN159">159</td><td class="line">    <span class='string_literal'>"see"</span>, <span class='string_literal'>"seh"</span>, <span class='string_literal'>"sel"</span>, <span class='string_literal'>"sem"</span>, <span class='string_literal'>"ses"</span>, <span class='string_literal'>"sg"</span>,  <span class='string_literal'>"sga"</span>, <span class='string_literal'>"sgn"</span>, </td></tr>
<tr><td class="num" id="LN160">160</td><td class="line">    <span class='string_literal'>"shi"</span>, <span class='string_literal'>"shn"</span>, <span class='string_literal'>"shu"</span>, <span class='string_literal'>"si"</span>,  <span class='string_literal'>"sid"</span>, <span class='string_literal'>"sio"</span>, <span class='string_literal'>"sit"</span>, </td></tr>
<tr><td class="num" id="LN161">161</td><td class="line">    <span class='string_literal'>"sk"</span>,  <span class='string_literal'>"sl"</span>,  <span class='string_literal'>"sla"</span>, <span class='string_literal'>"sm"</span>,  <span class='string_literal'>"sma"</span>, <span class='string_literal'>"smi"</span>, <span class='string_literal'>"smj"</span>, <span class='string_literal'>"smn"</span>, </td></tr>
<tr><td class="num" id="LN162">162</td><td class="line">    <span class='string_literal'>"sms"</span>, <span class='string_literal'>"sn"</span>,  <span class='string_literal'>"snk"</span>, <span class='string_literal'>"so"</span>,  <span class='string_literal'>"sog"</span>, <span class='string_literal'>"son"</span>, <span class='string_literal'>"sq"</span>,  <span class='string_literal'>"sr"</span>,  </td></tr>
<tr><td class="num" id="LN163">163</td><td class="line">    <span class='string_literal'>"srn"</span>, <span class='string_literal'>"srr"</span>, <span class='string_literal'>"ss"</span>,  <span class='string_literal'>"ssa"</span>, <span class='string_literal'>"ssy"</span>, <span class='string_literal'>"st"</span>,  <span class='string_literal'>"su"</span>,  <span class='string_literal'>"suk"</span>, </td></tr>
<tr><td class="num" id="LN164">164</td><td class="line">    <span class='string_literal'>"sus"</span>, <span class='string_literal'>"sux"</span>, <span class='string_literal'>"sv"</span>,  <span class='string_literal'>"sw"</span>,  <span class='string_literal'>"swb"</span>, <span class='string_literal'>"swc"</span>, <span class='string_literal'>"syc"</span>, <span class='string_literal'>"syr"</span>, </td></tr>
<tr><td class="num" id="LN165">165</td><td class="line">    <span class='string_literal'>"ta"</span>,  <span class='string_literal'>"tai"</span>, <span class='string_literal'>"te"</span>,  <span class='string_literal'>"tem"</span>, <span class='string_literal'>"teo"</span>, <span class='string_literal'>"ter"</span>, <span class='string_literal'>"tet"</span>, <span class='string_literal'>"tg"</span>,  </td></tr>
<tr><td class="num" id="LN166">166</td><td class="line">    <span class='string_literal'>"th"</span>,  <span class='string_literal'>"ti"</span>,  <span class='string_literal'>"tig"</span>, <span class='string_literal'>"tiv"</span>, <span class='string_literal'>"tk"</span>,  <span class='string_literal'>"tkl"</span>, <span class='string_literal'>"tl"</span>,  <span class='string_literal'>"tlh"</span>, </td></tr>
<tr><td class="num" id="LN167">167</td><td class="line">    <span class='string_literal'>"tli"</span>, <span class='string_literal'>"tmh"</span>, <span class='string_literal'>"tn"</span>,  <span class='string_literal'>"to"</span>,  <span class='string_literal'>"tog"</span>, <span class='string_literal'>"tpi"</span>, <span class='string_literal'>"tr"</span>,  <span class='string_literal'>"trv"</span>, </td></tr>
<tr><td class="num" id="LN168">168</td><td class="line">    <span class='string_literal'>"ts"</span>,  <span class='string_literal'>"tsi"</span>, <span class='string_literal'>"tt"</span>,  <span class='string_literal'>"tum"</span>, <span class='string_literal'>"tup"</span>, <span class='string_literal'>"tut"</span>, <span class='string_literal'>"tvl"</span>, <span class='string_literal'>"tw"</span>,  </td></tr>
<tr><td class="num" id="LN169">169</td><td class="line">    <span class='string_literal'>"twq"</span>, <span class='string_literal'>"ty"</span>,  <span class='string_literal'>"tyv"</span>, <span class='string_literal'>"tzm"</span>, </td></tr>
<tr><td class="num" id="LN170">170</td><td class="line">    <span class='string_literal'>"udm"</span>, <span class='string_literal'>"ug"</span>,  <span class='string_literal'>"uga"</span>, <span class='string_literal'>"uk"</span>,  <span class='string_literal'>"umb"</span>, <span class='string_literal'>"und"</span>, <span class='string_literal'>"ur"</span>,  <span class='string_literal'>"uz"</span>,  </td></tr>
<tr><td class="num" id="LN171">171</td><td class="line">    <span class='string_literal'>"vai"</span>, <span class='string_literal'>"ve"</span>,  <span class='string_literal'>"vi"</span>,  <span class='string_literal'>"vo"</span>,  <span class='string_literal'>"vot"</span>, <span class='string_literal'>"vun"</span>, </td></tr>
<tr><td class="num" id="LN172">172</td><td class="line">    <span class='string_literal'>"wa"</span>,  <span class='string_literal'>"wae"</span>, <span class='string_literal'>"wak"</span>, <span class='string_literal'>"wal"</span>, <span class='string_literal'>"war"</span>, <span class='string_literal'>"was"</span>, <span class='string_literal'>"wen"</span>, <span class='string_literal'>"wo"</span>,  </td></tr>
<tr><td class="num" id="LN173">173</td><td class="line">    <span class='string_literal'>"xal"</span>, <span class='string_literal'>"xh"</span>,  <span class='string_literal'>"xog"</span>, </td></tr>
<tr><td class="num" id="LN174">174</td><td class="line">    <span class='string_literal'>"yao"</span>, <span class='string_literal'>"yap"</span>, <span class='string_literal'>"yav"</span>, <span class='string_literal'>"ybb"</span>, <span class='string_literal'>"yi"</span>,  <span class='string_literal'>"yo"</span>,  <span class='string_literal'>"ypk"</span>, <span class='string_literal'>"yue"</span>, </td></tr>
<tr><td class="num" id="LN175">175</td><td class="line">    <span class='string_literal'>"za"</span>,  <span class='string_literal'>"zap"</span>, <span class='string_literal'>"zbl"</span>, <span class='string_literal'>"zen"</span>, <span class='string_literal'>"zgh"</span>, <span class='string_literal'>"zh"</span>,  <span class='string_literal'>"znd"</span>, <span class='string_literal'>"zu"</span>,  </td></tr>
<tr><td class="num" id="LN176">176</td><td class="line">    <span class='string_literal'>"zun"</span>, <span class='string_literal'>"zxx"</span>, <span class='string_literal'>"zza"</span>, </td></tr>
<tr><td class="num" id="LN177">177</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span>,</td></tr>
<tr><td class="num" id="LN178">178</td><td class="line">    <span class='string_literal'>"in"</span>,  <span class='string_literal'>"iw"</span>,  <span class='string_literal'>"ji"</span>,  <span class='string_literal'>"jw"</span>,  <span class='string_literal'>"sh"</span>,    <span class='comment'>/* obsolete language codes */</span></td></tr>
<tr><td class="num" id="LN179">179</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span></td></tr>
<tr><td class="num" id="LN180">180</td><td class="line">};</td></tr>
<tr><td class="num" id="LN181">181</td><td class="line"> </td></tr>
<tr><td class="num" id="LN182">182</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span> DEPRECATED_LANGUAGES[]={</td></tr>
<tr><td class="num" id="LN183">183</td><td class="line">    <span class='string_literal'>"in"</span>, <span class='string_literal'>"iw"</span>, <span class='string_literal'>"ji"</span>, <span class='string_literal'>"jw"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span></td></tr>
<tr><td class="num" id="LN184">184</td><td class="line">};</td></tr>
<tr><td class="num" id="LN185">185</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span> REPLACEMENT_LANGUAGES[]={</td></tr>
<tr><td class="num" id="LN186">186</td><td class="line">    <span class='string_literal'>"id"</span>, <span class='string_literal'>"he"</span>, <span class='string_literal'>"yi"</span>, <span class='string_literal'>"jv"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span></td></tr>
<tr><td class="num" id="LN187">187</td><td class="line">};</td></tr>
<tr><td class="num" id="LN188">188</td><td class="line"> </td></tr>
<tr><td class="num" id="LN189">189</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN190">190</td><td class="line"> <span class='comment'>* Table of 3-letter language codes.</span></td></tr>
<tr><td class="num" id="LN191">191</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN192">192</td><td class="line"> <span class='comment'>* This is a lookup table used to convert 3-letter language codes to</span></td></tr>
<tr><td class="num" id="LN193">193</td><td class="line"> <span class='comment'>* their 2-letter equivalent, where possible.  It must be kept in sync</span></td></tr>
<tr><td class="num" id="LN194">194</td><td class="line"> <span class='comment'>* with LANGUAGES.  For all valid i, LANGUAGES[i] must refer to the</span></td></tr>
<tr><td class="num" id="LN195">195</td><td class="line"> <span class='comment'>* same language as LANGUAGES_3[i].  The commented-out lines are</span></td></tr>
<tr><td class="num" id="LN196">196</td><td class="line"> <span class='comment'>* copied from LANGUAGES to make eyeballing this baby easier.</span></td></tr>
<tr><td class="num" id="LN197">197</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN198">198</td><td class="line"> <span class='comment'>* Where a 3-letter language code has no 2-letter equivalent, the</span></td></tr>
<tr><td class="num" id="LN199">199</td><td class="line"> <span class='comment'>* 3-letter code occupies both LANGUAGES[i] and LANGUAGES_3[i].</span></td></tr>
<tr><td class="num" id="LN200">200</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN201">201</td><td class="line"> <span class='comment'>* This table should be terminated with a NULL entry, followed by a</span></td></tr>
<tr><td class="num" id="LN202">202</td><td class="line"> <span class='comment'>* second list, and another NULL entry.  The two lists correspond to</span></td></tr>
<tr><td class="num" id="LN203">203</td><td class="line"> <span class='comment'>* the two lists in LANGUAGES.</span></td></tr>
<tr><td class="num" id="LN204">204</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN205">205</td><td class="line"><span class='comment'>/* Generated using org.unicode.cldr.icu.GenerateISO639LanguageTables */</span></td></tr>
<tr><td class="num" id="LN206">206</td><td class="line"><span class='comment'>/* ISO639 table version is 20130531 */</span></td></tr>
<tr><td class="num" id="LN207">207</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> * <span class='keyword'>const</span> LANGUAGES_3[] = {</td></tr>
<tr><td class="num" id="LN208">208</td><td class="line">    <span class='string_literal'>"aar"</span>, <span class='string_literal'>"abk"</span>, <span class='string_literal'>"ace"</span>, <span class='string_literal'>"ach"</span>, <span class='string_literal'>"ada"</span>, <span class='string_literal'>"ady"</span>, <span class='string_literal'>"ave"</span>, <span class='string_literal'>"afr"</span>, </td></tr>
<tr><td class="num" id="LN209">209</td><td class="line">    <span class='string_literal'>"afa"</span>, <span class='string_literal'>"afh"</span>, <span class='string_literal'>"agq"</span>, <span class='string_literal'>"ain"</span>, <span class='string_literal'>"aka"</span>, <span class='string_literal'>"akk"</span>, <span class='string_literal'>"ale"</span>, <span class='string_literal'>"alg"</span>, </td></tr>
<tr><td class="num" id="LN210">210</td><td class="line">    <span class='string_literal'>"alt"</span>, <span class='string_literal'>"amh"</span>, <span class='string_literal'>"arg"</span>, <span class='string_literal'>"ang"</span>, <span class='string_literal'>"anp"</span>, <span class='string_literal'>"apa"</span>, <span class='string_literal'>"ara"</span>, <span class='string_literal'>"arc"</span>, </td></tr>
<tr><td class="num" id="LN211">211</td><td class="line">    <span class='string_literal'>"arn"</span>, <span class='string_literal'>"arp"</span>, <span class='string_literal'>"art"</span>, <span class='string_literal'>"arw"</span>, <span class='string_literal'>"asm"</span>, <span class='string_literal'>"asa"</span>, <span class='string_literal'>"ast"</span>, <span class='string_literal'>"ath"</span>, </td></tr>
<tr><td class="num" id="LN212">212</td><td class="line">    <span class='string_literal'>"aus"</span>, <span class='string_literal'>"ava"</span>, <span class='string_literal'>"awa"</span>, <span class='string_literal'>"aym"</span>, <span class='string_literal'>"aze"</span>, </td></tr>
<tr><td class="num" id="LN213">213</td><td class="line">    <span class='string_literal'>"bak"</span>, <span class='string_literal'>"bad"</span>, <span class='string_literal'>"bai"</span>, <span class='string_literal'>"bal"</span>, <span class='string_literal'>"ban"</span>, <span class='string_literal'>"bas"</span>, <span class='string_literal'>"bat"</span>, <span class='string_literal'>"bax"</span>, </td></tr>
<tr><td class="num" id="LN214">214</td><td class="line">    <span class='string_literal'>"bbj"</span>, <span class='string_literal'>"bel"</span>, <span class='string_literal'>"bej"</span>, <span class='string_literal'>"bem"</span>, <span class='string_literal'>"ber"</span>, <span class='string_literal'>"bez"</span>, <span class='string_literal'>"bfd"</span>, <span class='string_literal'>"bul"</span>, </td></tr>
<tr><td class="num" id="LN215">215</td><td class="line">    <span class='string_literal'>"bih"</span>, <span class='string_literal'>"bho"</span>, <span class='string_literal'>"bis"</span>, <span class='string_literal'>"bik"</span>, <span class='string_literal'>"bin"</span>, <span class='string_literal'>"bkm"</span>, <span class='string_literal'>"bla"</span>, <span class='string_literal'>"bam"</span>, </td></tr>
<tr><td class="num" id="LN216">216</td><td class="line">    <span class='string_literal'>"ben"</span>, <span class='string_literal'>"bnt"</span>, <span class='string_literal'>"bod"</span>, <span class='string_literal'>"bre"</span>, <span class='string_literal'>"bra"</span>, <span class='string_literal'>"brx"</span>, <span class='string_literal'>"bos"</span>, <span class='string_literal'>"bss"</span>, </td></tr>
<tr><td class="num" id="LN217">217</td><td class="line">    <span class='string_literal'>"btk"</span>, <span class='string_literal'>"bua"</span>, <span class='string_literal'>"bug"</span>, <span class='string_literal'>"bum"</span>, <span class='string_literal'>"byn"</span>, <span class='string_literal'>"byv"</span>, </td></tr>
<tr><td class="num" id="LN218">218</td><td class="line">    <span class='string_literal'>"cat"</span>, <span class='string_literal'>"cad"</span>, <span class='string_literal'>"cai"</span>, <span class='string_literal'>"car"</span>, <span class='string_literal'>"cau"</span>, <span class='string_literal'>"cay"</span>, <span class='string_literal'>"cch"</span>, <span class='string_literal'>"che"</span>, </td></tr>
<tr><td class="num" id="LN219">219</td><td class="line">    <span class='string_literal'>"ceb"</span>, <span class='string_literal'>"cel"</span>, <span class='string_literal'>"cgg"</span>, <span class='string_literal'>"cha"</span>, <span class='string_literal'>"chb"</span>, <span class='string_literal'>"chg"</span>, <span class='string_literal'>"chk"</span>, <span class='string_literal'>"chm"</span>, </td></tr>
<tr><td class="num" id="LN220">220</td><td class="line">    <span class='string_literal'>"chn"</span>, <span class='string_literal'>"cho"</span>, <span class='string_literal'>"chp"</span>, <span class='string_literal'>"chr"</span>, <span class='string_literal'>"chy"</span>, <span class='string_literal'>"ckb"</span>, <span class='string_literal'>"cmc"</span>, <span class='string_literal'>"cos"</span>, </td></tr>
<tr><td class="num" id="LN221">221</td><td class="line">    <span class='string_literal'>"cop"</span>, <span class='string_literal'>"cpe"</span>, <span class='string_literal'>"cpf"</span>, <span class='string_literal'>"cpp"</span>, <span class='string_literal'>"cre"</span>, <span class='string_literal'>"crh"</span>, <span class='string_literal'>"crp"</span>, <span class='string_literal'>"ces"</span>, </td></tr>
<tr><td class="num" id="LN222">222</td><td class="line">    <span class='string_literal'>"csb"</span>, <span class='string_literal'>"chu"</span>, <span class='string_literal'>"cus"</span>, <span class='string_literal'>"chv"</span>, <span class='string_literal'>"cym"</span>, </td></tr>
<tr><td class="num" id="LN223">223</td><td class="line">    <span class='string_literal'>"dan"</span>, <span class='string_literal'>"dak"</span>, <span class='string_literal'>"dar"</span>, <span class='string_literal'>"dav"</span>, <span class='string_literal'>"day"</span>, <span class='string_literal'>"deu"</span>, <span class='string_literal'>"del"</span>, <span class='string_literal'>"den"</span>, </td></tr>
<tr><td class="num" id="LN224">224</td><td class="line">    <span class='string_literal'>"dgr"</span>, <span class='string_literal'>"din"</span>, <span class='string_literal'>"dje"</span>, <span class='string_literal'>"doi"</span>, <span class='string_literal'>"dra"</span>, <span class='string_literal'>"dsb"</span>, <span class='string_literal'>"dua"</span>, <span class='string_literal'>"dum"</span>, </td></tr>
<tr><td class="num" id="LN225">225</td><td class="line">    <span class='string_literal'>"div"</span>, <span class='string_literal'>"dyo"</span>, <span class='string_literal'>"dyu"</span>, <span class='string_literal'>"dzo"</span>, <span class='string_literal'>"dzg"</span>, </td></tr>
<tr><td class="num" id="LN226">226</td><td class="line">    <span class='string_literal'>"ebu"</span>, <span class='string_literal'>"ewe"</span>, <span class='string_literal'>"efi"</span>, <span class='string_literal'>"egy"</span>, <span class='string_literal'>"eka"</span>, <span class='string_literal'>"ell"</span>, <span class='string_literal'>"elx"</span>, <span class='string_literal'>"eng"</span>, </td></tr>
<tr><td class="num" id="LN227">227</td><td class="line">    <span class='string_literal'>"enm"</span>, <span class='string_literal'>"epo"</span>, <span class='string_literal'>"spa"</span>, <span class='string_literal'>"est"</span>, <span class='string_literal'>"eus"</span>, <span class='string_literal'>"ewo"</span>, </td></tr>
<tr><td class="num" id="LN228">228</td><td class="line">    <span class='string_literal'>"fas"</span>, <span class='string_literal'>"fan"</span>, <span class='string_literal'>"fat"</span>, <span class='string_literal'>"ful"</span>, <span class='string_literal'>"fin"</span>, <span class='string_literal'>"fil"</span>, <span class='string_literal'>"fiu"</span>, <span class='string_literal'>"fij"</span>, </td></tr>
<tr><td class="num" id="LN229">229</td><td class="line">    <span class='string_literal'>"fao"</span>, <span class='string_literal'>"fon"</span>, <span class='string_literal'>"fra"</span>, <span class='string_literal'>"frm"</span>, <span class='string_literal'>"fro"</span>, <span class='string_literal'>"frr"</span>, <span class='string_literal'>"frs"</span>, <span class='string_literal'>"fur"</span>, </td></tr>
<tr><td class="num" id="LN230">230</td><td class="line">    <span class='string_literal'>"fry"</span>, </td></tr>
<tr><td class="num" id="LN231">231</td><td class="line">    <span class='string_literal'>"gle"</span>, <span class='string_literal'>"gaa"</span>, <span class='string_literal'>"gay"</span>, <span class='string_literal'>"gba"</span>, <span class='string_literal'>"gla"</span>, <span class='string_literal'>"gem"</span>, <span class='string_literal'>"gez"</span>, <span class='string_literal'>"gil"</span>, </td></tr>
<tr><td class="num" id="LN232">232</td><td class="line">    <span class='string_literal'>"glg"</span>, <span class='string_literal'>"gmh"</span>, <span class='string_literal'>"grn"</span>, <span class='string_literal'>"goh"</span>, <span class='string_literal'>"gon"</span>, <span class='string_literal'>"gor"</span>, <span class='string_literal'>"got"</span>, <span class='string_literal'>"grb"</span>, </td></tr>
<tr><td class="num" id="LN233">233</td><td class="line">    <span class='string_literal'>"grc"</span>, <span class='string_literal'>"gsw"</span>, <span class='string_literal'>"guj"</span>, <span class='string_literal'>"guz"</span>, <span class='string_literal'>"glv"</span>, <span class='string_literal'>"gwi"</span>, </td></tr>
<tr><td class="num" id="LN234">234</td><td class="line">    <span class='string_literal'>"hau"</span>, <span class='string_literal'>"hai"</span>, <span class='string_literal'>"haw"</span>, <span class='string_literal'>"heb"</span>, <span class='string_literal'>"hin"</span>, <span class='string_literal'>"hil"</span>, <span class='string_literal'>"him"</span>, <span class='string_literal'>"hit"</span>, </td></tr>
<tr><td class="num" id="LN235">235</td><td class="line">    <span class='string_literal'>"hmn"</span>, <span class='string_literal'>"hmo"</span>, <span class='string_literal'>"hrv"</span>, <span class='string_literal'>"hsb"</span>, <span class='string_literal'>"hat"</span>, <span class='string_literal'>"hun"</span>, <span class='string_literal'>"hup"</span>, <span class='string_literal'>"hye"</span>, </td></tr>
<tr><td class="num" id="LN236">236</td><td class="line">    <span class='string_literal'>"her"</span>, </td></tr>
<tr><td class="num" id="LN237">237</td><td class="line">    <span class='string_literal'>"ina"</span>, <span class='string_literal'>"iba"</span>, <span class='string_literal'>"ibb"</span>, <span class='string_literal'>"ind"</span>, <span class='string_literal'>"ile"</span>, <span class='string_literal'>"ibo"</span>, <span class='string_literal'>"iii"</span>, <span class='string_literal'>"ijo"</span>, </td></tr>
<tr><td class="num" id="LN238">238</td><td class="line">    <span class='string_literal'>"ipk"</span>, <span class='string_literal'>"ilo"</span>, <span class='string_literal'>"inc"</span>, <span class='string_literal'>"ine"</span>, <span class='string_literal'>"inh"</span>, <span class='string_literal'>"ido"</span>, <span class='string_literal'>"ira"</span>, <span class='string_literal'>"iro"</span>, </td></tr>
<tr><td class="num" id="LN239">239</td><td class="line">    <span class='string_literal'>"isl"</span>, <span class='string_literal'>"ita"</span>, <span class='string_literal'>"iku"</span>, </td></tr>
<tr><td class="num" id="LN240">240</td><td class="line">    <span class='string_literal'>"jpn"</span>, <span class='string_literal'>"jbo"</span>, <span class='string_literal'>"jgo"</span>, <span class='string_literal'>"jmc"</span>, <span class='string_literal'>"jpr"</span>, <span class='string_literal'>"jrb"</span>, <span class='string_literal'>"jav"</span>, </td></tr>
<tr><td class="num" id="LN241">241</td><td class="line">    <span class='string_literal'>"kat"</span>, <span class='string_literal'>"kaa"</span>, <span class='string_literal'>"kab"</span>, <span class='string_literal'>"kac"</span>, <span class='string_literal'>"kaj"</span>, <span class='string_literal'>"kam"</span>, <span class='string_literal'>"kar"</span>, <span class='string_literal'>"kaw"</span>, </td></tr>
<tr><td class="num" id="LN242">242</td><td class="line">    <span class='string_literal'>"kbd"</span>, <span class='string_literal'>"kbl"</span>, <span class='string_literal'>"kcg"</span>, <span class='string_literal'>"kde"</span>, <span class='string_literal'>"kea"</span>, <span class='string_literal'>"kfo"</span>, <span class='string_literal'>"kon"</span>, <span class='string_literal'>"kha"</span>, </td></tr>
<tr><td class="num" id="LN243">243</td><td class="line">    <span class='string_literal'>"khi"</span>, <span class='string_literal'>"kho"</span>, <span class='string_literal'>"khq"</span>, <span class='string_literal'>"kik"</span>, <span class='string_literal'>"kua"</span>, <span class='string_literal'>"kaz"</span>, <span class='string_literal'>"kkj"</span>, <span class='string_literal'>"kal"</span>, </td></tr>
<tr><td class="num" id="LN244">244</td><td class="line">    <span class='string_literal'>"kln"</span>, <span class='string_literal'>"khm"</span>, <span class='string_literal'>"kmb"</span>, <span class='string_literal'>"kan"</span>, <span class='string_literal'>"kor"</span>, <span class='string_literal'>"kok"</span>, <span class='string_literal'>"kos"</span>, <span class='string_literal'>"kpe"</span>, </td></tr>
<tr><td class="num" id="LN245">245</td><td class="line">    <span class='string_literal'>"kau"</span>, <span class='string_literal'>"krc"</span>, <span class='string_literal'>"krl"</span>, <span class='string_literal'>"kro"</span>, <span class='string_literal'>"kru"</span>, <span class='string_literal'>"kas"</span>, <span class='string_literal'>"ksb"</span>, <span class='string_literal'>"ksf"</span>, </td></tr>
<tr><td class="num" id="LN246">246</td><td class="line">    <span class='string_literal'>"ksh"</span>, <span class='string_literal'>"kur"</span>, <span class='string_literal'>"kum"</span>, <span class='string_literal'>"kut"</span>, <span class='string_literal'>"kom"</span>, <span class='string_literal'>"cor"</span>, <span class='string_literal'>"kir"</span>, </td></tr>
<tr><td class="num" id="LN247">247</td><td class="line">    <span class='string_literal'>"lat"</span>, <span class='string_literal'>"lad"</span>, <span class='string_literal'>"lag"</span>, <span class='string_literal'>"lah"</span>, <span class='string_literal'>"lam"</span>, <span class='string_literal'>"ltz"</span>, <span class='string_literal'>"lez"</span>, <span class='string_literal'>"lug"</span>, </td></tr>
<tr><td class="num" id="LN248">248</td><td class="line">    <span class='string_literal'>"lim"</span>, <span class='string_literal'>"lkt"</span>, <span class='string_literal'>"lin"</span>, <span class='string_literal'>"lao"</span>, <span class='string_literal'>"lol"</span>, <span class='string_literal'>"loz"</span>, <span class='string_literal'>"lit"</span>, <span class='string_literal'>"lub"</span>, </td></tr>
<tr><td class="num" id="LN249">249</td><td class="line">    <span class='string_literal'>"lua"</span>, <span class='string_literal'>"lui"</span>, <span class='string_literal'>"lun"</span>, <span class='string_literal'>"luo"</span>, <span class='string_literal'>"lus"</span>, <span class='string_literal'>"luy"</span>, <span class='string_literal'>"lav"</span>, </td></tr>
<tr><td class="num" id="LN250">250</td><td class="line">    <span class='string_literal'>"mad"</span>, <span class='string_literal'>"maf"</span>, <span class='string_literal'>"mag"</span>, <span class='string_literal'>"mai"</span>, <span class='string_literal'>"mak"</span>, <span class='string_literal'>"man"</span>, <span class='string_literal'>"map"</span>, <span class='string_literal'>"mas"</span>, </td></tr>
<tr><td class="num" id="LN251">251</td><td class="line">    <span class='string_literal'>"mde"</span>, <span class='string_literal'>"mdf"</span>, <span class='string_literal'>"mdr"</span>, <span class='string_literal'>"men"</span>, <span class='string_literal'>"mer"</span>, <span class='string_literal'>"mfe"</span>, <span class='string_literal'>"mlg"</span>, <span class='string_literal'>"mga"</span>, </td></tr>
<tr><td class="num" id="LN252">252</td><td class="line">    <span class='string_literal'>"mgh"</span>, <span class='string_literal'>"mgo"</span>, <span class='string_literal'>"mah"</span>, <span class='string_literal'>"mri"</span>, <span class='string_literal'>"mic"</span>, <span class='string_literal'>"min"</span>, <span class='string_literal'>"mis"</span>, <span class='string_literal'>"mkd"</span>, </td></tr>
<tr><td class="num" id="LN253">253</td><td class="line">    <span class='string_literal'>"mkh"</span>, <span class='string_literal'>"mal"</span>, <span class='string_literal'>"mon"</span>, <span class='string_literal'>"mnc"</span>, <span class='string_literal'>"mni"</span>, <span class='string_literal'>"mno"</span>, <span class='string_literal'>"mol"</span>, <span class='string_literal'>"moh"</span>, </td></tr>
<tr><td class="num" id="LN254">254</td><td class="line">    <span class='string_literal'>"mos"</span>, <span class='string_literal'>"mar"</span>, <span class='string_literal'>"msa"</span>, <span class='string_literal'>"mlt"</span>, <span class='string_literal'>"mua"</span>, <span class='string_literal'>"mul"</span>, <span class='string_literal'>"mun"</span>, <span class='string_literal'>"mus"</span>, </td></tr>
<tr><td class="num" id="LN255">255</td><td class="line">    <span class='string_literal'>"mwl"</span>, <span class='string_literal'>"mwr"</span>, <span class='string_literal'>"mya"</span>, <span class='string_literal'>"mye"</span>, <span class='string_literal'>"myn"</span>, <span class='string_literal'>"myv"</span>, </td></tr>
<tr><td class="num" id="LN256">256</td><td class="line">    <span class='string_literal'>"nau"</span>, <span class='string_literal'>"nah"</span>, <span class='string_literal'>"nai"</span>, <span class='string_literal'>"nap"</span>, <span class='string_literal'>"naq"</span>, <span class='string_literal'>"nob"</span>, <span class='string_literal'>"nde"</span>, <span class='string_literal'>"nds"</span>, </td></tr>
<tr><td class="num" id="LN257">257</td><td class="line">    <span class='string_literal'>"nep"</span>, <span class='string_literal'>"new"</span>, <span class='string_literal'>"ndo"</span>, <span class='string_literal'>"nia"</span>, <span class='string_literal'>"nic"</span>, <span class='string_literal'>"niu"</span>, <span class='string_literal'>"nld"</span>, <span class='string_literal'>"nmg"</span>, </td></tr>
<tr><td class="num" id="LN258">258</td><td class="line">    <span class='string_literal'>"nno"</span>, <span class='string_literal'>"nnh"</span>, <span class='string_literal'>"nor"</span>, <span class='string_literal'>"nog"</span>, <span class='string_literal'>"non"</span>, <span class='string_literal'>"nqo"</span>, <span class='string_literal'>"nbl"</span>, <span class='string_literal'>"nso"</span>, </td></tr>
<tr><td class="num" id="LN259">259</td><td class="line">    <span class='string_literal'>"nub"</span>, <span class='string_literal'>"nus"</span>, <span class='string_literal'>"nav"</span>, <span class='string_literal'>"nwc"</span>, <span class='string_literal'>"nya"</span>, <span class='string_literal'>"nym"</span>, <span class='string_literal'>"nyn"</span>, <span class='string_literal'>"nyo"</span>, </td></tr>
<tr><td class="num" id="LN260">260</td><td class="line">    <span class='string_literal'>"nzi"</span>, </td></tr>
<tr><td class="num" id="LN261">261</td><td class="line">    <span class='string_literal'>"oci"</span>, <span class='string_literal'>"oji"</span>, <span class='string_literal'>"orm"</span>, <span class='string_literal'>"ori"</span>, <span class='string_literal'>"oss"</span>, <span class='string_literal'>"osa"</span>, <span class='string_literal'>"ota"</span>, <span class='string_literal'>"oto"</span>, </td></tr>
<tr><td class="num" id="LN262">262</td><td class="line">    <span class='string_literal'>"pan"</span>, <span class='string_literal'>"paa"</span>, <span class='string_literal'>"pag"</span>, <span class='string_literal'>"pal"</span>, <span class='string_literal'>"pam"</span>, <span class='string_literal'>"pap"</span>, <span class='string_literal'>"pau"</span>, <span class='string_literal'>"peo"</span>, </td></tr>
<tr><td class="num" id="LN263">263</td><td class="line">    <span class='string_literal'>"phi"</span>, <span class='string_literal'>"phn"</span>, <span class='string_literal'>"pli"</span>, <span class='string_literal'>"pol"</span>, <span class='string_literal'>"pon"</span>, <span class='string_literal'>"pra"</span>, <span class='string_literal'>"pro"</span>, <span class='string_literal'>"pus"</span>, </td></tr>
<tr><td class="num" id="LN264">264</td><td class="line">    <span class='string_literal'>"por"</span>, </td></tr>
<tr><td class="num" id="LN265">265</td><td class="line">    <span class='string_literal'>"que"</span>, </td></tr>
<tr><td class="num" id="LN266">266</td><td class="line">    <span class='string_literal'>"raj"</span>, <span class='string_literal'>"rap"</span>, <span class='string_literal'>"rar"</span>, <span class='string_literal'>"roh"</span>, <span class='string_literal'>"run"</span>, <span class='string_literal'>"ron"</span>, <span class='string_literal'>"roa"</span>, <span class='string_literal'>"rof"</span>, </td></tr>
<tr><td class="num" id="LN267">267</td><td class="line">    <span class='string_literal'>"rom"</span>, <span class='string_literal'>"rus"</span>, <span class='string_literal'>"rup"</span>, <span class='string_literal'>"kin"</span>, <span class='string_literal'>"rwk"</span>, </td></tr>
<tr><td class="num" id="LN268">268</td><td class="line">    <span class='string_literal'>"san"</span>, <span class='string_literal'>"sad"</span>, <span class='string_literal'>"sah"</span>, <span class='string_literal'>"sai"</span>, <span class='string_literal'>"sal"</span>, <span class='string_literal'>"sam"</span>, <span class='string_literal'>"saq"</span>, <span class='string_literal'>"sas"</span>, </td></tr>
<tr><td class="num" id="LN269">269</td><td class="line">    <span class='string_literal'>"sat"</span>, <span class='string_literal'>"sba"</span>, <span class='string_literal'>"sbp"</span>, <span class='string_literal'>"srd"</span>, <span class='string_literal'>"scn"</span>, <span class='string_literal'>"sco"</span>, <span class='string_literal'>"snd"</span>, <span class='string_literal'>"sme"</span>, </td></tr>
<tr><td class="num" id="LN270">270</td><td class="line">    <span class='string_literal'>"see"</span>, <span class='string_literal'>"seh"</span>, <span class='string_literal'>"sel"</span>, <span class='string_literal'>"sem"</span>, <span class='string_literal'>"ses"</span>, <span class='string_literal'>"sag"</span>, <span class='string_literal'>"sga"</span>, <span class='string_literal'>"sgn"</span>, </td></tr>
<tr><td class="num" id="LN271">271</td><td class="line">    <span class='string_literal'>"shi"</span>, <span class='string_literal'>"shn"</span>, <span class='string_literal'>"shu"</span>, <span class='string_literal'>"sin"</span>, <span class='string_literal'>"sid"</span>, <span class='string_literal'>"sio"</span>, <span class='string_literal'>"sit"</span>, </td></tr>
<tr><td class="num" id="LN272">272</td><td class="line">    <span class='string_literal'>"slk"</span>, <span class='string_literal'>"slv"</span>, <span class='string_literal'>"sla"</span>, <span class='string_literal'>"smo"</span>, <span class='string_literal'>"sma"</span>, <span class='string_literal'>"smi"</span>, <span class='string_literal'>"smj"</span>, <span class='string_literal'>"smn"</span>, </td></tr>
<tr><td class="num" id="LN273">273</td><td class="line">    <span class='string_literal'>"sms"</span>, <span class='string_literal'>"sna"</span>, <span class='string_literal'>"snk"</span>, <span class='string_literal'>"som"</span>, <span class='string_literal'>"sog"</span>, <span class='string_literal'>"son"</span>, <span class='string_literal'>"sqi"</span>, <span class='string_literal'>"srp"</span>, </td></tr>
<tr><td class="num" id="LN274">274</td><td class="line">    <span class='string_literal'>"srn"</span>, <span class='string_literal'>"srr"</span>, <span class='string_literal'>"ssw"</span>, <span class='string_literal'>"ssa"</span>, <span class='string_literal'>"ssy"</span>, <span class='string_literal'>"sot"</span>, <span class='string_literal'>"sun"</span>, <span class='string_literal'>"suk"</span>, </td></tr>
<tr><td class="num" id="LN275">275</td><td class="line">    <span class='string_literal'>"sus"</span>, <span class='string_literal'>"sux"</span>, <span class='string_literal'>"swe"</span>, <span class='string_literal'>"swa"</span>, <span class='string_literal'>"swb"</span>, <span class='string_literal'>"swc"</span>, <span class='string_literal'>"syc"</span>, <span class='string_literal'>"syr"</span>, </td></tr>
<tr><td class="num" id="LN276">276</td><td class="line">    <span class='string_literal'>"tam"</span>, <span class='string_literal'>"tai"</span>, <span class='string_literal'>"tel"</span>, <span class='string_literal'>"tem"</span>, <span class='string_literal'>"teo"</span>, <span class='string_literal'>"ter"</span>, <span class='string_literal'>"tet"</span>, <span class='string_literal'>"tgk"</span>, </td></tr>
<tr><td class="num" id="LN277">277</td><td class="line">    <span class='string_literal'>"tha"</span>, <span class='string_literal'>"tir"</span>, <span class='string_literal'>"tig"</span>, <span class='string_literal'>"tiv"</span>, <span class='string_literal'>"tuk"</span>, <span class='string_literal'>"tkl"</span>, <span class='string_literal'>"tgl"</span>, <span class='string_literal'>"tlh"</span>, </td></tr>
<tr><td class="num" id="LN278">278</td><td class="line">    <span class='string_literal'>"tli"</span>, <span class='string_literal'>"tmh"</span>, <span class='string_literal'>"tsn"</span>, <span class='string_literal'>"ton"</span>, <span class='string_literal'>"tog"</span>, <span class='string_literal'>"tpi"</span>, <span class='string_literal'>"tur"</span>, <span class='string_literal'>"trv"</span>, </td></tr>
<tr><td class="num" id="LN279">279</td><td class="line">    <span class='string_literal'>"tso"</span>, <span class='string_literal'>"tsi"</span>, <span class='string_literal'>"tat"</span>, <span class='string_literal'>"tum"</span>, <span class='string_literal'>"tup"</span>, <span class='string_literal'>"tut"</span>, <span class='string_literal'>"tvl"</span>, <span class='string_literal'>"twi"</span>, </td></tr>
<tr><td class="num" id="LN280">280</td><td class="line">    <span class='string_literal'>"twq"</span>, <span class='string_literal'>"tah"</span>, <span class='string_literal'>"tyv"</span>, <span class='string_literal'>"tzm"</span>, </td></tr>
<tr><td class="num" id="LN281">281</td><td class="line">    <span class='string_literal'>"udm"</span>, <span class='string_literal'>"uig"</span>, <span class='string_literal'>"uga"</span>, <span class='string_literal'>"ukr"</span>, <span class='string_literal'>"umb"</span>, <span class='string_literal'>"und"</span>, <span class='string_literal'>"urd"</span>, <span class='string_literal'>"uzb"</span>, </td></tr>
<tr><td class="num" id="LN282">282</td><td class="line">    <span class='string_literal'>"vai"</span>, <span class='string_literal'>"ven"</span>, <span class='string_literal'>"vie"</span>, <span class='string_literal'>"vol"</span>, <span class='string_literal'>"vot"</span>, <span class='string_literal'>"vun"</span>, </td></tr>
<tr><td class="num" id="LN283">283</td><td class="line">    <span class='string_literal'>"wln"</span>, <span class='string_literal'>"wae"</span>, <span class='string_literal'>"wak"</span>, <span class='string_literal'>"wal"</span>, <span class='string_literal'>"war"</span>, <span class='string_literal'>"was"</span>, <span class='string_literal'>"wen"</span>, <span class='string_literal'>"wol"</span>, </td></tr>
<tr><td class="num" id="LN284">284</td><td class="line">    <span class='string_literal'>"xal"</span>, <span class='string_literal'>"xho"</span>, <span class='string_literal'>"xog"</span>, </td></tr>
<tr><td class="num" id="LN285">285</td><td class="line">    <span class='string_literal'>"yao"</span>, <span class='string_literal'>"yap"</span>, <span class='string_literal'>"yav"</span>, <span class='string_literal'>"ybb"</span>, <span class='string_literal'>"yid"</span>, <span class='string_literal'>"yor"</span>, <span class='string_literal'>"ypk"</span>, <span class='string_literal'>"yue"</span>, </td></tr>
<tr><td class="num" id="LN286">286</td><td class="line">    <span class='string_literal'>"zha"</span>, <span class='string_literal'>"zap"</span>, <span class='string_literal'>"zbl"</span>, <span class='string_literal'>"zen"</span>, <span class='string_literal'>"zgh"</span>, <span class='string_literal'>"zho"</span>, <span class='string_literal'>"znd"</span>, <span class='string_literal'>"zul"</span>, </td></tr>
<tr><td class="num" id="LN287">287</td><td class="line">    <span class='string_literal'>"zun"</span>, <span class='string_literal'>"zxx"</span>, <span class='string_literal'>"zza"</span>, </td></tr>
<tr><td class="num" id="LN288">288</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span>,</td></tr>
<tr><td class="num" id="LN289">289</td><td class="line"><span class='comment'>/*  "in",  "iw",  "ji",  "jw",  "sh",                          */</span></td></tr>
<tr><td class="num" id="LN290">290</td><td class="line">    <span class='string_literal'>"ind"</span>, <span class='string_literal'>"heb"</span>, <span class='string_literal'>"yid"</span>, <span class='string_literal'>"jaw"</span>, <span class='string_literal'>"srp"</span>,</td></tr>
<tr><td class="num" id="LN291">291</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span></td></tr>
<tr><td class="num" id="LN292">292</td><td class="line">};</td></tr>
<tr><td class="num" id="LN293">293</td><td class="line"> </td></tr>
<tr><td class="num" id="LN294">294</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN295">295</td><td class="line"> <span class='comment'>* Table of 2-letter country codes.</span></td></tr>
<tr><td class="num" id="LN296">296</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN297">297</td><td class="line"> <span class='comment'>* This list must be in sorted order.  This list is returned directly</span></td></tr>
<tr><td class="num" id="LN298">298</td><td class="line"> <span class='comment'>* to the user by some API.</span></td></tr>
<tr><td class="num" id="LN299">299</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN300">300</td><td class="line"> <span class='comment'>* This list must be kept in sync with COUNTRIES_3, with corresponding</span></td></tr>
<tr><td class="num" id="LN301">301</td><td class="line"> <span class='comment'>* entries matched.</span></td></tr>
<tr><td class="num" id="LN302">302</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN303">303</td><td class="line"> <span class='comment'>* This table should be terminated with a NULL entry, followed by a</span></td></tr>
<tr><td class="num" id="LN304">304</td><td class="line"> <span class='comment'>* second list, and another NULL entry.  The first list is visible to</span></td></tr>
<tr><td class="num" id="LN305">305</td><td class="line"> <span class='comment'>* user code when this array is returned by API.  The second list</span></td></tr>
<tr><td class="num" id="LN306">306</td><td class="line"> <span class='comment'>* contains codes we support, but do not expose through user API.</span></td></tr>
<tr><td class="num" id="LN307">307</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN308">308</td><td class="line"> <span class='comment'>* Notes:</span></td></tr>
<tr><td class="num" id="LN309">309</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN310">310</td><td class="line"> <span class='comment'>* ZR(ZAR) is now CD(COD) and FX(FXX) is PS(PSE) as per</span></td></tr>
<tr><td class="num" id="LN311">311</td><td class="line"> <span class='comment'>* http://www.evertype.com/standards/iso3166/iso3166-1-en.html added</span></td></tr>
<tr><td class="num" id="LN312">312</td><td class="line"> <span class='comment'>* new codes keeping the old ones for compatibility updated to include</span></td></tr>
<tr><td class="num" id="LN313">313</td><td class="line"> <span class='comment'>* 1999/12/03 revisions *CWB*</span></td></tr>
<tr><td class="num" id="LN314">314</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN315">315</td><td class="line"> <span class='comment'>* RO(ROM) is now RO(ROU) according to</span></td></tr>
<tr><td class="num" id="LN316">316</td><td class="line"> <span class='comment'>* http://www.iso.org/iso/en/prods-services/iso3166ma/03updates-on-iso-3166/nlv3e-rou.html</span></td></tr>
<tr><td class="num" id="LN317">317</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN318">318</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> * <span class='keyword'>const</span> COUNTRIES[] = {</td></tr>
<tr><td class="num" id="LN319">319</td><td class="line">    <span class='string_literal'>"AD"</span>,  <span class='string_literal'>"AE"</span>,  <span class='string_literal'>"AF"</span>,  <span class='string_literal'>"AG"</span>,  <span class='string_literal'>"AI"</span>,  <span class='string_literal'>"AL"</span>,  <span class='string_literal'>"AM"</span>,</td></tr>
<tr><td class="num" id="LN320">320</td><td class="line">    <span class='string_literal'>"AO"</span>,  <span class='string_literal'>"AQ"</span>,  <span class='string_literal'>"AR"</span>,  <span class='string_literal'>"AS"</span>,  <span class='string_literal'>"AT"</span>,  <span class='string_literal'>"AU"</span>,  <span class='string_literal'>"AW"</span>,  <span class='string_literal'>"AX"</span>,  <span class='string_literal'>"AZ"</span>,</td></tr>
<tr><td class="num" id="LN321">321</td><td class="line">    <span class='string_literal'>"BA"</span>,  <span class='string_literal'>"BB"</span>,  <span class='string_literal'>"BD"</span>,  <span class='string_literal'>"BE"</span>,  <span class='string_literal'>"BF"</span>,  <span class='string_literal'>"BG"</span>,  <span class='string_literal'>"BH"</span>,  <span class='string_literal'>"BI"</span>,</td></tr>
<tr><td class="num" id="LN322">322</td><td class="line">    <span class='string_literal'>"BJ"</span>,  <span class='string_literal'>"BL"</span>,  <span class='string_literal'>"BM"</span>,  <span class='string_literal'>"BN"</span>,  <span class='string_literal'>"BO"</span>,  <span class='string_literal'>"BQ"</span>,  <span class='string_literal'>"BR"</span>,  <span class='string_literal'>"BS"</span>,  <span class='string_literal'>"BT"</span>,  <span class='string_literal'>"BV"</span>,</td></tr>
<tr><td class="num" id="LN323">323</td><td class="line">    <span class='string_literal'>"BW"</span>,  <span class='string_literal'>"BY"</span>,  <span class='string_literal'>"BZ"</span>,  <span class='string_literal'>"CA"</span>,  <span class='string_literal'>"CC"</span>,  <span class='string_literal'>"CD"</span>,  <span class='string_literal'>"CF"</span>,  <span class='string_literal'>"CG"</span>,</td></tr>
<tr><td class="num" id="LN324">324</td><td class="line">    <span class='string_literal'>"CH"</span>,  <span class='string_literal'>"CI"</span>,  <span class='string_literal'>"CK"</span>,  <span class='string_literal'>"CL"</span>,  <span class='string_literal'>"CM"</span>,  <span class='string_literal'>"CN"</span>,  <span class='string_literal'>"CO"</span>,  <span class='string_literal'>"CR"</span>,</td></tr>
<tr><td class="num" id="LN325">325</td><td class="line">    <span class='string_literal'>"CU"</span>,  <span class='string_literal'>"CV"</span>,  <span class='string_literal'>"CW"</span>,  <span class='string_literal'>"CX"</span>,  <span class='string_literal'>"CY"</span>,  <span class='string_literal'>"CZ"</span>,  <span class='string_literal'>"DE"</span>,  <span class='string_literal'>"DJ"</span>,  <span class='string_literal'>"DK"</span>,</td></tr>
<tr><td class="num" id="LN326">326</td><td class="line">    <span class='string_literal'>"DM"</span>,  <span class='string_literal'>"DO"</span>,  <span class='string_literal'>"DZ"</span>,  <span class='string_literal'>"EC"</span>,  <span class='string_literal'>"EE"</span>,  <span class='string_literal'>"EG"</span>,  <span class='string_literal'>"EH"</span>,  <span class='string_literal'>"ER"</span>,</td></tr>
<tr><td class="num" id="LN327">327</td><td class="line">    <span class='string_literal'>"ES"</span>,  <span class='string_literal'>"ET"</span>,  <span class='string_literal'>"FI"</span>,  <span class='string_literal'>"FJ"</span>,  <span class='string_literal'>"FK"</span>,  <span class='string_literal'>"FM"</span>,  <span class='string_literal'>"FO"</span>,  <span class='string_literal'>"FR"</span>,</td></tr>
<tr><td class="num" id="LN328">328</td><td class="line">    <span class='string_literal'>"GA"</span>,  <span class='string_literal'>"GB"</span>,  <span class='string_literal'>"GD"</span>,  <span class='string_literal'>"GE"</span>,  <span class='string_literal'>"GF"</span>,  <span class='string_literal'>"GG"</span>,  <span class='string_literal'>"GH"</span>,  <span class='string_literal'>"GI"</span>,  <span class='string_literal'>"GL"</span>,</td></tr>
<tr><td class="num" id="LN329">329</td><td class="line">    <span class='string_literal'>"GM"</span>,  <span class='string_literal'>"GN"</span>,  <span class='string_literal'>"GP"</span>,  <span class='string_literal'>"GQ"</span>,  <span class='string_literal'>"GR"</span>,  <span class='string_literal'>"GS"</span>,  <span class='string_literal'>"GT"</span>,  <span class='string_literal'>"GU"</span>,</td></tr>
<tr><td class="num" id="LN330">330</td><td class="line">    <span class='string_literal'>"GW"</span>,  <span class='string_literal'>"GY"</span>,  <span class='string_literal'>"HK"</span>,  <span class='string_literal'>"HM"</span>,  <span class='string_literal'>"HN"</span>,  <span class='string_literal'>"HR"</span>,  <span class='string_literal'>"HT"</span>,  <span class='string_literal'>"HU"</span>,</td></tr>
<tr><td class="num" id="LN331">331</td><td class="line">    <span class='string_literal'>"ID"</span>,  <span class='string_literal'>"IE"</span>,  <span class='string_literal'>"IL"</span>,  <span class='string_literal'>"IM"</span>,  <span class='string_literal'>"IN"</span>,  <span class='string_literal'>"IO"</span>,  <span class='string_literal'>"IQ"</span>,  <span class='string_literal'>"IR"</span>,  <span class='string_literal'>"IS"</span>,</td></tr>
<tr><td class="num" id="LN332">332</td><td class="line">    <span class='string_literal'>"IT"</span>,  <span class='string_literal'>"JE"</span>,  <span class='string_literal'>"JM"</span>,  <span class='string_literal'>"JO"</span>,  <span class='string_literal'>"JP"</span>,  <span class='string_literal'>"KE"</span>,  <span class='string_literal'>"KG"</span>,  <span class='string_literal'>"KH"</span>,  <span class='string_literal'>"KI"</span>,</td></tr>
<tr><td class="num" id="LN333">333</td><td class="line">    <span class='string_literal'>"KM"</span>,  <span class='string_literal'>"KN"</span>,  <span class='string_literal'>"KP"</span>,  <span class='string_literal'>"KR"</span>,  <span class='string_literal'>"KW"</span>,  <span class='string_literal'>"KY"</span>,  <span class='string_literal'>"KZ"</span>,  <span class='string_literal'>"LA"</span>,</td></tr>
<tr><td class="num" id="LN334">334</td><td class="line">    <span class='string_literal'>"LB"</span>,  <span class='string_literal'>"LC"</span>,  <span class='string_literal'>"LI"</span>,  <span class='string_literal'>"LK"</span>,  <span class='string_literal'>"LR"</span>,  <span class='string_literal'>"LS"</span>,  <span class='string_literal'>"LT"</span>,  <span class='string_literal'>"LU"</span>,</td></tr>
<tr><td class="num" id="LN335">335</td><td class="line">    <span class='string_literal'>"LV"</span>,  <span class='string_literal'>"LY"</span>,  <span class='string_literal'>"MA"</span>,  <span class='string_literal'>"MC"</span>,  <span class='string_literal'>"MD"</span>,  <span class='string_literal'>"ME"</span>,  <span class='string_literal'>"MF"</span>,  <span class='string_literal'>"MG"</span>,  <span class='string_literal'>"MH"</span>,  <span class='string_literal'>"MK"</span>,</td></tr>
<tr><td class="num" id="LN336">336</td><td class="line">    <span class='string_literal'>"ML"</span>,  <span class='string_literal'>"MM"</span>,  <span class='string_literal'>"MN"</span>,  <span class='string_literal'>"MO"</span>,  <span class='string_literal'>"MP"</span>,  <span class='string_literal'>"MQ"</span>,  <span class='string_literal'>"MR"</span>,  <span class='string_literal'>"MS"</span>,</td></tr>
<tr><td class="num" id="LN337">337</td><td class="line">    <span class='string_literal'>"MT"</span>,  <span class='string_literal'>"MU"</span>,  <span class='string_literal'>"MV"</span>,  <span class='string_literal'>"MW"</span>,  <span class='string_literal'>"MX"</span>,  <span class='string_literal'>"MY"</span>,  <span class='string_literal'>"MZ"</span>,  <span class='string_literal'>"NA"</span>,</td></tr>
<tr><td class="num" id="LN338">338</td><td class="line">    <span class='string_literal'>"NC"</span>,  <span class='string_literal'>"NE"</span>,  <span class='string_literal'>"NF"</span>,  <span class='string_literal'>"NG"</span>,  <span class='string_literal'>"NI"</span>,  <span class='string_literal'>"NL"</span>,  <span class='string_literal'>"NO"</span>,  <span class='string_literal'>"NP"</span>,</td></tr>
<tr><td class="num" id="LN339">339</td><td class="line">    <span class='string_literal'>"NR"</span>,  <span class='string_literal'>"NU"</span>,  <span class='string_literal'>"NZ"</span>,  <span class='string_literal'>"OM"</span>,  <span class='string_literal'>"PA"</span>,  <span class='string_literal'>"PE"</span>,  <span class='string_literal'>"PF"</span>,  <span class='string_literal'>"PG"</span>,</td></tr>
<tr><td class="num" id="LN340">340</td><td class="line">    <span class='string_literal'>"PH"</span>,  <span class='string_literal'>"PK"</span>,  <span class='string_literal'>"PL"</span>,  <span class='string_literal'>"PM"</span>,  <span class='string_literal'>"PN"</span>,  <span class='string_literal'>"PR"</span>,  <span class='string_literal'>"PS"</span>,  <span class='string_literal'>"PT"</span>,</td></tr>
<tr><td class="num" id="LN341">341</td><td class="line">    <span class='string_literal'>"PW"</span>,  <span class='string_literal'>"PY"</span>,  <span class='string_literal'>"QA"</span>,  <span class='string_literal'>"RE"</span>,  <span class='string_literal'>"RO"</span>,  <span class='string_literal'>"RS"</span>,  <span class='string_literal'>"RU"</span>,  <span class='string_literal'>"RW"</span>,  <span class='string_literal'>"SA"</span>,</td></tr>
<tr><td class="num" id="LN342">342</td><td class="line">    <span class='string_literal'>"SB"</span>,  <span class='string_literal'>"SC"</span>,  <span class='string_literal'>"SD"</span>,  <span class='string_literal'>"SE"</span>,  <span class='string_literal'>"SG"</span>,  <span class='string_literal'>"SH"</span>,  <span class='string_literal'>"SI"</span>,  <span class='string_literal'>"SJ"</span>,</td></tr>
<tr><td class="num" id="LN343">343</td><td class="line">    <span class='string_literal'>"SK"</span>,  <span class='string_literal'>"SL"</span>,  <span class='string_literal'>"SM"</span>,  <span class='string_literal'>"SN"</span>,  <span class='string_literal'>"SO"</span>,  <span class='string_literal'>"SR"</span>,  <span class='string_literal'>"SS"</span>,  <span class='string_literal'>"ST"</span>,  <span class='string_literal'>"SV"</span>,</td></tr>
<tr><td class="num" id="LN344">344</td><td class="line">    <span class='string_literal'>"SX"</span>,  <span class='string_literal'>"SY"</span>,  <span class='string_literal'>"SZ"</span>,  <span class='string_literal'>"TC"</span>,  <span class='string_literal'>"TD"</span>,  <span class='string_literal'>"TF"</span>,  <span class='string_literal'>"TG"</span>,  <span class='string_literal'>"TH"</span>,  <span class='string_literal'>"TJ"</span>,</td></tr>
<tr><td class="num" id="LN345">345</td><td class="line">    <span class='string_literal'>"TK"</span>,  <span class='string_literal'>"TL"</span>,  <span class='string_literal'>"TM"</span>,  <span class='string_literal'>"TN"</span>,  <span class='string_literal'>"TO"</span>,  <span class='string_literal'>"TR"</span>,  <span class='string_literal'>"TT"</span>,  <span class='string_literal'>"TV"</span>,</td></tr>
<tr><td class="num" id="LN346">346</td><td class="line">    <span class='string_literal'>"TW"</span>,  <span class='string_literal'>"TZ"</span>,  <span class='string_literal'>"UA"</span>,  <span class='string_literal'>"UG"</span>,  <span class='string_literal'>"UM"</span>,  <span class='string_literal'>"US"</span>,  <span class='string_literal'>"UY"</span>,  <span class='string_literal'>"UZ"</span>,</td></tr>
<tr><td class="num" id="LN347">347</td><td class="line">    <span class='string_literal'>"VA"</span>,  <span class='string_literal'>"VC"</span>,  <span class='string_literal'>"VE"</span>,  <span class='string_literal'>"VG"</span>,  <span class='string_literal'>"VI"</span>,  <span class='string_literal'>"VN"</span>,  <span class='string_literal'>"VU"</span>,  <span class='string_literal'>"WF"</span>,</td></tr>
<tr><td class="num" id="LN348">348</td><td class="line">    <span class='string_literal'>"WS"</span>,  <span class='string_literal'>"YE"</span>,  <span class='string_literal'>"YT"</span>,  <span class='string_literal'>"ZA"</span>,  <span class='string_literal'>"ZM"</span>,  <span class='string_literal'>"ZW"</span>,</td></tr>
<tr><td class="num" id="LN349">349</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span>,</td></tr>
<tr><td class="num" id="LN350">350</td><td class="line">    <span class='string_literal'>"AN"</span>,  <span class='string_literal'>"BU"</span>, <span class='string_literal'>"CS"</span>, <span class='string_literal'>"FX"</span>, <span class='string_literal'>"RO"</span>, <span class='string_literal'>"SU"</span>, <span class='string_literal'>"TP"</span>, <span class='string_literal'>"YD"</span>, <span class='string_literal'>"YU"</span>, <span class='string_literal'>"ZR"</span>,   <span class='comment'>/* obsolete country codes */</span></td></tr>
<tr><td class="num" id="LN351">351</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span></td></tr>
<tr><td class="num" id="LN352">352</td><td class="line">};</td></tr>
<tr><td class="num" id="LN353">353</td><td class="line"> </td></tr>
<tr><td class="num" id="LN354">354</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span> DEPRECATED_COUNTRIES[] = {</td></tr>
<tr><td class="num" id="LN355">355</td><td class="line">    <span class='string_literal'>"AN"</span>, <span class='string_literal'>"BU"</span>, <span class='string_literal'>"CS"</span>, <span class='string_literal'>"DD"</span>, <span class='string_literal'>"DY"</span>, <span class='string_literal'>"FX"</span>, <span class='string_literal'>"HV"</span>, <span class='string_literal'>"NH"</span>, <span class='string_literal'>"RH"</span>, <span class='string_literal'>"SU"</span>, <span class='string_literal'>"TP"</span>, <span class='string_literal'>"UK"</span>, <span class='string_literal'>"VD"</span>, <span class='string_literal'>"YD"</span>, <span class='string_literal'>"YU"</span>, <span class='string_literal'>"ZR"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> <span class='comment'>/* deprecated country list */</span></td></tr>
<tr><td class="num" id="LN356">356</td><td class="line">};</td></tr>
<tr><td class="num" id="LN357">357</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span> REPLACEMENT_COUNTRIES[] = {</td></tr>
<tr><td class="num" id="LN358">358</td><td class="line"><span class='comment'>/*  "AN", "BU", "CS", "DD", "DY", "FX", "HV", "NH", "RH", "SU", "TP", "UK", "VD", "YD", "YU", "ZR" */</span></td></tr>
<tr><td class="num" id="LN359">359</td><td class="line">    <span class='string_literal'>"CW"</span>, <span class='string_literal'>"MM"</span>, <span class='string_literal'>"RS"</span>, <span class='string_literal'>"DE"</span>, <span class='string_literal'>"BJ"</span>, <span class='string_literal'>"FR"</span>, <span class='string_literal'>"BF"</span>, <span class='string_literal'>"VU"</span>, <span class='string_literal'>"ZW"</span>, <span class='string_literal'>"RU"</span>, <span class='string_literal'>"TL"</span>, <span class='string_literal'>"GB"</span>, <span class='string_literal'>"VN"</span>, <span class='string_literal'>"YE"</span>, <span class='string_literal'>"RS"</span>, <span class='string_literal'>"CD"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>  <span class='comment'>/* replacement country codes */</span>      </td></tr>
<tr><td class="num" id="LN360">360</td><td class="line">};</td></tr>
<tr><td class="num" id="LN361">361</td><td class="line">    </td></tr>
<tr><td class="num" id="LN362">362</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN363">363</td><td class="line"> <span class='comment'>* Table of 3-letter country codes.</span></td></tr>
<tr><td class="num" id="LN364">364</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN365">365</td><td class="line"> <span class='comment'>* This is a lookup table used to convert 3-letter country codes to</span></td></tr>
<tr><td class="num" id="LN366">366</td><td class="line"> <span class='comment'>* their 2-letter equivalent.  It must be kept in sync with COUNTRIES.</span></td></tr>
<tr><td class="num" id="LN367">367</td><td class="line"> <span class='comment'>* For all valid i, COUNTRIES[i] must refer to the same country as</span></td></tr>
<tr><td class="num" id="LN368">368</td><td class="line"> <span class='comment'>* COUNTRIES_3[i].  The commented-out lines are copied from COUNTRIES</span></td></tr>
<tr><td class="num" id="LN369">369</td><td class="line"> <span class='comment'>* to make eyeballing this baby easier.</span></td></tr>
<tr><td class="num" id="LN370">370</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN371">371</td><td class="line"> <span class='comment'>* This table should be terminated with a NULL entry, followed by a</span></td></tr>
<tr><td class="num" id="LN372">372</td><td class="line"> <span class='comment'>* second list, and another NULL entry.  The two lists correspond to</span></td></tr>
<tr><td class="num" id="LN373">373</td><td class="line"> <span class='comment'>* the two lists in COUNTRIES.</span></td></tr>
<tr><td class="num" id="LN374">374</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN375">375</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> * <span class='keyword'>const</span> COUNTRIES_3[] = {</td></tr>
<tr><td class="num" id="LN376">376</td><td class="line"><span class='comment'>/*  "AD",  "AE",  "AF",  "AG",  "AI",  "AL",  "AM",      */</span></td></tr>
<tr><td class="num" id="LN377">377</td><td class="line">    <span class='string_literal'>"AND"</span>, <span class='string_literal'>"ARE"</span>, <span class='string_literal'>"AFG"</span>, <span class='string_literal'>"ATG"</span>, <span class='string_literal'>"AIA"</span>, <span class='string_literal'>"ALB"</span>, <span class='string_literal'>"ARM"</span>,</td></tr>
<tr><td class="num" id="LN378">378</td><td class="line"><span class='comment'>/*  "AO",  "AQ",  "AR",  "AS",  "AT",  "AU",  "AW",  "AX",  "AZ",     */</span></td></tr>
<tr><td class="num" id="LN379">379</td><td class="line">    <span class='string_literal'>"AGO"</span>, <span class='string_literal'>"ATA"</span>, <span class='string_literal'>"ARG"</span>, <span class='string_literal'>"ASM"</span>, <span class='string_literal'>"AUT"</span>, <span class='string_literal'>"AUS"</span>, <span class='string_literal'>"ABW"</span>, <span class='string_literal'>"ALA"</span>, <span class='string_literal'>"AZE"</span>,</td></tr>
<tr><td class="num" id="LN380">380</td><td class="line"><span class='comment'>/*  "BA",  "BB",  "BD",  "BE",  "BF",  "BG",  "BH",  "BI",     */</span></td></tr>
<tr><td class="num" id="LN381">381</td><td class="line">    <span class='string_literal'>"BIH"</span>, <span class='string_literal'>"BRB"</span>, <span class='string_literal'>"BGD"</span>, <span class='string_literal'>"BEL"</span>, <span class='string_literal'>"BFA"</span>, <span class='string_literal'>"BGR"</span>, <span class='string_literal'>"BHR"</span>, <span class='string_literal'>"BDI"</span>,</td></tr>
<tr><td class="num" id="LN382">382</td><td class="line"><span class='comment'>/*  "BJ",  "BL",  "BM",  "BN",  "BO",  "BQ",  "BR",  "BS",  "BT",  "BV",     */</span></td></tr>
<tr><td class="num" id="LN383">383</td><td class="line">    <span class='string_literal'>"BEN"</span>, <span class='string_literal'>"BLM"</span>, <span class='string_literal'>"BMU"</span>, <span class='string_literal'>"BRN"</span>, <span class='string_literal'>"BOL"</span>, <span class='string_literal'>"BES"</span>, <span class='string_literal'>"BRA"</span>, <span class='string_literal'>"BHS"</span>, <span class='string_literal'>"BTN"</span>, <span class='string_literal'>"BVT"</span>,</td></tr>
<tr><td class="num" id="LN384">384</td><td class="line"><span class='comment'>/*  "BW",  "BY",  "BZ",  "CA",  "CC",  "CD",  "CF",  "CG",     */</span></td></tr>
<tr><td class="num" id="LN385">385</td><td class="line">    <span class='string_literal'>"BWA"</span>, <span class='string_literal'>"BLR"</span>, <span class='string_literal'>"BLZ"</span>, <span class='string_literal'>"CAN"</span>, <span class='string_literal'>"CCK"</span>, <span class='string_literal'>"COD"</span>, <span class='string_literal'>"CAF"</span>, <span class='string_literal'>"COG"</span>,</td></tr>
<tr><td class="num" id="LN386">386</td><td class="line"><span class='comment'>/*  "CH",  "CI",  "CK",  "CL",  "CM",  "CN",  "CO",  "CR",     */</span></td></tr>
<tr><td class="num" id="LN387">387</td><td class="line">    <span class='string_literal'>"CHE"</span>, <span class='string_literal'>"CIV"</span>, <span class='string_literal'>"COK"</span>, <span class='string_literal'>"CHL"</span>, <span class='string_literal'>"CMR"</span>, <span class='string_literal'>"CHN"</span>, <span class='string_literal'>"COL"</span>, <span class='string_literal'>"CRI"</span>,</td></tr>
<tr><td class="num" id="LN388">388</td><td class="line"><span class='comment'>/*  "CU",  "CV",  "CW",  "CX",  "CY",  "CZ",  "DE",  "DJ",  "DK",     */</span></td></tr>
<tr><td class="num" id="LN389">389</td><td class="line">    <span class='string_literal'>"CUB"</span>, <span class='string_literal'>"CPV"</span>, <span class='string_literal'>"CUW"</span>, <span class='string_literal'>"CXR"</span>, <span class='string_literal'>"CYP"</span>, <span class='string_literal'>"CZE"</span>, <span class='string_literal'>"DEU"</span>, <span class='string_literal'>"DJI"</span>, <span class='string_literal'>"DNK"</span>,</td></tr>
<tr><td class="num" id="LN390">390</td><td class="line"><span class='comment'>/*  "DM",  "DO",  "DZ",  "EC",  "EE",  "EG",  "EH",  "ER",     */</span></td></tr>
<tr><td class="num" id="LN391">391</td><td class="line">    <span class='string_literal'>"DMA"</span>, <span class='string_literal'>"DOM"</span>, <span class='string_literal'>"DZA"</span>, <span class='string_literal'>"ECU"</span>, <span class='string_literal'>"EST"</span>, <span class='string_literal'>"EGY"</span>, <span class='string_literal'>"ESH"</span>, <span class='string_literal'>"ERI"</span>,</td></tr>
<tr><td class="num" id="LN392">392</td><td class="line"><span class='comment'>/*  "ES",  "ET",  "FI",  "FJ",  "FK",  "FM",  "FO",  "FR",     */</span></td></tr>
<tr><td class="num" id="LN393">393</td><td class="line">    <span class='string_literal'>"ESP"</span>, <span class='string_literal'>"ETH"</span>, <span class='string_literal'>"FIN"</span>, <span class='string_literal'>"FJI"</span>, <span class='string_literal'>"FLK"</span>, <span class='string_literal'>"FSM"</span>, <span class='string_literal'>"FRO"</span>, <span class='string_literal'>"FRA"</span>,</td></tr>
<tr><td class="num" id="LN394">394</td><td class="line"><span class='comment'>/*  "GA",  "GB",  "GD",  "GE",  "GF",  "GG",  "GH",  "GI",  "GL",     */</span></td></tr>
<tr><td class="num" id="LN395">395</td><td class="line">    <span class='string_literal'>"GAB"</span>, <span class='string_literal'>"GBR"</span>, <span class='string_literal'>"GRD"</span>, <span class='string_literal'>"GEO"</span>, <span class='string_literal'>"GUF"</span>, <span class='string_literal'>"GGY"</span>, <span class='string_literal'>"GHA"</span>, <span class='string_literal'>"GIB"</span>, <span class='string_literal'>"GRL"</span>,</td></tr>
<tr><td class="num" id="LN396">396</td><td class="line"><span class='comment'>/*  "GM",  "GN",  "GP",  "GQ",  "GR",  "GS",  "GT",  "GU",     */</span></td></tr>
<tr><td class="num" id="LN397">397</td><td class="line">    <span class='string_literal'>"GMB"</span>, <span class='string_literal'>"GIN"</span>, <span class='string_literal'>"GLP"</span>, <span class='string_literal'>"GNQ"</span>, <span class='string_literal'>"GRC"</span>, <span class='string_literal'>"SGS"</span>, <span class='string_literal'>"GTM"</span>, <span class='string_literal'>"GUM"</span>,</td></tr>
<tr><td class="num" id="LN398">398</td><td class="line"><span class='comment'>/*  "GW",  "GY",  "HK",  "HM",  "HN",  "HR",  "HT",  "HU",     */</span></td></tr>
<tr><td class="num" id="LN399">399</td><td class="line">    <span class='string_literal'>"GNB"</span>, <span class='string_literal'>"GUY"</span>, <span class='string_literal'>"HKG"</span>, <span class='string_literal'>"HMD"</span>, <span class='string_literal'>"HND"</span>, <span class='string_literal'>"HRV"</span>, <span class='string_literal'>"HTI"</span>, <span class='string_literal'>"HUN"</span>,</td></tr>
<tr><td class="num" id="LN400">400</td><td class="line"><span class='comment'>/*  "ID",  "IE",  "IL",  "IM",  "IN",  "IO",  "IQ",  "IR",  "IS" */</span></td></tr>
<tr><td class="num" id="LN401">401</td><td class="line">    <span class='string_literal'>"IDN"</span>, <span class='string_literal'>"IRL"</span>, <span class='string_literal'>"ISR"</span>, <span class='string_literal'>"IMN"</span>, <span class='string_literal'>"IND"</span>, <span class='string_literal'>"IOT"</span>, <span class='string_literal'>"IRQ"</span>, <span class='string_literal'>"IRN"</span>, <span class='string_literal'>"ISL"</span>,</td></tr>
<tr><td class="num" id="LN402">402</td><td class="line"><span class='comment'>/*  "IT",  "JE",  "JM",  "JO",  "JP",  "KE",  "KG",  "KH",  "KI",     */</span></td></tr>
<tr><td class="num" id="LN403">403</td><td class="line">    <span class='string_literal'>"ITA"</span>, <span class='string_literal'>"JEY"</span>, <span class='string_literal'>"JAM"</span>, <span class='string_literal'>"JOR"</span>, <span class='string_literal'>"JPN"</span>, <span class='string_literal'>"KEN"</span>, <span class='string_literal'>"KGZ"</span>, <span class='string_literal'>"KHM"</span>, <span class='string_literal'>"KIR"</span>,</td></tr>
<tr><td class="num" id="LN404">404</td><td class="line"><span class='comment'>/*  "KM",  "KN",  "KP",  "KR",  "KW",  "KY",  "KZ",  "LA",     */</span></td></tr>
<tr><td class="num" id="LN405">405</td><td class="line">    <span class='string_literal'>"COM"</span>, <span class='string_literal'>"KNA"</span>, <span class='string_literal'>"PRK"</span>, <span class='string_literal'>"KOR"</span>, <span class='string_literal'>"KWT"</span>, <span class='string_literal'>"CYM"</span>, <span class='string_literal'>"KAZ"</span>, <span class='string_literal'>"LAO"</span>,</td></tr>
<tr><td class="num" id="LN406">406</td><td class="line"><span class='comment'>/*  "LB",  "LC",  "LI",  "LK",  "LR",  "LS",  "LT",  "LU",     */</span></td></tr>
<tr><td class="num" id="LN407">407</td><td class="line">    <span class='string_literal'>"LBN"</span>, <span class='string_literal'>"LCA"</span>, <span class='string_literal'>"LIE"</span>, <span class='string_literal'>"LKA"</span>, <span class='string_literal'>"LBR"</span>, <span class='string_literal'>"LSO"</span>, <span class='string_literal'>"LTU"</span>, <span class='string_literal'>"LUX"</span>,</td></tr>
<tr><td class="num" id="LN408">408</td><td class="line"><span class='comment'>/*  "LV",  "LY",  "MA",  "MC",  "MD",  "ME",  "MF",  "MG",  "MH",  "MK",     */</span></td></tr>
<tr><td class="num" id="LN409">409</td><td class="line">    <span class='string_literal'>"LVA"</span>, <span class='string_literal'>"LBY"</span>, <span class='string_literal'>"MAR"</span>, <span class='string_literal'>"MCO"</span>, <span class='string_literal'>"MDA"</span>, <span class='string_literal'>"MNE"</span>, <span class='string_literal'>"MAF"</span>, <span class='string_literal'>"MDG"</span>, <span class='string_literal'>"MHL"</span>, <span class='string_literal'>"MKD"</span>,</td></tr>
<tr><td class="num" id="LN410">410</td><td class="line"><span class='comment'>/*  "ML",  "MM",  "MN",  "MO",  "MP",  "MQ",  "MR",  "MS",     */</span></td></tr>
<tr><td class="num" id="LN411">411</td><td class="line">    <span class='string_literal'>"MLI"</span>, <span class='string_literal'>"MMR"</span>, <span class='string_literal'>"MNG"</span>, <span class='string_literal'>"MAC"</span>, <span class='string_literal'>"MNP"</span>, <span class='string_literal'>"MTQ"</span>, <span class='string_literal'>"MRT"</span>, <span class='string_literal'>"MSR"</span>,</td></tr>
<tr><td class="num" id="LN412">412</td><td class="line"><span class='comment'>/*  "MT",  "MU",  "MV",  "MW",  "MX",  "MY",  "MZ",  "NA",     */</span></td></tr>
<tr><td class="num" id="LN413">413</td><td class="line">    <span class='string_literal'>"MLT"</span>, <span class='string_literal'>"MUS"</span>, <span class='string_literal'>"MDV"</span>, <span class='string_literal'>"MWI"</span>, <span class='string_literal'>"MEX"</span>, <span class='string_literal'>"MYS"</span>, <span class='string_literal'>"MOZ"</span>, <span class='string_literal'>"NAM"</span>,</td></tr>
<tr><td class="num" id="LN414">414</td><td class="line"><span class='comment'>/*  "NC",  "NE",  "NF",  "NG",  "NI",  "NL",  "NO",  "NP",     */</span></td></tr>
<tr><td class="num" id="LN415">415</td><td class="line">    <span class='string_literal'>"NCL"</span>, <span class='string_literal'>"NER"</span>, <span class='string_literal'>"NFK"</span>, <span class='string_literal'>"NGA"</span>, <span class='string_literal'>"NIC"</span>, <span class='string_literal'>"NLD"</span>, <span class='string_literal'>"NOR"</span>, <span class='string_literal'>"NPL"</span>,</td></tr>
<tr><td class="num" id="LN416">416</td><td class="line"><span class='comment'>/*  "NR",  "NU",  "NZ",  "OM",  "PA",  "PE",  "PF",  "PG",     */</span></td></tr>
<tr><td class="num" id="LN417">417</td><td class="line">    <span class='string_literal'>"NRU"</span>, <span class='string_literal'>"NIU"</span>, <span class='string_literal'>"NZL"</span>, <span class='string_literal'>"OMN"</span>, <span class='string_literal'>"PAN"</span>, <span class='string_literal'>"PER"</span>, <span class='string_literal'>"PYF"</span>, <span class='string_literal'>"PNG"</span>,</td></tr>
<tr><td class="num" id="LN418">418</td><td class="line"><span class='comment'>/*  "PH",  "PK",  "PL",  "PM",  "PN",  "PR",  "PS",  "PT",     */</span></td></tr>
<tr><td class="num" id="LN419">419</td><td class="line">    <span class='string_literal'>"PHL"</span>, <span class='string_literal'>"PAK"</span>, <span class='string_literal'>"POL"</span>, <span class='string_literal'>"SPM"</span>, <span class='string_literal'>"PCN"</span>, <span class='string_literal'>"PRI"</span>, <span class='string_literal'>"PSE"</span>, <span class='string_literal'>"PRT"</span>,</td></tr>
<tr><td class="num" id="LN420">420</td><td class="line"><span class='comment'>/*  "PW",  "PY",  "QA",  "RE",  "RO",  "RS",  "RU",  "RW",  "SA",     */</span></td></tr>
<tr><td class="num" id="LN421">421</td><td class="line">    <span class='string_literal'>"PLW"</span>, <span class='string_literal'>"PRY"</span>, <span class='string_literal'>"QAT"</span>, <span class='string_literal'>"REU"</span>, <span class='string_literal'>"ROU"</span>, <span class='string_literal'>"SRB"</span>, <span class='string_literal'>"RUS"</span>, <span class='string_literal'>"RWA"</span>, <span class='string_literal'>"SAU"</span>,</td></tr>
<tr><td class="num" id="LN422">422</td><td class="line"><span class='comment'>/*  "SB",  "SC",  "SD",  "SE",  "SG",  "SH",  "SI",  "SJ",     */</span></td></tr>
<tr><td class="num" id="LN423">423</td><td class="line">    <span class='string_literal'>"SLB"</span>, <span class='string_literal'>"SYC"</span>, <span class='string_literal'>"SDN"</span>, <span class='string_literal'>"SWE"</span>, <span class='string_literal'>"SGP"</span>, <span class='string_literal'>"SHN"</span>, <span class='string_literal'>"SVN"</span>, <span class='string_literal'>"SJM"</span>,</td></tr>
<tr><td class="num" id="LN424">424</td><td class="line"><span class='comment'>/*  "SK",  "SL",  "SM",  "SN",  "SO",  "SR",  "SS",  "ST",  "SV",     */</span></td></tr>
<tr><td class="num" id="LN425">425</td><td class="line">    <span class='string_literal'>"SVK"</span>, <span class='string_literal'>"SLE"</span>, <span class='string_literal'>"SMR"</span>, <span class='string_literal'>"SEN"</span>, <span class='string_literal'>"SOM"</span>, <span class='string_literal'>"SUR"</span>, <span class='string_literal'>"SSD"</span>, <span class='string_literal'>"STP"</span>, <span class='string_literal'>"SLV"</span>,</td></tr>
<tr><td class="num" id="LN426">426</td><td class="line"><span class='comment'>/*  "SX",  "SY",  "SZ",  "TC",  "TD",  "TF",  "TG",  "TH",  "TJ",     */</span></td></tr>
<tr><td class="num" id="LN427">427</td><td class="line">    <span class='string_literal'>"SXM"</span>, <span class='string_literal'>"SYR"</span>, <span class='string_literal'>"SWZ"</span>, <span class='string_literal'>"TCA"</span>, <span class='string_literal'>"TCD"</span>, <span class='string_literal'>"ATF"</span>, <span class='string_literal'>"TGO"</span>, <span class='string_literal'>"THA"</span>, <span class='string_literal'>"TJK"</span>,</td></tr>
<tr><td class="num" id="LN428">428</td><td class="line"><span class='comment'>/*  "TK",  "TL",  "TM",  "TN",  "TO",  "TR",  "TT",  "TV",     */</span></td></tr>
<tr><td class="num" id="LN429">429</td><td class="line">    <span class='string_literal'>"TKL"</span>, <span class='string_literal'>"TLS"</span>, <span class='string_literal'>"TKM"</span>, <span class='string_literal'>"TUN"</span>, <span class='string_literal'>"TON"</span>, <span class='string_literal'>"TUR"</span>, <span class='string_literal'>"TTO"</span>, <span class='string_literal'>"TUV"</span>,</td></tr>
<tr><td class="num" id="LN430">430</td><td class="line"><span class='comment'>/*  "TW",  "TZ",  "UA",  "UG",  "UM",  "US",  "UY",  "UZ",     */</span></td></tr>
<tr><td class="num" id="LN431">431</td><td class="line">    <span class='string_literal'>"TWN"</span>, <span class='string_literal'>"TZA"</span>, <span class='string_literal'>"UKR"</span>, <span class='string_literal'>"UGA"</span>, <span class='string_literal'>"UMI"</span>, <span class='string_literal'>"USA"</span>, <span class='string_literal'>"URY"</span>, <span class='string_literal'>"UZB"</span>,</td></tr>
<tr><td class="num" id="LN432">432</td><td class="line"><span class='comment'>/*  "VA",  "VC",  "VE",  "VG",  "VI",  "VN",  "VU",  "WF",     */</span></td></tr>
<tr><td class="num" id="LN433">433</td><td class="line">    <span class='string_literal'>"VAT"</span>, <span class='string_literal'>"VCT"</span>, <span class='string_literal'>"VEN"</span>, <span class='string_literal'>"VGB"</span>, <span class='string_literal'>"VIR"</span>, <span class='string_literal'>"VNM"</span>, <span class='string_literal'>"VUT"</span>, <span class='string_literal'>"WLF"</span>,</td></tr>
<tr><td class="num" id="LN434">434</td><td class="line"><span class='comment'>/*  "WS",  "YE",  "YT",  "ZA",  "ZM",  "ZW",          */</span></td></tr>
<tr><td class="num" id="LN435">435</td><td class="line">    <span class='string_literal'>"WSM"</span>, <span class='string_literal'>"YEM"</span>, <span class='string_literal'>"MYT"</span>, <span class='string_literal'>"ZAF"</span>, <span class='string_literal'>"ZMB"</span>, <span class='string_literal'>"ZWE"</span>,</td></tr>
<tr><td class="num" id="LN436">436</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span>,</td></tr>
<tr><td class="num" id="LN437">437</td><td class="line"><span class='comment'>/*  "AN",  "BU",  "CS",  "FX",  "RO", "SU",  "TP",  "YD",  "YU",  "ZR" */</span></td></tr>
<tr><td class="num" id="LN438">438</td><td class="line">    <span class='string_literal'>"ANT"</span>, <span class='string_literal'>"BUR"</span>, <span class='string_literal'>"SCG"</span>, <span class='string_literal'>"FXX"</span>, <span class='string_literal'>"ROM"</span>, <span class='string_literal'>"SUN"</span>, <span class='string_literal'>"TMP"</span>, <span class='string_literal'>"YMD"</span>, <span class='string_literal'>"YUG"</span>, <span class='string_literal'>"ZAR"</span>,</td></tr>
<tr><td class="num" id="LN439">439</td><td class="line"><span class='macro'>NULL<span class='expansion'>__null</span></span></td></tr>
<tr><td class="num" id="LN440">440</td><td class="line">};</td></tr>
<tr><td class="num" id="LN441">441</td><td class="line"> </td></tr>
<tr><td class="num" id="LN442">442</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>struct</span> CanonicalizationMap {</td></tr>
<tr><td class="num" id="LN443">443</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *id;          <span class='comment'>/* input ID */</span></td></tr>
<tr><td class="num" id="LN444">444</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *canonicalID; <span class='comment'>/* canonicalized output ID */</span></td></tr>
<tr><td class="num" id="LN445">445</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *keyword;     <span class='comment'>/* keyword, or NULL if none */</span></td></tr>
<tr><td class="num" id="LN446">446</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *value;       <span class='comment'>/* keyword value, or NULL if kw==NULL */</span></td></tr>
<tr><td class="num" id="LN447">447</td><td class="line">} CanonicalizationMap;</td></tr>
<tr><td class="num" id="LN448">448</td><td class="line"> </td></tr>
<tr><td class="num" id="LN449">449</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN450">450</td><td class="line"> <span class='comment'>* A map to canonicalize locale IDs.  This handles a variety of</span></td></tr>
<tr><td class="num" id="LN451">451</td><td class="line"> <span class='comment'>* different semantic kinds of transformations.</span></td></tr>
<tr><td class="num" id="LN452">452</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN453">453</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> CanonicalizationMap CANONICALIZE_MAP[] = {</td></tr>
<tr><td class="num" id="LN454">454</td><td class="line">    { <span class='string_literal'>""</span>,               <span class='string_literal'>"en_US_POSIX"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN455">455</td><td class="line">    { <span class='string_literal'>"c"</span>,              <span class='string_literal'>"en_US_POSIX"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* POSIX name */</span></td></tr>
<tr><td class="num" id="LN456">456</td><td class="line">    { <span class='string_literal'>"posix"</span>,          <span class='string_literal'>"en_US_POSIX"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* POSIX name (alias of C) */</span></td></tr>
<tr><td class="num" id="LN457">457</td><td class="line">    { <span class='string_literal'>"art_LOJBAN"</span>,     <span class='string_literal'>"jbo"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN458">458</td><td class="line">    { <span class='string_literal'>"az_AZ_CYRL"</span>,     <span class='string_literal'>"az_Cyrl_AZ"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN459">459</td><td class="line">    { <span class='string_literal'>"az_AZ_LATN"</span>,     <span class='string_literal'>"az_Latn_AZ"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN460">460</td><td class="line">    { <span class='string_literal'>"ca_ES_PREEURO"</span>,  <span class='string_literal'>"ca_ES"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"ESP"</span> },</td></tr>
<tr><td class="num" id="LN461">461</td><td class="line">    { <span class='string_literal'>"de__PHONEBOOK"</span>,  <span class='string_literal'>"de"</span>, <span class='string_literal'>"collation"</span>, <span class='string_literal'>"phonebook"</span> }, <span class='comment'>/* Old ICU name */</span></td></tr>
<tr><td class="num" id="LN462">462</td><td class="line">    { <span class='string_literal'>"de_AT_PREEURO"</span>,  <span class='string_literal'>"de_AT"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"ATS"</span> },</td></tr>
<tr><td class="num" id="LN463">463</td><td class="line">    { <span class='string_literal'>"de_DE_PREEURO"</span>,  <span class='string_literal'>"de_DE"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"DEM"</span> },</td></tr>
<tr><td class="num" id="LN464">464</td><td class="line">    { <span class='string_literal'>"de_LU_PREEURO"</span>,  <span class='string_literal'>"de_LU"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"LUF"</span> },</td></tr>
<tr><td class="num" id="LN465">465</td><td class="line">    { <span class='string_literal'>"el_GR_PREEURO"</span>,  <span class='string_literal'>"el_GR"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"GRD"</span> },</td></tr>
<tr><td class="num" id="LN466">466</td><td class="line">    { <span class='string_literal'>"en_BE_PREEURO"</span>,  <span class='string_literal'>"en_BE"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"BEF"</span> },</td></tr>
<tr><td class="num" id="LN467">467</td><td class="line">    { <span class='string_literal'>"en_IE_PREEURO"</span>,  <span class='string_literal'>"en_IE"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"IEP"</span> },</td></tr>
<tr><td class="num" id="LN468">468</td><td class="line">    { <span class='string_literal'>"es__TRADITIONAL"</span>, <span class='string_literal'>"es"</span>, <span class='string_literal'>"collation"</span>, <span class='string_literal'>"traditional"</span> }, <span class='comment'>/* Old ICU name */</span></td></tr>
<tr><td class="num" id="LN469">469</td><td class="line">    { <span class='string_literal'>"es_ES_PREEURO"</span>,  <span class='string_literal'>"es_ES"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"ESP"</span> },</td></tr>
<tr><td class="num" id="LN470">470</td><td class="line">    { <span class='string_literal'>"eu_ES_PREEURO"</span>,  <span class='string_literal'>"eu_ES"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"ESP"</span> },</td></tr>
<tr><td class="num" id="LN471">471</td><td class="line">    { <span class='string_literal'>"fi_FI_PREEURO"</span>,  <span class='string_literal'>"fi_FI"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"FIM"</span> },</td></tr>
<tr><td class="num" id="LN472">472</td><td class="line">    { <span class='string_literal'>"fr_BE_PREEURO"</span>,  <span class='string_literal'>"fr_BE"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"BEF"</span> },</td></tr>
<tr><td class="num" id="LN473">473</td><td class="line">    { <span class='string_literal'>"fr_FR_PREEURO"</span>,  <span class='string_literal'>"fr_FR"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"FRF"</span> },</td></tr>
<tr><td class="num" id="LN474">474</td><td class="line">    { <span class='string_literal'>"fr_LU_PREEURO"</span>,  <span class='string_literal'>"fr_LU"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"LUF"</span> },</td></tr>
<tr><td class="num" id="LN475">475</td><td class="line">    { <span class='string_literal'>"ga_IE_PREEURO"</span>,  <span class='string_literal'>"ga_IE"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"IEP"</span> },</td></tr>
<tr><td class="num" id="LN476">476</td><td class="line">    { <span class='string_literal'>"gl_ES_PREEURO"</span>,  <span class='string_literal'>"gl_ES"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"ESP"</span> },</td></tr>
<tr><td class="num" id="LN477">477</td><td class="line">    { <span class='string_literal'>"hi__DIRECT"</span>,     <span class='string_literal'>"hi"</span>, <span class='string_literal'>"collation"</span>, <span class='string_literal'>"direct"</span> }, <span class='comment'>/* Old ICU name */</span></td></tr>
<tr><td class="num" id="LN478">478</td><td class="line">    { <span class='string_literal'>"it_IT_PREEURO"</span>,  <span class='string_literal'>"it_IT"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"ITL"</span> },</td></tr>
<tr><td class="num" id="LN479">479</td><td class="line">    { <span class='string_literal'>"ja_JP_TRADITIONAL"</span>, <span class='string_literal'>"ja_JP"</span>, <span class='string_literal'>"calendar"</span>, <span class='string_literal'>"japanese"</span> }, <span class='comment'>/* Old ICU name */</span></td></tr>
<tr><td class="num" id="LN480">480</td><td class="line">    { <span class='string_literal'>"nb_NO_NY"</span>,       <span class='string_literal'>"nn_NO"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> },  <span class='comment'>/* "markus said this was ok" :-) */</span></td></tr>
<tr><td class="num" id="LN481">481</td><td class="line">    { <span class='string_literal'>"nl_BE_PREEURO"</span>,  <span class='string_literal'>"nl_BE"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"BEF"</span> },</td></tr>
<tr><td class="num" id="LN482">482</td><td class="line">    { <span class='string_literal'>"nl_NL_PREEURO"</span>,  <span class='string_literal'>"nl_NL"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"NLG"</span> },</td></tr>
<tr><td class="num" id="LN483">483</td><td class="line">    { <span class='string_literal'>"pt_PT_PREEURO"</span>,  <span class='string_literal'>"pt_PT"</span>, <span class='string_literal'>"currency"</span>, <span class='string_literal'>"PTE"</span> },</td></tr>
<tr><td class="num" id="LN484">484</td><td class="line">    { <span class='string_literal'>"sr_SP_CYRL"</span>,     <span class='string_literal'>"sr_Cyrl_RS"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN485">485</td><td class="line">    { <span class='string_literal'>"sr_SP_LATN"</span>,     <span class='string_literal'>"sr_Latn_RS"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN486">486</td><td class="line">    { <span class='string_literal'>"sr_YU_CYRILLIC"</span>, <span class='string_literal'>"sr_Cyrl_RS"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* Linux name */</span></td></tr>
<tr><td class="num" id="LN487">487</td><td class="line">    { <span class='string_literal'>"th_TH_TRADITIONAL"</span>, <span class='string_literal'>"th_TH"</span>, <span class='string_literal'>"calendar"</span>, <span class='string_literal'>"buddhist"</span> }, <span class='comment'>/* Old ICU name */</span></td></tr>
<tr><td class="num" id="LN488">488</td><td class="line">    { <span class='string_literal'>"uz_UZ_CYRILLIC"</span>, <span class='string_literal'>"uz_Cyrl_UZ"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* Linux name */</span></td></tr>
<tr><td class="num" id="LN489">489</td><td class="line">    { <span class='string_literal'>"uz_UZ_CYRL"</span>,     <span class='string_literal'>"uz_Cyrl_UZ"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN490">490</td><td class="line">    { <span class='string_literal'>"uz_UZ_LATN"</span>,     <span class='string_literal'>"uz_Latn_UZ"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN491">491</td><td class="line">    { <span class='string_literal'>"zh_CHS"</span>,         <span class='string_literal'>"zh_Hans"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN492">492</td><td class="line">    { <span class='string_literal'>"zh_CHT"</span>,         <span class='string_literal'>"zh_Hant"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* .NET name */</span></td></tr>
<tr><td class="num" id="LN493">493</td><td class="line">    { <span class='string_literal'>"zh_GAN"</span>,         <span class='string_literal'>"gan"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN494">494</td><td class="line">    { <span class='string_literal'>"zh_GUOYU"</span>,       <span class='string_literal'>"zh"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN495">495</td><td class="line">    { <span class='string_literal'>"zh_HAKKA"</span>,       <span class='string_literal'>"hak"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN496">496</td><td class="line">    { <span class='string_literal'>"zh_MIN_NAN"</span>,     <span class='string_literal'>"nan"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN497">497</td><td class="line">    { <span class='string_literal'>"zh_WUU"</span>,         <span class='string_literal'>"wuu"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN498">498</td><td class="line">    { <span class='string_literal'>"zh_XIANG"</span>,       <span class='string_literal'>"hsn"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN499">499</td><td class="line">    { <span class='string_literal'>"zh_YUE"</span>,         <span class='string_literal'>"yue"</span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span> }, <span class='comment'>/* registered name */</span></td></tr>
<tr><td class="num" id="LN500">500</td><td class="line">};</td></tr>
<tr><td class="num" id="LN501">501</td><td class="line"> </td></tr>
<tr><td class="num" id="LN502">502</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>struct</span> VariantMap {</td></tr>
<tr><td class="num" id="LN503">503</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *variant;          <span class='comment'>/* input ID */</span></td></tr>
<tr><td class="num" id="LN504">504</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *keyword;     <span class='comment'>/* keyword, or NULL if none */</span></td></tr>
<tr><td class="num" id="LN505">505</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *value;       <span class='comment'>/* keyword value, or NULL if kw==NULL */</span></td></tr>
<tr><td class="num" id="LN506">506</td><td class="line">} VariantMap;</td></tr>
<tr><td class="num" id="LN507">507</td><td class="line"> </td></tr>
<tr><td class="num" id="LN508">508</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> VariantMap VARIANT_MAP[] = {</td></tr>
<tr><td class="num" id="LN509">509</td><td class="line">    { <span class='string_literal'>"EURO"</span>,   <span class='string_literal'>"currency"</span>, <span class='string_literal'>"EUR"</span> },</td></tr>
<tr><td class="num" id="LN510">510</td><td class="line">    { <span class='string_literal'>"PINYIN"</span>, <span class='string_literal'>"collation"</span>, <span class='string_literal'>"pinyin"</span> }, <span class='comment'>/* Solaris variant */</span></td></tr>
<tr><td class="num" id="LN511">511</td><td class="line">    { <span class='string_literal'>"STROKE"</span>, <span class='string_literal'>"collation"</span>, <span class='string_literal'>"stroke"</span> }  <span class='comment'>/* Solaris variant */</span></td></tr>
<tr><td class="num" id="LN512">512</td><td class="line">};</td></tr>
<tr><td class="num" id="LN513">513</td><td class="line"> </td></tr>
<tr><td class="num" id="LN514">514</td><td class="line"><span class='comment'>/* ### BCP47 Conversion *******************************************/</span></td></tr>
<tr><td class="num" id="LN515">515</td><td class="line"><span class='comment'>/* Test if the locale id has BCP47 u extension and does not have '@' */</span></td></tr>
<tr><td class="num" id="LN516">516</td><td class="line"><span class='directive'>#define <span class='macro'>_hasBCP47Extension(id)<span class='expansion'>(id &amp;&amp; :: strstr(id, "@") == __null &amp;&amp; getShortestSubtagLength<br>(localeID) == 1)</span></span> (id &amp;&amp; <span class='macro'>uprv_strstr(id, "@")<span class='expansion'>:: strstr(id, "@")</span></span> == <span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; getShortestSubtagLength(localeID) == 1)</span></td></tr>
<tr><td class="num" id="LN517">517</td><td class="line"><span class='comment'>/* Converts the BCP47 id to Unicode id. Does nothing to id if conversion fails */</span></td></tr>
<tr><td class="num" id="LN518">518</td><td class="line"><span class='directive'>#define <span class='macro'>_ConvertBCP47(finalID, id, buffer, length,err)<span class='expansion'>if (uloc_forLanguageTag_54(id, buffer, length, __null, err) &lt;=<br> 0 || U_FAILURE(*err)) { finalID=id; } else { finalID=buffer;<br> }</span></span> \</span></td></tr>
<tr><td class="num" id="LN519">519</td><td class="line">        <span class='directive'>if (<span class='macro'>uloc_forLanguageTag<span class='expansion'>uloc_forLanguageTag_54</span></span>(id, buffer, length, <span class='macro'>NULL<span class='expansion'>__null</span></span>, err) &lt;= 0 || U_FAILURE(*err)) { \</span></td></tr>
<tr><td class="num" id="LN520">520</td><td class="line">            <span class='directive'>finalID=id; \</span></td></tr>
<tr><td class="num" id="LN521">521</td><td class="line">        <span class='directive'>} else { \</span></td></tr>
<tr><td class="num" id="LN522">522</td><td class="line">            <span class='directive'>finalID=buffer; \</span></td></tr>
<tr><td class="num" id="LN523">523</td><td class="line">        <span class='directive'>}</span></td></tr>
<tr><td class="num" id="LN524">524</td><td class="line"><span class='comment'>/* Gets the size of the shortest subtag in the given localeID. */</span></td></tr>
<tr><td class="num" id="LN525">525</td><td class="line"><span class='keyword'>static</span> int32_t getShortestSubtagLength(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID) {</td></tr>
<tr><td class="num" id="LN526">526</td><td class="line">    int32_t localeIDLength = <span class='macro'>uprv_strlen(localeID)<span class='expansion'>:: strlen(localeID)</span></span>;</td></tr>
<tr><td class="num" id="LN527">527</td><td class="line">    int32_t length = localeIDLength;</td></tr>
<tr><td class="num" id="LN528">528</td><td class="line">    int32_t tmpLength = 0;</td></tr>
<tr><td class="num" id="LN529">529</td><td class="line">    int32_t i;</td></tr>
<tr><td class="num" id="LN530">530</td><td class="line">    UBool reset = <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN531">531</td><td class="line"> </td></tr>
<tr><td class="num" id="LN532">532</td><td class="line">    <span class='keyword'>for</span> (i = 0; i &lt; localeIDLength; i++) {</td></tr>
<tr><td class="num" id="LN533">533</td><td class="line">        <span class='keyword'>if</span> (localeID[i] != '_' &amp;&amp; localeID[i] != '-') {</td></tr>
<tr><td class="num" id="LN534">534</td><td class="line">            <span class='keyword'>if</span> (reset) {</td></tr>
<tr><td class="num" id="LN535">535</td><td class="line">                tmpLength = 0;</td></tr>
<tr><td class="num" id="LN536">536</td><td class="line">                reset = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN537">537</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN538">538</td><td class="line">            tmpLength++;</td></tr>
<tr><td class="num" id="LN539">539</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN540">540</td><td class="line">            <span class='keyword'>if</span> (tmpLength != 0 &amp;&amp; tmpLength &lt; length) {</td></tr>
<tr><td class="num" id="LN541">541</td><td class="line">                length = tmpLength;</td></tr>
<tr><td class="num" id="LN542">542</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN543">543</td><td class="line">            reset = <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN544">544</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN545">545</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN546">546</td><td class="line"> </td></tr>
<tr><td class="num" id="LN547">547</td><td class="line">    <span class='keyword'>return</span> length;</td></tr>
<tr><td class="num" id="LN548">548</td><td class="line">}</td></tr>
<tr><td class="num" id="LN549">549</td><td class="line"> </td></tr>
<tr><td class="num" id="LN550">550</td><td class="line"><span class='comment'>/* ### Keywords **************************************************/</span></td></tr>
<tr><td class="num" id="LN551">551</td><td class="line"> </td></tr>
<tr><td class="num" id="LN552">552</td><td class="line"><span class='directive'>#define <span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span> 25</span></td></tr>
<tr><td class="num" id="LN553">553</td><td class="line"><span class='directive'>#define <span class='macro'>ULOC_MAX_NO_KEYWORDS<span class='expansion'>25</span></span> 25</span></td></tr>
<tr><td class="num" id="LN554">554</td><td class="line"> </td></tr>
<tr><td class="num" id="LN555">555</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span> * U_EXPORT2</td></tr>
<tr><td class="num" id="LN556">556</td><td class="line"><span class='macro'>locale_getKeywordsStart<span class='expansion'>locale_getKeywordsStart_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID) {</td></tr>
<tr><td class="num" id="LN557">557</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *result = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN558">558</td><td class="line">    <span class='keyword'>if</span>((result = <span class='macro'>uprv_strchr(localeID, '@')<span class='expansion'>:: strchr(localeID, '@')</span></span>) != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN559">559</td><td class="line">        <span class='keyword'>return</span> result;</td></tr>
<tr><td class="num" id="LN560">560</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN561">561</td><td class="line"><span class='directive'>#if (<span class='macro'>U_CHARSET_FAMILY<span class='expansion'>0</span></span> == <span class='macro'>U_EBCDIC_FAMILY<span class='expansion'>1</span></span>)</span></td></tr>
<tr><td class="num" id="LN562">562</td><td class="line">    <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN563">563</td><td class="line">        <span class='comment'>/* We do this because the @ sign is variant, and the @ sign used on one</span></td></tr>
<tr><td class="num" id="LN564">564</td><td class="line">        <span class='comment'>EBCDIC machine won't be compiled the same way on other EBCDIC based</span></td></tr>
<tr><td class="num" id="LN565">565</td><td class="line">        <span class='comment'>machines. */</span></td></tr>
<tr><td class="num" id="LN566">566</td><td class="line">        <span class='keyword'>static</span> <span class='keyword'>const</span> uint8_t ebcdicSigns[] = { 0x7C, 0x44, 0x66, 0x80, 0xAC, 0xAE, 0xAF, 0xB5, 0xEC, 0xEF, 0x00 };</td></tr>
<tr><td class="num" id="LN567">567</td><td class="line">        <span class='keyword'>const</span> uint8_t *charToFind = ebcdicSigns;</td></tr>
<tr><td class="num" id="LN568">568</td><td class="line">        <span class='keyword'>while</span>(*charToFind) {</td></tr>
<tr><td class="num" id="LN569">569</td><td class="line">            <span class='keyword'>if</span>((result = <span class='macro'>uprv_strchr(localeID, *charToFind)<span class='expansion'>:: strchr(localeID, *charToFind)</span></span>) != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN570">570</td><td class="line">                <span class='keyword'>return</span> result;</td></tr>
<tr><td class="num" id="LN571">571</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN572">572</td><td class="line">            charToFind++;</td></tr>
<tr><td class="num" id="LN573">573</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN574">574</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN575">575</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN576">576</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN577">577</td><td class="line">}</td></tr>
<tr><td class="num" id="LN578">578</td><td class="line"> </td></tr>
<tr><td class="num" id="LN579">579</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN580">580</td><td class="line"> <span class='comment'>* @param buf buffer of size [ULOC_KEYWORD_BUFFER_LEN]</span></td></tr>
<tr><td class="num" id="LN581">581</td><td class="line"> <span class='comment'>* @param keywordName incoming name to be canonicalized</span></td></tr>
<tr><td class="num" id="LN582">582</td><td class="line"> <span class='comment'>* @param status return status (keyword too long)</span></td></tr>
<tr><td class="num" id="LN583">583</td><td class="line"> <span class='comment'>* @return length of the keyword name</span></td></tr>
<tr><td class="num" id="LN584">584</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN585">585</td><td class="line"><span class='keyword'>static</span> int32_t locale_canonKeywordName(<span class='keyword'>char</span> *buf, <span class='keyword'>const</span> <span class='keyword'>char</span> *keywordName, UErrorCode *status)</td></tr>
<tr><td class="num" id="LN586">586</td><td class="line">{</td></tr>
<tr><td class="num" id="LN587">587</td><td class="line">  int32_t i;</td></tr>
<tr><td class="num" id="LN588">588</td><td class="line">  int32_t keywordNameLen = (int32_t)<span class='macro'>uprv_strlen(keywordName)<span class='expansion'>:: strlen(keywordName)</span></span>;</td></tr>
<tr><td class="num" id="LN589">589</td><td class="line">  </td></tr>
<tr><td class="num" id="LN590">590</td><td class="line">  <span class='keyword'>if</span>(keywordNameLen &gt;= <span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>) {</td></tr>
<tr><td class="num" id="LN591">591</td><td class="line">    <span class='comment'>/* keyword name too long for internal buffer */</span></td></tr>
<tr><td class="num" id="LN592">592</td><td class="line">    *status = U_INTERNAL_PROGRAM_ERROR;</td></tr>
<tr><td class="num" id="LN593">593</td><td class="line">          <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN594">594</td><td class="line">  }</td></tr>
<tr><td class="num" id="LN595">595</td><td class="line">  </td></tr>
<tr><td class="num" id="LN596">596</td><td class="line">  <span class='comment'>/* normalize the keyword name */</span></td></tr>
<tr><td class="num" id="LN597">597</td><td class="line">  <span class='keyword'>for</span>(i = 0; i &lt; keywordNameLen; i++) {</td></tr>
<tr><td class="num" id="LN598">598</td><td class="line">    buf[i] = <span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(keywordName[i]);</td></tr>
<tr><td class="num" id="LN599">599</td><td class="line">  }</td></tr>
<tr><td class="num" id="LN600">600</td><td class="line">  buf[i] = 0;</td></tr>
<tr><td class="num" id="LN601">601</td><td class="line">    </td></tr>
<tr><td class="num" id="LN602">602</td><td class="line">  <span class='keyword'>return</span> keywordNameLen;</td></tr>
<tr><td class="num" id="LN603">603</td><td class="line">}</td></tr>
<tr><td class="num" id="LN604">604</td><td class="line"> </td></tr>
<tr><td class="num" id="LN605">605</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>struct</span> {</td></tr>
<tr><td class="num" id="LN606">606</td><td class="line">    <span class='keyword'>char</span> keyword[<span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>];</td></tr>
<tr><td class="num" id="LN607">607</td><td class="line">    int32_t keywordLen;</td></tr>
<tr><td class="num" id="LN608">608</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *valueStart;</td></tr>
<tr><td class="num" id="LN609">609</td><td class="line">    int32_t valueLen;</td></tr>
<tr><td class="num" id="LN610">610</td><td class="line">} KeywordStruct;</td></tr>
<tr><td class="num" id="LN611">611</td><td class="line"> </td></tr>
<tr><td class="num" id="LN612">612</td><td class="line"><span class='keyword'>static</span> int32_t U_CALLCONV</td></tr>
<tr><td class="num" id="LN613">613</td><td class="line">compareKeywordStructs(<span class='keyword'>const</span> <span class='keyword'>void</span> * <span class='comment'>/*context*/</span>, <span class='keyword'>const</span> <span class='keyword'>void</span> *left, <span class='keyword'>const</span> <span class='keyword'>void</span> *right) {</td></tr>
<tr><td class="num" id="LN614">614</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* leftString = ((<span class='keyword'>const</span> KeywordStruct *)left)-&gt;keyword;</td></tr>
<tr><td class="num" id="LN615">615</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* rightString = ((<span class='keyword'>const</span> KeywordStruct *)right)-&gt;keyword;</td></tr>
<tr><td class="num" id="LN616">616</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>uprv_strcmp(leftString, rightString)<span class='expansion'>:: strcmp(leftString, rightString)</span></span>;</td></tr>
<tr><td class="num" id="LN617">617</td><td class="line">}</td></tr>
<tr><td class="num" id="LN618">618</td><td class="line"> </td></tr>
<tr><td class="num" id="LN619">619</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN620">620</td><td class="line"> <span class='comment'>* Both addKeyword and addValue must already be in canonical form.</span></td></tr>
<tr><td class="num" id="LN621">621</td><td class="line"> <span class='comment'>* Either both addKeyword and addValue are NULL, or neither is NULL.</span></td></tr>
<tr><td class="num" id="LN622">622</td><td class="line"> <span class='comment'>* If they are not NULL they must be zero terminated.</span></td></tr>
<tr><td class="num" id="LN623">623</td><td class="line"> <span class='comment'>* If addKeyword is not NULL is must have length small enough to fit in KeywordStruct.keyword.</span></td></tr>
<tr><td class="num" id="LN624">624</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN625">625</td><td class="line"><span class='keyword'>static</span> int32_t</td></tr>
<tr><td class="num" id="LN626">626</td><td class="line">_getKeywords(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN627">627</td><td class="line">             <span class='keyword'>char</span> prev,</td></tr>
<tr><td class="num" id="LN628">628</td><td class="line">             <span class='keyword'>char</span> *keywords, int32_t keywordCapacity,</td></tr>
<tr><td class="num" id="LN629">629</td><td class="line">             <span class='keyword'>char</span> *values, int32_t valuesCapacity, int32_t *valLen,</td></tr>
<tr><td class="num" id="LN630">630</td><td class="line">             UBool valuesToo,</td></tr>
<tr><td class="num" id="LN631">631</td><td class="line">             <span class='keyword'>const</span> <span class='keyword'>char</span>* addKeyword,</td></tr>
<tr><td class="num" id="LN632">632</td><td class="line">             <span class='keyword'>const</span> <span class='keyword'>char</span>* addValue,</td></tr>
<tr><td class="num" id="LN633">633</td><td class="line">             UErrorCode *status)</td></tr>
<tr><td class="num" id="LN634">634</td><td class="line">{</td></tr>
<tr><td class="num" id="LN635">635</td><td class="line">    KeywordStruct keywordList[<span class='macro'>ULOC_MAX_NO_KEYWORDS<span class='expansion'>25</span></span>];</td></tr>
<tr><td class="num" id="LN636">636</td><td class="line">    </td></tr>
<tr><td class="num" id="LN637">637</td><td class="line">    int32_t maxKeywords = <span class='macro'>ULOC_MAX_NO_KEYWORDS<span class='expansion'>25</span></span>;</td></tr>
<tr><td class="num" id="LN638">638</td><td class="line">    int32_t numKeywords = 0;</td></tr>
<tr><td class="num" id="LN639">639</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* pos = localeID;</td></tr>
<tr><td class="num" id="LN640">640</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* equalSign = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN641">641</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* semicolon = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN642">642</td><td class="line">    int32_t i = 0, j, n;</td></tr>
<tr><td class="num" id="LN643">643</td><td class="line">    int32_t keywordsLen = 0;</td></tr>
<tr><td class="num" id="LN644">644</td><td class="line">    int32_t valuesLen = 0;</td></tr>
<tr><td class="num" id="LN645">645</td><td class="line"> </td></tr>
<tr><td class="num" id="LN646">646</td><td class="line">    <span class='keyword'>if</span>(prev == '@') { <span class='comment'>/* start of keyword definition */</span></td></tr>
<tr><td class="num" id="LN647">647</td><td class="line">        <span class='comment'>/* we will grab pairs, trim spaces, lowercase keywords, sort and return */</span></td></tr>
<tr><td class="num" id="LN648">648</td><td class="line">        <span class='keyword'>do</span> {</td></tr>
<tr><td class="num" id="LN649">649</td><td class="line">            UBool duplicate = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN650">650</td><td class="line">            <span class='comment'>/* skip leading spaces */</span></td></tr>
<tr><td class="num" id="LN651">651</td><td class="line">            <span class='keyword'>while</span>(*pos == ' ') {</td></tr>
<tr><td class="num" id="LN652">652</td><td class="line">                pos++;</td></tr>
<tr><td class="num" id="LN653">653</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN654">654</td><td class="line">            <span class='keyword'>if</span> (!*pos) { <span class='comment'>/* handle trailing "; " */</span></td></tr>
<tr><td class="num" id="LN655">655</td><td class="line">                <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN656">656</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN657">657</td><td class="line">            <span class='keyword'>if</span>(numKeywords == maxKeywords) {</td></tr>
<tr><td class="num" id="LN658">658</td><td class="line">                *status = U_INTERNAL_PROGRAM_ERROR;</td></tr>
<tr><td class="num" id="LN659">659</td><td class="line">                <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN660">660</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN661">661</td><td class="line">            equalSign = <span class='macro'>uprv_strchr(pos, '=')<span class='expansion'>:: strchr(pos, '=')</span></span>;</td></tr>
<tr><td class="num" id="LN662">662</td><td class="line">            semicolon = <span class='macro'>uprv_strchr(pos, ';')<span class='expansion'>:: strchr(pos, ';')</span></span>;</td></tr>
<tr><td class="num" id="LN663">663</td><td class="line">            <span class='comment'>/* lack of '=' [foo@currency] is illegal */</span></td></tr>
<tr><td class="num" id="LN664">664</td><td class="line">            <span class='comment'>/* ';' before '=' [foo@currency;collation=pinyin] is illegal */</span></td></tr>
<tr><td class="num" id="LN665">665</td><td class="line">            <span class='keyword'>if</span>(!equalSign || (semicolon &amp;&amp; semicolon&lt;equalSign)) {</td></tr>
<tr><td class="num" id="LN666">666</td><td class="line">                *status = U_INVALID_FORMAT_ERROR;</td></tr>
<tr><td class="num" id="LN667">667</td><td class="line">                <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN668">668</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN669">669</td><td class="line">            <span class='comment'>/* need to normalize both keyword and keyword name */</span></td></tr>
<tr><td class="num" id="LN670">670</td><td class="line">            <span class='keyword'>if</span>(equalSign - pos &gt;= <span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>) {</td></tr>
<tr><td class="num" id="LN671">671</td><td class="line">                <span class='comment'>/* keyword name too long for internal buffer */</span></td></tr>
<tr><td class="num" id="LN672">672</td><td class="line">                *status = U_INTERNAL_PROGRAM_ERROR;</td></tr>
<tr><td class="num" id="LN673">673</td><td class="line">                <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN674">674</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN675">675</td><td class="line">            <span class='keyword'>for</span>(i = 0, n = 0; i &lt; equalSign - pos; ++i) {</td></tr>
<tr><td class="num" id="LN676">676</td><td class="line">                <span class='keyword'>if</span> (pos[i] != ' ') {</td></tr>
<tr><td class="num" id="LN677">677</td><td class="line">                    keywordList[numKeywords].keyword[n++] = <span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(pos[i]);</td></tr>
<tr><td class="num" id="LN678">678</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN679">679</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN680">680</td><td class="line"> </td></tr>
<tr><td class="num" id="LN681">681</td><td class="line">            <span class='comment'>/* zero-length keyword is an error. */</span></td></tr>
<tr><td class="num" id="LN682">682</td><td class="line">            <span class='keyword'>if</span> (n == 0) {</td></tr>
<tr><td class="num" id="LN683">683</td><td class="line">                *status = U_INVALID_FORMAT_ERROR;</td></tr>
<tr><td class="num" id="LN684">684</td><td class="line">                <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN685">685</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN686">686</td><td class="line"> </td></tr>
<tr><td class="num" id="LN687">687</td><td class="line">            keywordList[numKeywords].keyword[n] = 0;</td></tr>
<tr><td class="num" id="LN688">688</td><td class="line">            keywordList[numKeywords].keywordLen = n;</td></tr>
<tr><td class="num" id="LN689">689</td><td class="line">            <span class='comment'>/* now grab the value part. First we skip the '=' */</span></td></tr>
<tr><td class="num" id="LN690">690</td><td class="line">            equalSign++;</td></tr>
<tr><td class="num" id="LN691">691</td><td class="line">            <span class='comment'>/* then we leading spaces */</span></td></tr>
<tr><td class="num" id="LN692">692</td><td class="line">            <span class='keyword'>while</span>(*equalSign == ' ') {</td></tr>
<tr><td class="num" id="LN693">693</td><td class="line">                equalSign++;</td></tr>
<tr><td class="num" id="LN694">694</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN695">695</td><td class="line"> </td></tr>
<tr><td class="num" id="LN696">696</td><td class="line">            <span class='comment'>/* Premature end or zero-length value */</span></td></tr>
<tr><td class="num" id="LN697">697</td><td class="line">            <span class='keyword'>if</span> (!*equalSign || equalSign == semicolon) {</td></tr>
<tr><td class="num" id="LN698">698</td><td class="line">                *status = U_INVALID_FORMAT_ERROR;</td></tr>
<tr><td class="num" id="LN699">699</td><td class="line">                <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN700">700</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN701">701</td><td class="line"> </td></tr>
<tr><td class="num" id="LN702">702</td><td class="line">            keywordList[numKeywords].valueStart = equalSign;</td></tr>
<tr><td class="num" id="LN703">703</td><td class="line"> </td></tr>
<tr><td class="num" id="LN704">704</td><td class="line">            pos = semicolon;</td></tr>
<tr><td class="num" id="LN705">705</td><td class="line">            i = 0;</td></tr>
<tr><td class="num" id="LN706">706</td><td class="line">            <span class='keyword'>if</span>(pos) {</td></tr>
<tr><td class="num" id="LN707">707</td><td class="line">                <span class='keyword'>while</span>(*(pos - i - 1) == ' ') {</td></tr>
<tr><td class="num" id="LN708">708</td><td class="line">                    i++;</td></tr>
<tr><td class="num" id="LN709">709</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN710">710</td><td class="line">                keywordList[numKeywords].valueLen = (int32_t)(pos - equalSign - i);</td></tr>
<tr><td class="num" id="LN711">711</td><td class="line">                pos++;</td></tr>
<tr><td class="num" id="LN712">712</td><td class="line">            } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN713">713</td><td class="line">                i = (int32_t)<span class='macro'>uprv_strlen(equalSign)<span class='expansion'>:: strlen(equalSign)</span></span>;</td></tr>
<tr><td class="num" id="LN714">714</td><td class="line">                <span class='keyword'>while</span>(i &amp;&amp; equalSign[i-1] == ' ') {</td></tr>
<tr><td class="num" id="LN715">715</td><td class="line">                    i--;</td></tr>
<tr><td class="num" id="LN716">716</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN717">717</td><td class="line">                keywordList[numKeywords].valueLen = i;</td></tr>
<tr><td class="num" id="LN718">718</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN719">719</td><td class="line">            <span class='comment'>/* If this is a duplicate keyword, then ignore it */</span></td></tr>
<tr><td class="num" id="LN720">720</td><td class="line">            <span class='keyword'>for</span> (j=0; j&lt;numKeywords; ++j) {</td></tr>
<tr><td class="num" id="LN721">721</td><td class="line">                <span class='keyword'>if</span> (<span class='macro'>uprv_strcmp(keywordList[j].keyword, keywordList[numKeywords].keyword)<span class='expansion'>:: strcmp(keywordList[j].keyword, keywordList[numKeywords].keyword<br>)</span></span> == 0) {</td></tr>
<tr><td class="num" id="LN722">722</td><td class="line">                    duplicate = <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN723">723</td><td class="line">                    <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN724">724</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN725">725</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN726">726</td><td class="line">            <span class='keyword'>if</span> (!duplicate) {</td></tr>
<tr><td class="num" id="LN727">727</td><td class="line">                ++numKeywords;</td></tr>
<tr><td class="num" id="LN728">728</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN729">729</td><td class="line">        } <span class='keyword'>while</span>(pos);</td></tr>
<tr><td class="num" id="LN730">730</td><td class="line"> </td></tr>
<tr><td class="num" id="LN731">731</td><td class="line">        <span class='comment'>/* Handle addKeyword/addValue. */</span></td></tr>
<tr><td class="num" id="LN732">732</td><td class="line">        <span class='keyword'>if</span> (addKeyword != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN733">733</td><td class="line">            UBool duplicate = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN734">734</td><td class="line">            U_ASSERT(addValue != NULL);</td></tr>
<tr><td class="num" id="LN735">735</td><td class="line">            <span class='comment'>/* Search for duplicate; if found, do nothing. Explicit keyword</span></td></tr>
<tr><td class="num" id="LN736">736</td><td class="line">               <span class='comment'>overrides addKeyword. */</span></td></tr>
<tr><td class="num" id="LN737">737</td><td class="line">            <span class='keyword'>for</span> (j=0; j&lt;numKeywords; ++j) {</td></tr>
<tr><td class="num" id="LN738">738</td><td class="line">                <span class='keyword'>if</span> (<span class='macro'>uprv_strcmp(keywordList[j].keyword, addKeyword)<span class='expansion'>:: strcmp(keywordList[j].keyword, addKeyword)</span></span> == 0) {</td></tr>
<tr><td class="num" id="LN739">739</td><td class="line">                    duplicate = <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN740">740</td><td class="line">                    <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN741">741</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN742">742</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN743">743</td><td class="line">            <span class='keyword'>if</span> (!duplicate) {</td></tr>
<tr><td class="num" id="LN744">744</td><td class="line">                <span class='keyword'>if</span> (numKeywords == maxKeywords) {</td></tr>
<tr><td class="num" id="LN745">745</td><td class="line">                    *status = U_INTERNAL_PROGRAM_ERROR;</td></tr>
<tr><td class="num" id="LN746">746</td><td class="line">                    <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN747">747</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN748">748</td><td class="line">                <span class='macro'>uprv_strcpy(keywordList[numKeywords].keyword, addKeyword)<span class='expansion'>:: strcpy(keywordList[numKeywords].keyword, addKeyword)</span></span>;</td></tr>
<tr><td class="num" id="LN749">749</td><td class="line">                keywordList[numKeywords].keywordLen = (int32_t)<span class='macro'>uprv_strlen(addKeyword)<span class='expansion'>:: strlen(addKeyword)</span></span>;</td></tr>
<tr><td class="num" id="LN750">750</td><td class="line">                keywordList[numKeywords].valueStart = addValue;</td></tr>
<tr><td class="num" id="LN751">751</td><td class="line">                keywordList[numKeywords].valueLen = (int32_t)<span class='macro'>uprv_strlen(addValue)<span class='expansion'>:: strlen(addValue)</span></span>;</td></tr>
<tr><td class="num" id="LN752">752</td><td class="line">                ++numKeywords;</td></tr>
<tr><td class="num" id="LN753">753</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN754">754</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN755">755</td><td class="line">            U_ASSERT(addValue == NULL);</td></tr>
<tr><td class="num" id="LN756">756</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN757">757</td><td class="line"> </td></tr>
<tr><td class="num" id="LN758">758</td><td class="line">        <span class='comment'>/* now we have a list of keywords */</span></td></tr>
<tr><td class="num" id="LN759">759</td><td class="line">        <span class='comment'>/* we need to sort it */</span></td></tr>
<tr><td class="num" id="LN760">760</td><td class="line">        <span class='macro'>uprv_sortArray<span class='expansion'>uprv_sortArray_54</span></span>(keywordList, numKeywords, <span class='keyword'>sizeof</span>(KeywordStruct), compareKeywordStructs, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>FALSE<span class='expansion'>0</span></span>, status);</td></tr>
<tr><td class="num" id="LN761">761</td><td class="line">        </td></tr>
<tr><td class="num" id="LN762">762</td><td class="line">        <span class='comment'>/* Now construct the keyword part */</span></td></tr>
<tr><td class="num" id="LN763">763</td><td class="line">        <span class='keyword'>for</span>(i = 0; i &lt; numKeywords; i++) {</td></tr>
<tr><td class="num" id="LN764">764</td><td class="line">            <span class='keyword'>if</span>(keywordsLen + keywordList[i].keywordLen + 1&lt; keywordCapacity) {</td></tr>
<tr><td class="num" id="LN765">765</td><td class="line">                <span class='macro'>uprv_strcpy(keywords+keywordsLen, keywordList[i].keyword)<span class='expansion'>:: strcpy(keywords+keywordsLen, keywordList[i].keyword)</span></span>;</td></tr>
<tr><td class="num" id="LN766">766</td><td class="line">                <span class='keyword'>if</span>(valuesToo) {</td></tr>
<tr><td class="num" id="LN767">767</td><td class="line">                    keywords[keywordsLen + keywordList[i].keywordLen] = '=';</td></tr>
<tr><td class="num" id="LN768">768</td><td class="line">                } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN769">769</td><td class="line">                    keywords[keywordsLen + keywordList[i].keywordLen] = 0;</td></tr>
<tr><td class="num" id="LN770">770</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN771">771</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN772">772</td><td class="line">            keywordsLen += keywordList[i].keywordLen + 1;</td></tr>
<tr><td class="num" id="LN773">773</td><td class="line">            <span class='keyword'>if</span>(valuesToo) {</td></tr>
<tr><td class="num" id="LN774">774</td><td class="line">                <span class='keyword'>if</span>(keywordsLen + keywordList[i].valueLen &lt; keywordCapacity) {</td></tr>
<tr><td class="num" id="LN775">775</td><td class="line">                    <span class='macro'>uprv_strncpy(keywords+keywordsLen, keywordList[i].valueStart, keywordList[i].valueLen)<span class='expansion'>:: strncpy(keywords+keywordsLen, keywordList[i].valueStart, keywordList<br>[i].valueLen)</span></span>;</td></tr>
<tr><td class="num" id="LN776">776</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN777">777</td><td class="line">                keywordsLen += keywordList[i].valueLen;</td></tr>
<tr><td class="num" id="LN778">778</td><td class="line">                </td></tr>
<tr><td class="num" id="LN779">779</td><td class="line">                <span class='keyword'>if</span>(i &lt; numKeywords - 1) {</td></tr>
<tr><td class="num" id="LN780">780</td><td class="line">                    <span class='keyword'>if</span>(keywordsLen &lt; keywordCapacity) {       </td></tr>
<tr><td class="num" id="LN781">781</td><td class="line">                        keywords[keywordsLen] = ';';</td></tr>
<tr><td class="num" id="LN782">782</td><td class="line">                    }</td></tr>
<tr><td class="num" id="LN783">783</td><td class="line">                    keywordsLen++;</td></tr>
<tr><td class="num" id="LN784">784</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN785">785</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN786">786</td><td class="line">            <span class='keyword'>if</span>(values) {</td></tr>
<tr><td class="num" id="LN787">787</td><td class="line">                <span class='keyword'>if</span>(valuesLen + keywordList[i].valueLen + 1&lt; valuesCapacity) {</td></tr>
<tr><td class="num" id="LN788">788</td><td class="line">                    <span class='macro'>uprv_strcpy(values+valuesLen, keywordList[i].valueStart)<span class='expansion'>:: strcpy(values+valuesLen, keywordList[i].valueStart)</span></span>;</td></tr>
<tr><td class="num" id="LN789">789</td><td class="line">                    values[valuesLen + keywordList[i].valueLen] = 0;</td></tr>
<tr><td class="num" id="LN790">790</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN791">791</td><td class="line">                valuesLen += keywordList[i].valueLen + 1;</td></tr>
<tr><td class="num" id="LN792">792</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN793">793</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN794">794</td><td class="line">        <span class='keyword'>if</span>(values) {</td></tr>
<tr><td class="num" id="LN795">795</td><td class="line">            values[valuesLen] = 0;</td></tr>
<tr><td class="num" id="LN796">796</td><td class="line">            <span class='keyword'>if</span>(valLen) {</td></tr>
<tr><td class="num" id="LN797">797</td><td class="line">                *valLen = valuesLen;</td></tr>
<tr><td class="num" id="LN798">798</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN799">799</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN800">800</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(keywords, keywordCapacity, keywordsLen, status);   </td></tr>
<tr><td class="num" id="LN801">801</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN802">802</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN803">803</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN804">804</td><td class="line">}</td></tr>
<tr><td class="num" id="LN805">805</td><td class="line"> </td></tr>
<tr><td class="num" id="LN806">806</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> int32_t</td></tr>
<tr><td class="num" id="LN807">807</td><td class="line"><span class='macro'>locale_getKeywords<span class='expansion'>locale_getKeywords_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN808">808</td><td class="line">                   <span class='keyword'>char</span> prev,</td></tr>
<tr><td class="num" id="LN809">809</td><td class="line">                   <span class='keyword'>char</span> *keywords, int32_t keywordCapacity,</td></tr>
<tr><td class="num" id="LN810">810</td><td class="line">                   <span class='keyword'>char</span> *values, int32_t valuesCapacity, int32_t *valLen,</td></tr>
<tr><td class="num" id="LN811">811</td><td class="line">                   UBool valuesToo,</td></tr>
<tr><td class="num" id="LN812">812</td><td class="line">                   UErrorCode *status) {</td></tr>
<tr><td class="num" id="LN813">813</td><td class="line">    <span class='keyword'>return</span> _getKeywords(localeID, prev, keywords, keywordCapacity,</td></tr>
<tr><td class="num" id="LN814">814</td><td class="line">                        values, valuesCapacity, valLen, valuesToo,</td></tr>
<tr><td class="num" id="LN815">815</td><td class="line">                        <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>, status);</td></tr>
<tr><td class="num" id="LN816">816</td><td class="line">}</td></tr>
<tr><td class="num" id="LN817">817</td><td class="line"> </td></tr>
<tr><td class="num" id="LN818">818</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN819">819</td><td class="line"><span class='macro'>uloc_getKeywordValue<span class='expansion'>uloc_getKeywordValue_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN820">820</td><td class="line">                     <span class='keyword'>const</span> <span class='keyword'>char</span>* keywordName,</td></tr>
<tr><td class="num" id="LN821">821</td><td class="line">                     <span class='keyword'>char</span>* buffer, int32_t bufferCapacity,</td></tr>
<tr><td class="num" id="LN822">822</td><td class="line">                     UErrorCode* status)</td></tr>
<tr><td class="num" id="LN823">823</td><td class="line">{ </td></tr>
<tr><td class="num" id="LN824">824</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* startSearchHere = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN825">825</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* nextSeparator = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN826">826</td><td class="line">    <span class='keyword'>char</span> keywordNameBuffer[<span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>];</td></tr>
<tr><td class="num" id="LN827">827</td><td class="line">    <span class='keyword'>char</span> localeKeywordNameBuffer[<span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>];</td></tr>
<tr><td class="num" id="LN828">828</td><td class="line">    int32_t i = 0;</td></tr>
<tr><td class="num" id="LN829">829</td><td class="line">    int32_t result = 0;</td></tr>
<tr><td class="num" id="LN830">830</td><td class="line"> </td></tr>
<tr><td class="num" id="LN831">831</td><td class="line">    <span class='keyword'>if</span>(status &amp;&amp; U_SUCCESS(*status) &amp;&amp; localeID) {</td></tr>
<tr><td class="num" id="LN832">832</td><td class="line">      <span class='keyword'>char</span> tempBuffer[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN833">833</td><td class="line">      <span class='keyword'>const</span> <span class='keyword'>char</span>* tmpLocaleID;</td></tr>
<tr><td class="num" id="LN834">834</td><td class="line"> </td></tr>
<tr><td class="num" id="LN835">835</td><td class="line">      <span class='keyword'>if</span> (<span class='macro'>_hasBCP47Extension(localeID)<span class='expansion'>(localeID &amp;&amp; :: strstr(localeID, "@") == __null &amp;&amp;<br> getShortestSubtagLength(localeID) == 1)</span></span>) {</td></tr>
<tr><td class="num" id="LN836">836</td><td class="line">          <span class='macro'>_ConvertBCP47(tmpLocaleID, localeID, tempBuffer, <span class='keyword'>sizeof</span>(tempBuffer), status)<span class='expansion'>if (uloc_forLanguageTag_54(localeID, tempBuffer, sizeof(tempBuffer<br>), __null, status) &lt;= 0 || U_FAILURE(*status)) { tmpLocaleID<br>=localeID; } else { tmpLocaleID=tempBuffer; }</span></span>;</td></tr>
<tr><td class="num" id="LN837">837</td><td class="line">      } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN838">838</td><td class="line">          tmpLocaleID=localeID;</td></tr>
<tr><td class="num" id="LN839">839</td><td class="line">      }</td></tr>
<tr><td class="num" id="LN840">840</td><td class="line">    </td></tr>
<tr><td class="num" id="LN841">841</td><td class="line">      startSearchHere = <span class='macro'>uprv_strchr(tmpLocaleID, '@')<span class='expansion'>:: strchr(tmpLocaleID, '@')</span></span>; <span class='comment'>/* TODO: REVISIT: shouldn't this be locale_getKeywordsStart ? */</span></td></tr>
<tr><td class="num" id="LN842">842</td><td class="line">      <span class='keyword'>if</span>(startSearchHere == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN843">843</td><td class="line">          <span class='comment'>/* no keywords, return at once */</span></td></tr>
<tr><td class="num" id="LN844">844</td><td class="line">          <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN845">845</td><td class="line">      }</td></tr>
<tr><td class="num" id="LN846">846</td><td class="line"> </td></tr>
<tr><td class="num" id="LN847">847</td><td class="line">      locale_canonKeywordName(keywordNameBuffer, keywordName, status);</td></tr>
<tr><td class="num" id="LN848">848</td><td class="line">      <span class='keyword'>if</span>(U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN849">849</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN850">850</td><td class="line">      }</td></tr>
<tr><td class="num" id="LN851">851</td><td class="line">    </td></tr>
<tr><td class="num" id="LN852">852</td><td class="line">      <span class='comment'>/* find the first keyword */</span></td></tr>
<tr><td class="num" id="LN853">853</td><td class="line">      <span class='keyword'>while</span>(startSearchHere) {</td></tr>
<tr><td class="num" id="LN854">854</td><td class="line">          startSearchHere++;</td></tr>
<tr><td class="num" id="LN855">855</td><td class="line">          <span class='comment'>/* skip leading spaces (allowed?) */</span></td></tr>
<tr><td class="num" id="LN856">856</td><td class="line">          <span class='keyword'>while</span>(*startSearchHere == ' ') {</td></tr>
<tr><td class="num" id="LN857">857</td><td class="line">              startSearchHere++;</td></tr>
<tr><td class="num" id="LN858">858</td><td class="line">          }</td></tr>
<tr><td class="num" id="LN859">859</td><td class="line">          nextSeparator = <span class='macro'>uprv_strchr(startSearchHere, '=')<span class='expansion'>:: strchr(startSearchHere, '=')</span></span>;</td></tr>
<tr><td class="num" id="LN860">860</td><td class="line">          <span class='comment'>/* need to normalize both keyword and keyword name */</span></td></tr>
<tr><td class="num" id="LN861">861</td><td class="line">          <span class='keyword'>if</span>(!nextSeparator) {</td></tr>
<tr><td class="num" id="LN862">862</td><td class="line">              <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN863">863</td><td class="line">          }</td></tr>
<tr><td class="num" id="LN864">864</td><td class="line">          <span class='keyword'>if</span>(nextSeparator - startSearchHere &gt;= <span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>) {</td></tr>
<tr><td class="num" id="LN865">865</td><td class="line">              <span class='comment'>/* keyword name too long for internal buffer */</span></td></tr>
<tr><td class="num" id="LN866">866</td><td class="line">              *status = U_INTERNAL_PROGRAM_ERROR;</td></tr>
<tr><td class="num" id="LN867">867</td><td class="line">              <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN868">868</td><td class="line">          }</td></tr>
<tr><td class="num" id="LN869">869</td><td class="line">          <span class='keyword'>for</span>(i = 0; i &lt; nextSeparator - startSearchHere; i++) {</td></tr>
<tr><td class="num" id="LN870">870</td><td class="line">              localeKeywordNameBuffer[i] = <span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(startSearchHere[i]);</td></tr>
<tr><td class="num" id="LN871">871</td><td class="line">          }</td></tr>
<tr><td class="num" id="LN872">872</td><td class="line">          <span class='comment'>/* trim trailing spaces */</span></td></tr>
<tr><td class="num" id="LN873">873</td><td class="line">          <span class='keyword'>while</span>(startSearchHere[i-1] == ' ') {</td></tr>
<tr><td class="num" id="LN874">874</td><td class="line">              i--;</td></tr>
<tr><td class="num" id="LN875">875</td><td class="line">              U_ASSERT(i&gt;=0);</td></tr>
<tr><td class="num" id="LN876">876</td><td class="line">          }</td></tr>
<tr><td class="num" id="LN877">877</td><td class="line">          localeKeywordNameBuffer[i] = 0;</td></tr>
<tr><td class="num" id="LN878">878</td><td class="line">        </td></tr>
<tr><td class="num" id="LN879">879</td><td class="line">          startSearchHere = <span class='macro'>uprv_strchr(nextSeparator, ';')<span class='expansion'>:: strchr(nextSeparator, ';')</span></span>;</td></tr>
<tr><td class="num" id="LN880">880</td><td class="line">        </td></tr>
<tr><td class="num" id="LN881">881</td><td class="line">          <span class='keyword'>if</span>(<span class='macro'>uprv_strcmp(keywordNameBuffer, localeKeywordNameBuffer)<span class='expansion'>:: strcmp(keywordNameBuffer, localeKeywordNameBuffer)</span></span> == 0) {</td></tr>
<tr><td class="num" id="LN882">882</td><td class="line">              nextSeparator++;</td></tr>
<tr><td class="num" id="LN883">883</td><td class="line">              <span class='keyword'>while</span>(*nextSeparator == ' ') {</td></tr>
<tr><td class="num" id="LN884">884</td><td class="line">                  nextSeparator++;</td></tr>
<tr><td class="num" id="LN885">885</td><td class="line">              }</td></tr>
<tr><td class="num" id="LN886">886</td><td class="line">              <span class='comment'>/* we actually found the keyword. Copy the value */</span></td></tr>
<tr><td class="num" id="LN887">887</td><td class="line">              <span class='keyword'>if</span>(startSearchHere &amp;&amp; startSearchHere - nextSeparator &lt; bufferCapacity) {</td></tr>
<tr><td class="num" id="LN888">888</td><td class="line">                  <span class='keyword'>while</span>(*(startSearchHere-1) == ' ') {</td></tr>
<tr><td class="num" id="LN889">889</td><td class="line">                      startSearchHere--;</td></tr>
<tr><td class="num" id="LN890">890</td><td class="line">                  }</td></tr>
<tr><td class="num" id="LN891">891</td><td class="line">                  <span class='macro'>uprv_strncpy(buffer, nextSeparator, startSearchHere - nextSeparator)<span class='expansion'>:: strncpy(buffer, nextSeparator, startSearchHere - nextSeparator<br>)</span></span>;</td></tr>
<tr><td class="num" id="LN892">892</td><td class="line">                  result = <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(buffer, bufferCapacity, (int32_t)(startSearchHere - nextSeparator), status);</td></tr>
<tr><td class="num" id="LN893">893</td><td class="line">              } <span class='keyword'>else</span> <span class='keyword'>if</span>(!startSearchHere &amp;&amp; (int32_t)<span class='macro'>uprv_strlen(nextSeparator)<span class='expansion'>:: strlen(nextSeparator)</span></span> &lt; bufferCapacity) { <span class='comment'>/* last item in string */</span></td></tr>
<tr><td class="num" id="LN894">894</td><td class="line">                  i = (int32_t)<span class='macro'>uprv_strlen(nextSeparator)<span class='expansion'>:: strlen(nextSeparator)</span></span>;</td></tr>
<tr><td class="num" id="LN895">895</td><td class="line">                  <span class='keyword'>while</span>(nextSeparator[i - 1] == ' ') {</td></tr>
<tr><td class="num" id="LN896">896</td><td class="line">                      i--;</td></tr>
<tr><td class="num" id="LN897">897</td><td class="line">                  }</td></tr>
<tr><td class="num" id="LN898">898</td><td class="line">                  <span class='macro'>uprv_strncpy(buffer, nextSeparator, i)<span class='expansion'>:: strncpy(buffer, nextSeparator, i)</span></span>;</td></tr>
<tr><td class="num" id="LN899">899</td><td class="line">                  result = <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(buffer, bufferCapacity, i, status);</td></tr>
<tr><td class="num" id="LN900">900</td><td class="line">              } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN901">901</td><td class="line">                  <span class='comment'>/* give a bigger buffer, please */</span></td></tr>
<tr><td class="num" id="LN902">902</td><td class="line">                  *status = U_BUFFER_OVERFLOW_ERROR;</td></tr>
<tr><td class="num" id="LN903">903</td><td class="line">                  <span class='keyword'>if</span>(startSearchHere) {</td></tr>
<tr><td class="num" id="LN904">904</td><td class="line">                      result = (int32_t)(startSearchHere - nextSeparator);</td></tr>
<tr><td class="num" id="LN905">905</td><td class="line">                  } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN906">906</td><td class="line">                      result = (int32_t)<span class='macro'>uprv_strlen(nextSeparator)<span class='expansion'>:: strlen(nextSeparator)</span></span>; </td></tr>
<tr><td class="num" id="LN907">907</td><td class="line">                  }</td></tr>
<tr><td class="num" id="LN908">908</td><td class="line">              }</td></tr>
<tr><td class="num" id="LN909">909</td><td class="line">              <span class='keyword'>return</span> result;</td></tr>
<tr><td class="num" id="LN910">910</td><td class="line">          }</td></tr>
<tr><td class="num" id="LN911">911</td><td class="line">      }</td></tr>
<tr><td class="num" id="LN912">912</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN913">913</td><td class="line">    <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN914">914</td><td class="line">}</td></tr>
<tr><td class="num" id="LN915">915</td><td class="line"> </td></tr>
<tr><td class="num" id="LN916">916</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN917">917</td><td class="line"><span class='macro'>uloc_setKeywordValue<span class='expansion'>uloc_setKeywordValue_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* keywordName,</td></tr>
<tr><td class="num" id="LN918">918</td><td class="line">                     <span class='keyword'>const</span> <span class='keyword'>char</span>* keywordValue,</td></tr>
<tr><td class="num" id="LN919">919</td><td class="line">                     <span class='keyword'>char</span>* buffer, int32_t bufferCapacity,</td></tr>
<tr><td class="num" id="LN920">920</td><td class="line">                     UErrorCode* status)</td></tr>
<tr><td class="num" id="LN921">921</td><td class="line">{</td></tr>
<tr><td class="num" id="LN922">922</td><td class="line">    <span class='comment'>/* TODO: sorting. removal. */</span></td></tr>
<tr><td class="num" id="LN923">923</td><td class="line">    int32_t keywordNameLen;</td></tr>
<tr><td class="num" id="LN924">924</td><td class="line">    int32_t keywordValueLen;</td></tr>
<tr><td class="num" id="LN925">925</td><td class="line">    int32_t bufLen;</td></tr>
<tr><td class="num" id="LN926">926</td><td class="line">    int32_t needLen = 0;</td></tr>
<tr><td class="num" id="LN927">927</td><td class="line">    int32_t foundValueLen;</td></tr>
<tr><td class="num" id="LN928">928</td><td class="line">    int32_t keywordAtEnd = 0; <span class='comment'>/* is the keyword at the end of the string? */</span></td></tr>
<tr><td class="num" id="LN929">929</td><td class="line">    <span class='keyword'>char</span> keywordNameBuffer[<span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>];</td></tr>
<tr><td class="num" id="LN930">930</td><td class="line">    <span class='keyword'>char</span> localeKeywordNameBuffer[<span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>];</td></tr>
<tr><td class="num" id="LN931">931</td><td class="line">    int32_t i = 0;</td></tr>
<tr><td class="num" id="LN932">932</td><td class="line">    int32_t rc;</td></tr>
<tr><td class="num" id="LN933">933</td><td class="line">    <span class='keyword'>char</span>* nextSeparator = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN934">934</td><td class="line">    <span class='keyword'>char</span>* nextEqualsign = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN935">935</td><td class="line">    <span class='keyword'>char</span>* startSearchHere = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN936">936</td><td class="line">    <span class='keyword'>char</span>* keywordStart = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN937">937</td><td class="line">    <span class='keyword'>char</span> *insertHere = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN938">938</td><td class="line">    <span class='keyword'>if</span>(U_FAILURE(*status)) { </td></tr>
<tr><td class="num" id="LN939">939</td><td class="line">        <span class='keyword'>return</span> -1; </td></tr>
<tr><td class="num" id="LN940">940</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN941">941</td><td class="line">    <span class='keyword'>if</span>(bufferCapacity&gt;1) {</td></tr>
<tr><td class="num" id="LN942">942</td><td class="line">        bufLen = (int32_t)<span class='macro'>uprv_strlen(buffer)<span class='expansion'>:: strlen(buffer)</span></span>;</td></tr>
<tr><td class="num" id="LN943">943</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN944">944</td><td class="line">        *status = U_ILLEGAL_ARGUMENT_ERROR;</td></tr>
<tr><td class="num" id="LN945">945</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN946">946</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN947">947</td><td class="line">    <span class='keyword'>if</span>(bufferCapacity&lt;bufLen) {</td></tr>
<tr><td class="num" id="LN948">948</td><td class="line">        <span class='comment'>/* The capacity is less than the length?! Is this NULL terminated? */</span></td></tr>
<tr><td class="num" id="LN949">949</td><td class="line">        *status = U_ILLEGAL_ARGUMENT_ERROR;</td></tr>
<tr><td class="num" id="LN950">950</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN951">951</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN952">952</td><td class="line">    <span class='keyword'>if</span>(keywordValue &amp;&amp; !*keywordValue) { </td></tr>
<tr><td class="num" id="LN953">953</td><td class="line">        keywordValue = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN954">954</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN955">955</td><td class="line">    <span class='keyword'>if</span>(keywordValue) {</td></tr>
<tr><td class="num" id="LN956">956</td><td class="line">        keywordValueLen = (int32_t)<span class='macro'>uprv_strlen(keywordValue)<span class='expansion'>:: strlen(keywordValue)</span></span>;</td></tr>
<tr><td class="num" id="LN957">957</td><td class="line">    } <span class='keyword'>else</span> { </td></tr>
<tr><td class="num" id="LN958">958</td><td class="line">        keywordValueLen = 0;</td></tr>
<tr><td class="num" id="LN959">959</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN960">960</td><td class="line">    keywordNameLen = locale_canonKeywordName(keywordNameBuffer, keywordName, status);</td></tr>
<tr><td class="num" id="LN961">961</td><td class="line">    <span class='keyword'>if</span>(U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN962">962</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN963">963</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN964">964</td><td class="line">    startSearchHere = (<span class='keyword'>char</span>*)<span class='macro'>locale_getKeywordsStart<span class='expansion'>locale_getKeywordsStart_54</span></span>(buffer);</td></tr>
<tr><td class="num" id="LN965">965</td><td class="line">    <span class='keyword'>if</span>(startSearchHere == <span class='macro'>NULL<span class='expansion'>__null</span></span> || (startSearchHere[1]==0)) {</td></tr>
<tr><td class="num" id="LN966">966</td><td class="line">        <span class='keyword'>if</span>(!keywordValue) { <span class='comment'>/* no keywords = nothing to remove */</span></td></tr>
<tr><td class="num" id="LN967">967</td><td class="line">            <span class='keyword'>return</span> bufLen; </td></tr>
<tr><td class="num" id="LN968">968</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN969">969</td><td class="line"> </td></tr>
<tr><td class="num" id="LN970">970</td><td class="line">        needLen = bufLen+1+keywordNameLen+1+keywordValueLen;</td></tr>
<tr><td class="num" id="LN971">971</td><td class="line">        <span class='keyword'>if</span>(startSearchHere) { <span class='comment'>/* had a single @ */</span> </td></tr>
<tr><td class="num" id="LN972">972</td><td class="line">            needLen--; <span class='comment'>/* already had the @ */</span></td></tr>
<tr><td class="num" id="LN973">973</td><td class="line">            <span class='comment'>/* startSearchHere points at the @ */</span></td></tr>
<tr><td class="num" id="LN974">974</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN975">975</td><td class="line">            startSearchHere=buffer+bufLen;</td></tr>
<tr><td class="num" id="LN976">976</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN977">977</td><td class="line">        <span class='keyword'>if</span>(needLen &gt;= bufferCapacity) {</td></tr>
<tr><td class="num" id="LN978">978</td><td class="line">            *status = U_BUFFER_OVERFLOW_ERROR;</td></tr>
<tr><td class="num" id="LN979">979</td><td class="line">            <span class='keyword'>return</span> needLen; <span class='comment'>/* no change */</span></td></tr>
<tr><td class="num" id="LN980">980</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN981">981</td><td class="line">        *startSearchHere = '@';</td></tr>
<tr><td class="num" id="LN982">982</td><td class="line">        startSearchHere++;</td></tr>
<tr><td class="num" id="LN983">983</td><td class="line">        <span class='macro'>uprv_strcpy(startSearchHere, keywordNameBuffer)<span class='expansion'>:: strcpy(startSearchHere, keywordNameBuffer)</span></span>;</td></tr>
<tr><td class="num" id="LN984">984</td><td class="line">        startSearchHere += keywordNameLen;</td></tr>
<tr><td class="num" id="LN985">985</td><td class="line">        *startSearchHere = '=';</td></tr>
<tr><td class="num" id="LN986">986</td><td class="line">        startSearchHere++;</td></tr>
<tr><td class="num" id="LN987">987</td><td class="line">        <span class='macro'>uprv_strcpy(startSearchHere, keywordValue)<span class='expansion'>:: strcpy(startSearchHere, keywordValue)</span></span>;</td></tr>
<tr><td class="num" id="LN988">988</td><td class="line">        startSearchHere+=<span class="mrange">keywordValueLen</span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="EndPath" class="msg msgEvent" style="margin-left:9ex">Value stored to 'startSearchHere' is never read</div></td></tr>
<tr><td class="num" id="LN989">989</td><td class="line">        <span class='keyword'>return</span> needLen;</td></tr>
<tr><td class="num" id="LN990">990</td><td class="line">    } <span class='comment'>/* end shortcut - no @ */</span></td></tr>
<tr><td class="num" id="LN991">991</td><td class="line">    </td></tr>
<tr><td class="num" id="LN992">992</td><td class="line">    keywordStart = startSearchHere;</td></tr>
<tr><td class="num" id="LN993">993</td><td class="line">    <span class='comment'>/* search for keyword */</span></td></tr>
<tr><td class="num" id="LN994">994</td><td class="line">    <span class='keyword'>while</span>(keywordStart) {</td></tr>
<tr><td class="num" id="LN995">995</td><td class="line">        keywordStart++;</td></tr>
<tr><td class="num" id="LN996">996</td><td class="line">        <span class='comment'>/* skip leading spaces (allowed?) */</span></td></tr>
<tr><td class="num" id="LN997">997</td><td class="line">        <span class='keyword'>while</span>(*keywordStart == ' ') {</td></tr>
<tr><td class="num" id="LN998">998</td><td class="line">            keywordStart++;</td></tr>
<tr><td class="num" id="LN999">999</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1000">1000</td><td class="line">        nextEqualsign = <span class='macro'>uprv_strchr(keywordStart, '=')<span class='expansion'>:: strchr(keywordStart, '=')</span></span>;</td></tr>
<tr><td class="num" id="LN1001">1001</td><td class="line">        <span class='comment'>/* need to normalize both keyword and keyword name */</span></td></tr>
<tr><td class="num" id="LN1002">1002</td><td class="line">        <span class='keyword'>if</span>(!nextEqualsign) {</td></tr>
<tr><td class="num" id="LN1003">1003</td><td class="line">            <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1004">1004</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1005">1005</td><td class="line">        <span class='keyword'>if</span>(nextEqualsign - keywordStart &gt;= <span class='macro'>ULOC_KEYWORD_BUFFER_LEN<span class='expansion'>25</span></span>) {</td></tr>
<tr><td class="num" id="LN1006">1006</td><td class="line">            <span class='comment'>/* keyword name too long for internal buffer */</span></td></tr>
<tr><td class="num" id="LN1007">1007</td><td class="line">            *status = U_INTERNAL_PROGRAM_ERROR;</td></tr>
<tr><td class="num" id="LN1008">1008</td><td class="line">            <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1009">1009</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1010">1010</td><td class="line">        <span class='keyword'>for</span>(i = 0; i &lt; nextEqualsign - keywordStart; i++) {</td></tr>
<tr><td class="num" id="LN1011">1011</td><td class="line">            localeKeywordNameBuffer[i] = <span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(keywordStart[i]);</td></tr>
<tr><td class="num" id="LN1012">1012</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1013">1013</td><td class="line">        <span class='comment'>/* trim trailing spaces */</span></td></tr>
<tr><td class="num" id="LN1014">1014</td><td class="line">        <span class='keyword'>while</span>(keywordStart[i-1] == ' ') {</td></tr>
<tr><td class="num" id="LN1015">1015</td><td class="line">            i--;</td></tr>
<tr><td class="num" id="LN1016">1016</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1017">1017</td><td class="line">        U_ASSERT(i&gt;=0 &amp;&amp; i&lt;ULOC_KEYWORD_BUFFER_LEN);</td></tr>
<tr><td class="num" id="LN1018">1018</td><td class="line">        localeKeywordNameBuffer[i] = 0;</td></tr>
<tr><td class="num" id="LN1019">1019</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1020">1020</td><td class="line">        nextSeparator = <span class='macro'>uprv_strchr(nextEqualsign, ';')<span class='expansion'>:: strchr(nextEqualsign, ';')</span></span>;</td></tr>
<tr><td class="num" id="LN1021">1021</td><td class="line">        rc = <span class='macro'>uprv_strcmp(keywordNameBuffer, localeKeywordNameBuffer)<span class='expansion'>:: strcmp(keywordNameBuffer, localeKeywordNameBuffer)</span></span>;</td></tr>
<tr><td class="num" id="LN1022">1022</td><td class="line">        <span class='keyword'>if</span>(rc == 0) {</td></tr>
<tr><td class="num" id="LN1023">1023</td><td class="line">            nextEqualsign++;</td></tr>
<tr><td class="num" id="LN1024">1024</td><td class="line">            <span class='keyword'>while</span>(*nextEqualsign == ' ') {</td></tr>
<tr><td class="num" id="LN1025">1025</td><td class="line">                nextEqualsign++;</td></tr>
<tr><td class="num" id="LN1026">1026</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1027">1027</td><td class="line">            <span class='comment'>/* we actually found the keyword. Change the value */</span></td></tr>
<tr><td class="num" id="LN1028">1028</td><td class="line">            <span class='keyword'>if</span> (nextSeparator) {</td></tr>
<tr><td class="num" id="LN1029">1029</td><td class="line">                keywordAtEnd = 0;</td></tr>
<tr><td class="num" id="LN1030">1030</td><td class="line">                foundValueLen = (int32_t)(nextSeparator - nextEqualsign);</td></tr>
<tr><td class="num" id="LN1031">1031</td><td class="line">            } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1032">1032</td><td class="line">                keywordAtEnd = 1;</td></tr>
<tr><td class="num" id="LN1033">1033</td><td class="line">                foundValueLen = (int32_t)<span class='macro'>uprv_strlen(nextEqualsign)<span class='expansion'>:: strlen(nextEqualsign)</span></span>;</td></tr>
<tr><td class="num" id="LN1034">1034</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1035">1035</td><td class="line">            <span class='keyword'>if</span>(keywordValue) { <span class='comment'>/* adding a value - not removing */</span></td></tr>
<tr><td class="num" id="LN1036">1036</td><td class="line">              <span class='keyword'>if</span>(foundValueLen == keywordValueLen) {</td></tr>
<tr><td class="num" id="LN1037">1037</td><td class="line">                <span class='macro'>uprv_strncpy(nextEqualsign, keywordValue, keywordValueLen)<span class='expansion'>:: strncpy(nextEqualsign, keywordValue, keywordValueLen)</span></span>;</td></tr>
<tr><td class="num" id="LN1038">1038</td><td class="line">                <span class='keyword'>return</span> bufLen; <span class='comment'>/* no change in size */</span></td></tr>
<tr><td class="num" id="LN1039">1039</td><td class="line">              } <span class='keyword'>else</span> <span class='keyword'>if</span>(foundValueLen &gt; keywordValueLen) {</td></tr>
<tr><td class="num" id="LN1040">1040</td><td class="line">                int32_t delta = foundValueLen - keywordValueLen;</td></tr>
<tr><td class="num" id="LN1041">1041</td><td class="line">                <span class='keyword'>if</span>(nextSeparator) { <span class='comment'>/* RH side */</span></td></tr>
<tr><td class="num" id="LN1042">1042</td><td class="line">                  <span class='macro'>uprv_memmove(nextSeparator - delta, nextSeparator, bufLen-(nextSeparator-buffer))<span class='expansion'>:: memmove(nextSeparator - delta, nextSeparator, bufLen-(nextSeparator<br>-buffer))</span></span>;</td></tr>
<tr><td class="num" id="LN1043">1043</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1044">1044</td><td class="line">                <span class='macro'>uprv_strncpy(nextEqualsign, keywordValue, keywordValueLen)<span class='expansion'>:: strncpy(nextEqualsign, keywordValue, keywordValueLen)</span></span>;</td></tr>
<tr><td class="num" id="LN1045">1045</td><td class="line">                bufLen -= delta;</td></tr>
<tr><td class="num" id="LN1046">1046</td><td class="line">                buffer[bufLen]=0;</td></tr>
<tr><td class="num" id="LN1047">1047</td><td class="line">                <span class='keyword'>return</span> bufLen;</td></tr>
<tr><td class="num" id="LN1048">1048</td><td class="line">              } <span class='keyword'>else</span> { <span class='comment'>/* FVL &lt; KVL */</span></td></tr>
<tr><td class="num" id="LN1049">1049</td><td class="line">                int32_t delta = keywordValueLen - foundValueLen;</td></tr>
<tr><td class="num" id="LN1050">1050</td><td class="line">                <span class='keyword'>if</span>((bufLen+delta) &gt;= bufferCapacity) {</td></tr>
<tr><td class="num" id="LN1051">1051</td><td class="line">                  *status = U_BUFFER_OVERFLOW_ERROR;</td></tr>
<tr><td class="num" id="LN1052">1052</td><td class="line">                  <span class='keyword'>return</span> bufLen+delta;</td></tr>
<tr><td class="num" id="LN1053">1053</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1054">1054</td><td class="line">                <span class='keyword'>if</span>(nextSeparator) { <span class='comment'>/* RH side */</span></td></tr>
<tr><td class="num" id="LN1055">1055</td><td class="line">                  <span class='macro'>uprv_memmove(nextSeparator+delta,nextSeparator, bufLen-(nextSeparator-buffer))<span class='expansion'>:: memmove(nextSeparator+delta, nextSeparator, bufLen-(nextSeparator<br>-buffer))</span></span>;</td></tr>
<tr><td class="num" id="LN1056">1056</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1057">1057</td><td class="line">                <span class='macro'>uprv_strncpy(nextEqualsign, keywordValue, keywordValueLen)<span class='expansion'>:: strncpy(nextEqualsign, keywordValue, keywordValueLen)</span></span>;</td></tr>
<tr><td class="num" id="LN1058">1058</td><td class="line">                bufLen += delta;</td></tr>
<tr><td class="num" id="LN1059">1059</td><td class="line">                buffer[bufLen]=0;</td></tr>
<tr><td class="num" id="LN1060">1060</td><td class="line">                <span class='keyword'>return</span> bufLen;</td></tr>
<tr><td class="num" id="LN1061">1061</td><td class="line">              }</td></tr>
<tr><td class="num" id="LN1062">1062</td><td class="line">            } <span class='keyword'>else</span> { <span class='comment'>/* removing a keyword */</span></td></tr>
<tr><td class="num" id="LN1063">1063</td><td class="line">              <span class='keyword'>if</span>(keywordAtEnd) {</td></tr>
<tr><td class="num" id="LN1064">1064</td><td class="line">                <span class='comment'>/* zero out the ';' or '@' just before startSearchhere */</span></td></tr>
<tr><td class="num" id="LN1065">1065</td><td class="line">                keywordStart[-1] = 0;</td></tr>
<tr><td class="num" id="LN1066">1066</td><td class="line">                <span class='keyword'>return</span> (int32_t)((keywordStart-buffer)-1); <span class='comment'>/* (string length without keyword) minus separator */</span></td></tr>
<tr><td class="num" id="LN1067">1067</td><td class="line">              } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1068">1068</td><td class="line">                <span class='macro'>uprv_memmove(keywordStart, nextSeparator+1, bufLen-((nextSeparator+1)-buffer))<span class='expansion'>:: memmove(keywordStart, nextSeparator+1, bufLen-((nextSeparator<br>+1)-buffer))</span></span>;</td></tr>
<tr><td class="num" id="LN1069">1069</td><td class="line">                keywordStart[bufLen-((nextSeparator+1)-buffer)]=0;</td></tr>
<tr><td class="num" id="LN1070">1070</td><td class="line">                <span class='keyword'>return</span> (int32_t)(bufLen-((nextSeparator+1)-keywordStart));</td></tr>
<tr><td class="num" id="LN1071">1071</td><td class="line">              }</td></tr>
<tr><td class="num" id="LN1072">1072</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1073">1073</td><td class="line">        } <span class='keyword'>else</span> <span class='keyword'>if</span>(rc&lt;0){ <span class='comment'>/* end match keyword */</span></td></tr>
<tr><td class="num" id="LN1074">1074</td><td class="line">          <span class='comment'>/* could insert at this location. */</span></td></tr>
<tr><td class="num" id="LN1075">1075</td><td class="line">          insertHere = keywordStart;</td></tr>
<tr><td class="num" id="LN1076">1076</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1077">1077</td><td class="line">        keywordStart = nextSeparator;</td></tr>
<tr><td class="num" id="LN1078">1078</td><td class="line">    } <span class='comment'>/* end loop searching */</span></td></tr>
<tr><td class="num" id="LN1079">1079</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1080">1080</td><td class="line">    <span class='keyword'>if</span>(!keywordValue) {</td></tr>
<tr><td class="num" id="LN1081">1081</td><td class="line">      <span class='keyword'>return</span> bufLen; <span class='comment'>/* removal of non-extant keyword - no change */</span></td></tr>
<tr><td class="num" id="LN1082">1082</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1083">1083</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1084">1084</td><td class="line">    <span class='comment'>/* we know there is at least one keyword. */</span></td></tr>
<tr><td class="num" id="LN1085">1085</td><td class="line">    needLen = bufLen+1+keywordNameLen+1+keywordValueLen;</td></tr>
<tr><td class="num" id="LN1086">1086</td><td class="line">    <span class='keyword'>if</span>(needLen &gt;= bufferCapacity) {</td></tr>
<tr><td class="num" id="LN1087">1087</td><td class="line">        *status = U_BUFFER_OVERFLOW_ERROR;</td></tr>
<tr><td class="num" id="LN1088">1088</td><td class="line">        <span class='keyword'>return</span> needLen; <span class='comment'>/* no change */</span></td></tr>
<tr><td class="num" id="LN1089">1089</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1090">1090</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1091">1091</td><td class="line">    <span class='keyword'>if</span>(insertHere) {</td></tr>
<tr><td class="num" id="LN1092">1092</td><td class="line">      <span class='macro'>uprv_memmove(insertHere+(1+keywordNameLen+1+keywordValueLen), insertHere, bufLen-(insertHere-buffer))<span class='expansion'>:: memmove(insertHere+(1+keywordNameLen+1+keywordValueLen), insertHere<br>, bufLen-(insertHere-buffer))</span></span>;</td></tr>
<tr><td class="num" id="LN1093">1093</td><td class="line">      keywordStart = insertHere;</td></tr>
<tr><td class="num" id="LN1094">1094</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1095">1095</td><td class="line">      keywordStart = buffer+bufLen;</td></tr>
<tr><td class="num" id="LN1096">1096</td><td class="line">      *keywordStart = ';';</td></tr>
<tr><td class="num" id="LN1097">1097</td><td class="line">      keywordStart++;</td></tr>
<tr><td class="num" id="LN1098">1098</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1099">1099</td><td class="line">    <span class='macro'>uprv_strncpy(keywordStart, keywordNameBuffer, keywordNameLen)<span class='expansion'>:: strncpy(keywordStart, keywordNameBuffer, keywordNameLen)</span></span>;</td></tr>
<tr><td class="num" id="LN1100">1100</td><td class="line">    keywordStart += keywordNameLen;</td></tr>
<tr><td class="num" id="LN1101">1101</td><td class="line">    *keywordStart = '=';</td></tr>
<tr><td class="num" id="LN1102">1102</td><td class="line">    keywordStart++;</td></tr>
<tr><td class="num" id="LN1103">1103</td><td class="line">    <span class='macro'>uprv_strncpy(keywordStart, keywordValue, keywordValueLen)<span class='expansion'>:: strncpy(keywordStart, keywordValue, keywordValueLen)</span></span>; <span class='comment'>/* terminates. */</span></td></tr>
<tr><td class="num" id="LN1104">1104</td><td class="line">    keywordStart+=keywordValueLen;</td></tr>
<tr><td class="num" id="LN1105">1105</td><td class="line">    <span class='keyword'>if</span>(insertHere) {</td></tr>
<tr><td class="num" id="LN1106">1106</td><td class="line">      *keywordStart = ';';</td></tr>
<tr><td class="num" id="LN1107">1107</td><td class="line">      keywordStart++;</td></tr>
<tr><td class="num" id="LN1108">1108</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1109">1109</td><td class="line">    buffer[needLen]=0;</td></tr>
<tr><td class="num" id="LN1110">1110</td><td class="line">    <span class='keyword'>return</span> needLen;</td></tr>
<tr><td class="num" id="LN1111">1111</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1112">1112</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1113">1113</td><td class="line"><span class='comment'>/* ### ID parsing implementation **************************************************/</span></td></tr>
<tr><td class="num" id="LN1114">1114</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1115">1115</td><td class="line"><span class='directive'>#define <span class='macro'>_isPrefixLetter(a)<span class='expansion'>((a=='x')||(a=='X')||(a=='i')||(a=='I'))</span></span> ((a=='x')||(a=='X')||(a=='i')||(a=='I'))</span></td></tr>
<tr><td class="num" id="LN1116">1116</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1117">1117</td><td class="line"><span class='comment'>/*returns TRUE if one of the special prefixes is here (s=string)</span></td></tr>
<tr><td class="num" id="LN1118">1118</td><td class="line">  <span class='comment'>'x-' or 'i-' */</span></td></tr>
<tr><td class="num" id="LN1119">1119</td><td class="line"><span class='directive'>#define <span class='macro'>_isIDPrefix(s)<span class='expansion'>(((s[0]=='x')||(s[0]=='X')||(s[0]=='i')||(s[0]=='I'))&amp;&amp;<br>(s[1] == '_' || s[1] == '-'))</span></span> (<span class='macro'>_isPrefixLetter(s[0])<span class='expansion'>((s[0]=='x')||(s[0]=='X')||(s[0]=='i')||(s[0]=='I'))</span></span>&amp;&amp;<span class='macro'>_isIDSeparator(s[1])<span class='expansion'>(s[1] == '_' || s[1] == '-')</span></span>)</span></td></tr>
<tr><td class="num" id="LN1120">1120</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1121">1121</td><td class="line"><span class='comment'>/* Dot terminates it because of POSIX form  where dot precedes the codepage</span></td></tr>
<tr><td class="num" id="LN1122">1122</td><td class="line"> <span class='comment'>* except for variant</span></td></tr>
<tr><td class="num" id="LN1123">1123</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN1124">1124</td><td class="line"><span class='directive'>#define <span class='macro'>_isTerminator(a)<span class='expansion'>((a==0)||(a=='.')||(a=='@'))</span></span>  ((a==0)||(a=='.')||(a=='@'))</span></td></tr>
<tr><td class="num" id="LN1125">1125</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1126">1126</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>char</span>* _strnchr(<span class='keyword'>const</span> <span class='keyword'>char</span>* str, int32_t len, <span class='keyword'>char</span> c) {</td></tr>
<tr><td class="num" id="LN1127">1127</td><td class="line">    U_ASSERT(str != 0 &amp;&amp; len &gt;= 0);</td></tr>
<tr><td class="num" id="LN1128">1128</td><td class="line">    <span class='keyword'>while</span> (len-- != 0) {</td></tr>
<tr><td class="num" id="LN1129">1129</td><td class="line">        <span class='keyword'>char</span> d = *str;</td></tr>
<tr><td class="num" id="LN1130">1130</td><td class="line">        <span class='keyword'>if</span> (d == c) {</td></tr>
<tr><td class="num" id="LN1131">1131</td><td class="line">            <span class='keyword'>return</span> (<span class='keyword'>char</span>*) str;</td></tr>
<tr><td class="num" id="LN1132">1132</td><td class="line">        } <span class='keyword'>else</span> <span class='keyword'>if</span> (d == 0) {</td></tr>
<tr><td class="num" id="LN1133">1133</td><td class="line">            <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1134">1134</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1135">1135</td><td class="line">        ++str;</td></tr>
<tr><td class="num" id="LN1136">1136</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1137">1137</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1138">1138</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1139">1139</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1140">1140</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN1141">1141</td><td class="line"> <span class='comment'>* Lookup 'key' in the array 'list'.  The array 'list' should contain</span></td></tr>
<tr><td class="num" id="LN1142">1142</td><td class="line"> <span class='comment'>* a NULL entry, followed by more entries, and a second NULL entry.</span></td></tr>
<tr><td class="num" id="LN1143">1143</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN1144">1144</td><td class="line"> <span class='comment'>* The 'list' param should be LANGUAGES, LANGUAGES_3, COUNTRIES, or</span></td></tr>
<tr><td class="num" id="LN1145">1145</td><td class="line"> <span class='comment'>* COUNTRIES_3.</span></td></tr>
<tr><td class="num" id="LN1146">1146</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN1147">1147</td><td class="line"><span class='keyword'>static</span> int16_t _findIndex(<span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span>* list, <span class='keyword'>const</span> <span class='keyword'>char</span>* key)</td></tr>
<tr><td class="num" id="LN1148">1148</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1149">1149</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span>* anchor = list;</td></tr>
<tr><td class="num" id="LN1150">1150</td><td class="line">    int32_t pass = 0;</td></tr>
<tr><td class="num" id="LN1151">1151</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1152">1152</td><td class="line">    <span class='comment'>/* Make two passes through two NULL-terminated arrays at 'list' */</span></td></tr>
<tr><td class="num" id="LN1153">1153</td><td class="line">    <span class='keyword'>while</span> (pass++ &lt; 2) {</td></tr>
<tr><td class="num" id="LN1154">1154</td><td class="line">        <span class='keyword'>while</span> (*list) {</td></tr>
<tr><td class="num" id="LN1155">1155</td><td class="line">            <span class='keyword'>if</span> (<span class='macro'>uprv_strcmp(key, *list)<span class='expansion'>:: strcmp(key, *list)</span></span> == 0) {</td></tr>
<tr><td class="num" id="LN1156">1156</td><td class="line">                <span class='keyword'>return</span> (int16_t)(list - anchor);</td></tr>
<tr><td class="num" id="LN1157">1157</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1158">1158</td><td class="line">            list++;</td></tr>
<tr><td class="num" id="LN1159">1159</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1160">1160</td><td class="line">        ++list;     <span class='comment'>/* skip final NULL *CWB*/</span></td></tr>
<tr><td class="num" id="LN1161">1161</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1162">1162</td><td class="line">    <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN1163">1163</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1164">1164</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1165">1165</td><td class="line"><span class='comment'>/* count the length of src while copying it to dest; return strlen(src) */</span></td></tr>
<tr><td class="num" id="LN1166">1166</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>inline</span> int32_t</td></tr>
<tr><td class="num" id="LN1167">1167</td><td class="line">_copyCount(<span class='keyword'>char</span> *dest, int32_t destCapacity, <span class='keyword'>const</span> <span class='keyword'>char</span> *src) {</td></tr>
<tr><td class="num" id="LN1168">1168</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *anchor;</td></tr>
<tr><td class="num" id="LN1169">1169</td><td class="line">    <span class='keyword'>char</span> c;</td></tr>
<tr><td class="num" id="LN1170">1170</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1171">1171</td><td class="line">    anchor=src;</td></tr>
<tr><td class="num" id="LN1172">1172</td><td class="line">    <span class='keyword'>for</span>(;;) {</td></tr>
<tr><td class="num" id="LN1173">1173</td><td class="line">        <span class='keyword'>if</span>((c=*src)==0) {</td></tr>
<tr><td class="num" id="LN1174">1174</td><td class="line">            <span class='keyword'>return</span> (int32_t)(src-anchor);</td></tr>
<tr><td class="num" id="LN1175">1175</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1176">1176</td><td class="line">        <span class='keyword'>if</span>(destCapacity&lt;=0) {</td></tr>
<tr><td class="num" id="LN1177">1177</td><td class="line">            <span class='keyword'>return</span> (int32_t)((src-anchor)+<span class='macro'>uprv_strlen(src)<span class='expansion'>:: strlen(src)</span></span>);</td></tr>
<tr><td class="num" id="LN1178">1178</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1179">1179</td><td class="line">        ++src;</td></tr>
<tr><td class="num" id="LN1180">1180</td><td class="line">        *dest++=c;</td></tr>
<tr><td class="num" id="LN1181">1181</td><td class="line">        --destCapacity;</td></tr>
<tr><td class="num" id="LN1182">1182</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1183">1183</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1184">1184</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1185">1185</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* </td></tr>
<tr><td class="num" id="LN1186">1186</td><td class="line"><span class='macro'>uloc_getCurrentCountryID<span class='expansion'>uloc_getCurrentCountryID_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* oldID){</td></tr>
<tr><td class="num" id="LN1187">1187</td><td class="line">    int32_t offset = _findIndex(DEPRECATED_COUNTRIES, oldID);</td></tr>
<tr><td class="num" id="LN1188">1188</td><td class="line">    <span class='keyword'>if</span> (offset &gt;= 0) {</td></tr>
<tr><td class="num" id="LN1189">1189</td><td class="line">        <span class='keyword'>return</span> REPLACEMENT_COUNTRIES[offset];</td></tr>
<tr><td class="num" id="LN1190">1190</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1191">1191</td><td class="line">    <span class='keyword'>return</span> oldID;</td></tr>
<tr><td class="num" id="LN1192">1192</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1193">1193</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* </td></tr>
<tr><td class="num" id="LN1194">1194</td><td class="line"><span class='macro'>uloc_getCurrentLanguageID<span class='expansion'>uloc_getCurrentLanguageID_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* oldID){</td></tr>
<tr><td class="num" id="LN1195">1195</td><td class="line">    int32_t offset = _findIndex(DEPRECATED_LANGUAGES, oldID);</td></tr>
<tr><td class="num" id="LN1196">1196</td><td class="line">    <span class='keyword'>if</span> (offset &gt;= 0) {</td></tr>
<tr><td class="num" id="LN1197">1197</td><td class="line">        <span class='keyword'>return</span> REPLACEMENT_LANGUAGES[offset];</td></tr>
<tr><td class="num" id="LN1198">1198</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1199">1199</td><td class="line">    <span class='keyword'>return</span> oldID;        </td></tr>
<tr><td class="num" id="LN1200">1200</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1201">1201</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr><td class="num" id="LN1202">1202</td><td class="line"> <span class='comment'>* the internal functions _getLanguage(), _getCountry(), _getVariant()</span></td></tr>
<tr><td class="num" id="LN1203">1203</td><td class="line"> <span class='comment'>* avoid duplicating code to handle the earlier locale ID pieces</span></td></tr>
<tr><td class="num" id="LN1204">1204</td><td class="line"> <span class='comment'>* in the functions for the later ones by</span></td></tr>
<tr><td class="num" id="LN1205">1205</td><td class="line"> <span class='comment'>* setting the *pEnd pointer to where they stopped parsing</span></td></tr>
<tr><td class="num" id="LN1206">1206</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN1207">1207</td><td class="line"> <span class='comment'>* TODO try to use this in Locale</span></td></tr>
<tr><td class="num" id="LN1208">1208</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN1209">1209</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> int32_t</td></tr>
<tr><td class="num" id="LN1210">1210</td><td class="line"><span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN1211">1211</td><td class="line">                    <span class='keyword'>char</span> *language, int32_t languageCapacity,</td></tr>
<tr><td class="num" id="LN1212">1212</td><td class="line">                    <span class='keyword'>const</span> <span class='keyword'>char</span> **pEnd) {</td></tr>
<tr><td class="num" id="LN1213">1213</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1214">1214</td><td class="line">    int32_t offset;</td></tr>
<tr><td class="num" id="LN1215">1215</td><td class="line">    <span class='keyword'>char</span> lang[4]={ 0, 0, 0, 0 }; <span class='comment'>/* temporary buffer to hold language code for searching */</span></td></tr>
<tr><td class="num" id="LN1216">1216</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1217">1217</td><td class="line">    <span class='comment'>/* if it starts with i- or x- then copy that prefix */</span></td></tr>
<tr><td class="num" id="LN1218">1218</td><td class="line">    <span class='keyword'>if</span>(<span class='macro'>_isIDPrefix(localeID)<span class='expansion'>(((localeID[0]=='x')||(localeID[0]=='X')||(localeID[0]=='i')||<br>(localeID[0]=='I'))&amp;&amp;(localeID[1] == '_' || localeID[<br>1] == '-'))</span></span>) {</td></tr>
<tr><td class="num" id="LN1219">1219</td><td class="line">        <span class='keyword'>if</span>(i&lt;languageCapacity) {</td></tr>
<tr><td class="num" id="LN1220">1220</td><td class="line">            language[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(*localeID);</td></tr>
<tr><td class="num" id="LN1221">1221</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1222">1222</td><td class="line">        <span class='keyword'>if</span>(i&lt;languageCapacity) {</td></tr>
<tr><td class="num" id="LN1223">1223</td><td class="line">            language[i+1]='-';</td></tr>
<tr><td class="num" id="LN1224">1224</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1225">1225</td><td class="line">        i+=2;</td></tr>
<tr><td class="num" id="LN1226">1226</td><td class="line">        localeID+=2;</td></tr>
<tr><td class="num" id="LN1227">1227</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1228">1228</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1229">1229</td><td class="line">    <span class='comment'>/* copy the language as far as possible and count its length */</span></td></tr>
<tr><td class="num" id="LN1230">1230</td><td class="line">    <span class='keyword'>while</span>(!<span class='macro'>_isTerminator(*localeID)<span class='expansion'>((*localeID==0)||(*localeID=='.')||(*localeID=='@'))</span></span> &amp;&amp; !<span class='macro'>_isIDSeparator(*localeID)<span class='expansion'>(*localeID == '_' || *localeID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1231">1231</td><td class="line">        <span class='keyword'>if</span>(i&lt;languageCapacity) {</td></tr>
<tr><td class="num" id="LN1232">1232</td><td class="line">            language[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(*localeID);</td></tr>
<tr><td class="num" id="LN1233">1233</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1234">1234</td><td class="line">        <span class='keyword'>if</span>(i&lt;3) {</td></tr>
<tr><td class="num" id="LN1235">1235</td><td class="line">            U_ASSERT(i&gt;=0);</td></tr>
<tr><td class="num" id="LN1236">1236</td><td class="line">            lang[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(*localeID);</td></tr>
<tr><td class="num" id="LN1237">1237</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1238">1238</td><td class="line">        i++;</td></tr>
<tr><td class="num" id="LN1239">1239</td><td class="line">        localeID++;</td></tr>
<tr><td class="num" id="LN1240">1240</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1241">1241</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1242">1242</td><td class="line">    <span class='keyword'>if</span>(i==3) {</td></tr>
<tr><td class="num" id="LN1243">1243</td><td class="line">        <span class='comment'>/* convert 3 character code to 2 character code if possible *CWB*/</span></td></tr>
<tr><td class="num" id="LN1244">1244</td><td class="line">        offset=_findIndex(LANGUAGES_3, lang);</td></tr>
<tr><td class="num" id="LN1245">1245</td><td class="line">        <span class='keyword'>if</span>(offset&gt;=0) {</td></tr>
<tr><td class="num" id="LN1246">1246</td><td class="line">            i=_copyCount(language, languageCapacity, LANGUAGES[offset]);</td></tr>
<tr><td class="num" id="LN1247">1247</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1248">1248</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1249">1249</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1250">1250</td><td class="line">    <span class='keyword'>if</span>(pEnd!=<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1251">1251</td><td class="line">        *pEnd=localeID;</td></tr>
<tr><td class="num" id="LN1252">1252</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1253">1253</td><td class="line">    <span class='keyword'>return</span> i;</td></tr>
<tr><td class="num" id="LN1254">1254</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1255">1255</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1256">1256</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> int32_t</td></tr>
<tr><td class="num" id="LN1257">1257</td><td class="line"><span class='macro'>ulocimp_getScript<span class='expansion'>ulocimp_getScript_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN1258">1258</td><td class="line">                  <span class='keyword'>char</span> *script, int32_t scriptCapacity,</td></tr>
<tr><td class="num" id="LN1259">1259</td><td class="line">                  <span class='keyword'>const</span> <span class='keyword'>char</span> **pEnd)</td></tr>
<tr><td class="num" id="LN1260">1260</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1261">1261</td><td class="line">    int32_t idLen = 0;</td></tr>
<tr><td class="num" id="LN1262">1262</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1263">1263</td><td class="line">    <span class='keyword'>if</span> (pEnd != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1264">1264</td><td class="line">        *pEnd = localeID;</td></tr>
<tr><td class="num" id="LN1265">1265</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1266">1266</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1267">1267</td><td class="line">    <span class='comment'>/* copy the second item as far as possible and count its length */</span></td></tr>
<tr><td class="num" id="LN1268">1268</td><td class="line">    <span class='keyword'>while</span>(!<span class='macro'>_isTerminator(localeID[idLen])<span class='expansion'>((localeID[idLen]==0)||(localeID[idLen]=='.')||(localeID[idLen<br>]=='@'))</span></span> &amp;&amp; !<span class='macro'>_isIDSeparator(localeID[idLen])<span class='expansion'>(localeID[idLen] == '_' || localeID[idLen] == '-')</span></span></td></tr>
<tr><td class="num" id="LN1269">1269</td><td class="line">            &amp;&amp; <span class='macro'>uprv_isASCIILetter<span class='expansion'>uprv_isASCIILetter_54</span></span>(localeID[idLen])) {</td></tr>
<tr><td class="num" id="LN1270">1270</td><td class="line">        idLen++;</td></tr>
<tr><td class="num" id="LN1271">1271</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1272">1272</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1273">1273</td><td class="line">    <span class='comment'>/* If it's exactly 4 characters long, then it's a script and not a country. */</span></td></tr>
<tr><td class="num" id="LN1274">1274</td><td class="line">    <span class='keyword'>if</span> (idLen == 4) {</td></tr>
<tr><td class="num" id="LN1275">1275</td><td class="line">        int32_t i;</td></tr>
<tr><td class="num" id="LN1276">1276</td><td class="line">        <span class='keyword'>if</span> (pEnd != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1277">1277</td><td class="line">            *pEnd = localeID+idLen;</td></tr>
<tr><td class="num" id="LN1278">1278</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1279">1279</td><td class="line">        <span class='keyword'>if</span>(idLen &gt; scriptCapacity) {</td></tr>
<tr><td class="num" id="LN1280">1280</td><td class="line">            idLen = scriptCapacity;</td></tr>
<tr><td class="num" id="LN1281">1281</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1282">1282</td><td class="line">        <span class='keyword'>if</span> (idLen &gt;= 1) {</td></tr>
<tr><td class="num" id="LN1283">1283</td><td class="line">            script[0]=(<span class='keyword'>char</span>)<span class='macro'>uprv_toupper<span class='expansion'>uprv_toupper_54</span></span>(*(localeID++));</td></tr>
<tr><td class="num" id="LN1284">1284</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1285">1285</td><td class="line">        <span class='keyword'>for</span> (i = 1; i &lt; idLen; i++) {</td></tr>
<tr><td class="num" id="LN1286">1286</td><td class="line">            script[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_tolower<span class='expansion'>uprv_asciitolower_54</span></span>(*(localeID++));</td></tr>
<tr><td class="num" id="LN1287">1287</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1288">1288</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1289">1289</td><td class="line">    <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1290">1290</td><td class="line">        idLen = 0;</td></tr>
<tr><td class="num" id="LN1291">1291</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1292">1292</td><td class="line">    <span class='keyword'>return</span> idLen;</td></tr>
<tr><td class="num" id="LN1293">1293</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1294">1294</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1295">1295</td><td class="line"><span class='macro'>U_CFUNC<span class='expansion'>extern "C"</span></span> int32_t</td></tr>
<tr><td class="num" id="LN1296">1296</td><td class="line"><span class='macro'>ulocimp_getCountry<span class='expansion'>ulocimp_getCountry_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN1297">1297</td><td class="line">                   <span class='keyword'>char</span> *country, int32_t countryCapacity,</td></tr>
<tr><td class="num" id="LN1298">1298</td><td class="line">                   <span class='keyword'>const</span> <span class='keyword'>char</span> **pEnd)</td></tr>
<tr><td class="num" id="LN1299">1299</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1300">1300</td><td class="line">    int32_t idLen=0;</td></tr>
<tr><td class="num" id="LN1301">1301</td><td class="line">    <span class='keyword'>char</span> cnty[<span class='macro'>ULOC_COUNTRY_CAPACITY<span class='expansion'>4</span></span>]={ 0, 0, 0, 0 };</td></tr>
<tr><td class="num" id="LN1302">1302</td><td class="line">    int32_t offset;</td></tr>
<tr><td class="num" id="LN1303">1303</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1304">1304</td><td class="line">    <span class='comment'>/* copy the country as far as possible and count its length */</span></td></tr>
<tr><td class="num" id="LN1305">1305</td><td class="line">    <span class='keyword'>while</span>(!<span class='macro'>_isTerminator(localeID[idLen])<span class='expansion'>((localeID[idLen]==0)||(localeID[idLen]=='.')||(localeID[idLen<br>]=='@'))</span></span> &amp;&amp; !<span class='macro'>_isIDSeparator(localeID[idLen])<span class='expansion'>(localeID[idLen] == '_' || localeID[idLen] == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1306">1306</td><td class="line">        <span class='keyword'>if</span>(idLen&lt;(<span class='macro'>ULOC_COUNTRY_CAPACITY<span class='expansion'>4</span></span>-1)) {   <span class='comment'>/*CWB*/</span></td></tr>
<tr><td class="num" id="LN1307">1307</td><td class="line">            cnty[idLen]=(<span class='keyword'>char</span>)<span class='macro'>uprv_toupper<span class='expansion'>uprv_toupper_54</span></span>(localeID[idLen]);</td></tr>
<tr><td class="num" id="LN1308">1308</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1309">1309</td><td class="line">        idLen++;</td></tr>
<tr><td class="num" id="LN1310">1310</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1311">1311</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1312">1312</td><td class="line">    <span class='comment'>/* the country should be either length 2 or 3 */</span></td></tr>
<tr><td class="num" id="LN1313">1313</td><td class="line">    <span class='keyword'>if</span> (idLen == 2 || idLen == 3) {</td></tr>
<tr><td class="num" id="LN1314">1314</td><td class="line">        UBool gotCountry = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN1315">1315</td><td class="line">        <span class='comment'>/* convert 3 character code to 2 character code if possible *CWB*/</span></td></tr>
<tr><td class="num" id="LN1316">1316</td><td class="line">        <span class='keyword'>if</span>(idLen==3) {</td></tr>
<tr><td class="num" id="LN1317">1317</td><td class="line">            offset=_findIndex(COUNTRIES_3, cnty);</td></tr>
<tr><td class="num" id="LN1318">1318</td><td class="line">            <span class='keyword'>if</span>(offset&gt;=0) {</td></tr>
<tr><td class="num" id="LN1319">1319</td><td class="line">                idLen=_copyCount(country, countryCapacity, COUNTRIES[offset]);</td></tr>
<tr><td class="num" id="LN1320">1320</td><td class="line">                gotCountry = <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN1321">1321</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1322">1322</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1323">1323</td><td class="line">        <span class='keyword'>if</span> (!gotCountry) {</td></tr>
<tr><td class="num" id="LN1324">1324</td><td class="line">            int32_t i = 0;</td></tr>
<tr><td class="num" id="LN1325">1325</td><td class="line">            <span class='keyword'>for</span> (i = 0; i &lt; idLen; i++) {</td></tr>
<tr><td class="num" id="LN1326">1326</td><td class="line">                <span class='keyword'>if</span> (i &lt; countryCapacity) {</td></tr>
<tr><td class="num" id="LN1327">1327</td><td class="line">                    country[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_toupper<span class='expansion'>uprv_toupper_54</span></span>(localeID[i]);</td></tr>
<tr><td class="num" id="LN1328">1328</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1329">1329</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1330">1330</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1331">1331</td><td class="line">        localeID+=idLen;</td></tr>
<tr><td class="num" id="LN1332">1332</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1333">1333</td><td class="line">        idLen = 0;</td></tr>
<tr><td class="num" id="LN1334">1334</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1335">1335</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1336">1336</td><td class="line">    <span class='keyword'>if</span>(pEnd!=<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1337">1337</td><td class="line">        *pEnd=localeID;</td></tr>
<tr><td class="num" id="LN1338">1338</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1339">1339</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1340">1340</td><td class="line">    <span class='keyword'>return</span> idLen;</td></tr>
<tr><td class="num" id="LN1341">1341</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1342">1342</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1343">1343</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN1344">1344</td><td class="line"> <span class='comment'>* @param needSeparator if true, then add leading '_' if any variants</span></td></tr>
<tr><td class="num" id="LN1345">1345</td><td class="line"> <span class='comment'>* are added to 'variant'</span></td></tr>
<tr><td class="num" id="LN1346">1346</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN1347">1347</td><td class="line"><span class='keyword'>static</span> int32_t</td></tr>
<tr><td class="num" id="LN1348">1348</td><td class="line">_getVariantEx(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN1349">1349</td><td class="line">              <span class='keyword'>char</span> prev,</td></tr>
<tr><td class="num" id="LN1350">1350</td><td class="line">              <span class='keyword'>char</span> *variant, int32_t variantCapacity,</td></tr>
<tr><td class="num" id="LN1351">1351</td><td class="line">              UBool needSeparator) {</td></tr>
<tr><td class="num" id="LN1352">1352</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1353">1353</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1354">1354</td><td class="line">    <span class='comment'>/* get one or more variant tags and separate them with '_' */</span></td></tr>
<tr><td class="num" id="LN1355">1355</td><td class="line">    <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(prev)<span class='expansion'>(prev == '_' || prev == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1356">1356</td><td class="line">        <span class='comment'>/* get a variant string after a '-' or '_' */</span></td></tr>
<tr><td class="num" id="LN1357">1357</td><td class="line">        <span class='keyword'>while</span>(!<span class='macro'>_isTerminator(*localeID)<span class='expansion'>((*localeID==0)||(*localeID=='.')||(*localeID=='@'))</span></span>) {</td></tr>
<tr><td class="num" id="LN1358">1358</td><td class="line">            <span class='keyword'>if</span> (needSeparator) {</td></tr>
<tr><td class="num" id="LN1359">1359</td><td class="line">                <span class='keyword'>if</span> (i&lt;variantCapacity) {</td></tr>
<tr><td class="num" id="LN1360">1360</td><td class="line">                    variant[i] = '_';</td></tr>
<tr><td class="num" id="LN1361">1361</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1362">1362</td><td class="line">                ++i;</td></tr>
<tr><td class="num" id="LN1363">1363</td><td class="line">                needSeparator = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN1364">1364</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1365">1365</td><td class="line">            <span class='keyword'>if</span>(i&lt;variantCapacity) {</td></tr>
<tr><td class="num" id="LN1366">1366</td><td class="line">                variant[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_toupper<span class='expansion'>uprv_toupper_54</span></span>(*localeID);</td></tr>
<tr><td class="num" id="LN1367">1367</td><td class="line">                <span class='keyword'>if</span>(variant[i]=='-') {</td></tr>
<tr><td class="num" id="LN1368">1368</td><td class="line">                    variant[i]='_';</td></tr>
<tr><td class="num" id="LN1369">1369</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1370">1370</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1371">1371</td><td class="line">            i++;</td></tr>
<tr><td class="num" id="LN1372">1372</td><td class="line">            localeID++;</td></tr>
<tr><td class="num" id="LN1373">1373</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1374">1374</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1375">1375</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1376">1376</td><td class="line">    <span class='comment'>/* if there is no variant tag after a '-' or '_' then look for '@' */</span></td></tr>
<tr><td class="num" id="LN1377">1377</td><td class="line">    <span class='keyword'>if</span>(i==0) {</td></tr>
<tr><td class="num" id="LN1378">1378</td><td class="line">        <span class='keyword'>if</span>(prev=='@') {</td></tr>
<tr><td class="num" id="LN1379">1379</td><td class="line">            <span class='comment'>/* keep localeID */</span></td></tr>
<tr><td class="num" id="LN1380">1380</td><td class="line">        } <span class='keyword'>else</span> <span class='keyword'>if</span>((localeID=<span class='macro'>locale_getKeywordsStart<span class='expansion'>locale_getKeywordsStart_54</span></span>(localeID))!=<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1381">1381</td><td class="line">            ++localeID; <span class='comment'>/* point after the '@' */</span></td></tr>
<tr><td class="num" id="LN1382">1382</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1383">1383</td><td class="line">            <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1384">1384</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1385">1385</td><td class="line">        <span class='keyword'>while</span>(!<span class='macro'>_isTerminator(*localeID)<span class='expansion'>((*localeID==0)||(*localeID=='.')||(*localeID=='@'))</span></span>) {</td></tr>
<tr><td class="num" id="LN1386">1386</td><td class="line">            <span class='keyword'>if</span> (needSeparator) {</td></tr>
<tr><td class="num" id="LN1387">1387</td><td class="line">                <span class='keyword'>if</span> (i&lt;variantCapacity) {</td></tr>
<tr><td class="num" id="LN1388">1388</td><td class="line">                    variant[i] = '_';</td></tr>
<tr><td class="num" id="LN1389">1389</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1390">1390</td><td class="line">                ++i;</td></tr>
<tr><td class="num" id="LN1391">1391</td><td class="line">                needSeparator = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN1392">1392</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1393">1393</td><td class="line">            <span class='keyword'>if</span>(i&lt;variantCapacity) {</td></tr>
<tr><td class="num" id="LN1394">1394</td><td class="line">                variant[i]=(<span class='keyword'>char</span>)<span class='macro'>uprv_toupper<span class='expansion'>uprv_toupper_54</span></span>(*localeID);</td></tr>
<tr><td class="num" id="LN1395">1395</td><td class="line">                <span class='keyword'>if</span>(variant[i]=='-' || variant[i]==',') {</td></tr>
<tr><td class="num" id="LN1396">1396</td><td class="line">                    variant[i]='_';</td></tr>
<tr><td class="num" id="LN1397">1397</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1398">1398</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1399">1399</td><td class="line">            i++;</td></tr>
<tr><td class="num" id="LN1400">1400</td><td class="line">            localeID++;</td></tr>
<tr><td class="num" id="LN1401">1401</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1402">1402</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1403">1403</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1404">1404</td><td class="line">    <span class='keyword'>return</span> i;</td></tr>
<tr><td class="num" id="LN1405">1405</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1406">1406</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1407">1407</td><td class="line"><span class='keyword'>static</span> int32_t</td></tr>
<tr><td class="num" id="LN1408">1408</td><td class="line">_getVariant(<span class='keyword'>const</span> <span class='keyword'>char</span> *localeID,</td></tr>
<tr><td class="num" id="LN1409">1409</td><td class="line">            <span class='keyword'>char</span> prev,</td></tr>
<tr><td class="num" id="LN1410">1410</td><td class="line">            <span class='keyword'>char</span> *variant, int32_t variantCapacity) {</td></tr>
<tr><td class="num" id="LN1411">1411</td><td class="line">    <span class='keyword'>return</span> _getVariantEx(localeID, prev, variant, variantCapacity, <span class='macro'>FALSE<span class='expansion'>0</span></span>);</td></tr>
<tr><td class="num" id="LN1412">1412</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1413">1413</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1414">1414</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN1415">1415</td><td class="line"> <span class='comment'>* Delete ALL instances of a variant from the given list of one or</span></td></tr>
<tr><td class="num" id="LN1416">1416</td><td class="line"> <span class='comment'>* more variants.  Example: "FOO_EURO_BAR_EURO" =&gt; "FOO_BAR".</span></td></tr>
<tr><td class="num" id="LN1417">1417</td><td class="line"> <span class='comment'>* @param variants the source string of one or more variants,</span></td></tr>
<tr><td class="num" id="LN1418">1418</td><td class="line"> <span class='comment'>* separated by '_'.  This will be MODIFIED IN PLACE.  Not zero</span></td></tr>
<tr><td class="num" id="LN1419">1419</td><td class="line"> <span class='comment'>* terminated; if it is, trailing zero will NOT be maintained.</span></td></tr>
<tr><td class="num" id="LN1420">1420</td><td class="line"> <span class='comment'>* @param variantsLen length of variants</span></td></tr>
<tr><td class="num" id="LN1421">1421</td><td class="line"> <span class='comment'>* @param toDelete variant to delete, without separators, e.g.  "EURO"</span></td></tr>
<tr><td class="num" id="LN1422">1422</td><td class="line"> <span class='comment'>* or "PREEURO"; not zero terminated</span></td></tr>
<tr><td class="num" id="LN1423">1423</td><td class="line"> <span class='comment'>* @param toDeleteLen length of toDelete</span></td></tr>
<tr><td class="num" id="LN1424">1424</td><td class="line"> <span class='comment'>* @return number of characters deleted from variants</span></td></tr>
<tr><td class="num" id="LN1425">1425</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN1426">1426</td><td class="line"><span class='keyword'>static</span> int32_t</td></tr>
<tr><td class="num" id="LN1427">1427</td><td class="line">_deleteVariant(<span class='keyword'>char</span>* variants, int32_t variantsLen,</td></tr>
<tr><td class="num" id="LN1428">1428</td><td class="line">               <span class='keyword'>const</span> <span class='keyword'>char</span>* toDelete, int32_t toDeleteLen)</td></tr>
<tr><td class="num" id="LN1429">1429</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1430">1430</td><td class="line">    int32_t delta = 0; <span class='comment'>/* number of chars deleted */</span></td></tr>
<tr><td class="num" id="LN1431">1431</td><td class="line">    <span class='keyword'>for</span> (;;) {</td></tr>
<tr><td class="num" id="LN1432">1432</td><td class="line">        UBool flag = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN1433">1433</td><td class="line">        <span class='keyword'>if</span> (variantsLen &lt; toDeleteLen) {</td></tr>
<tr><td class="num" id="LN1434">1434</td><td class="line">            <span class='keyword'>return</span> delta;</td></tr>
<tr><td class="num" id="LN1435">1435</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1436">1436</td><td class="line">        <span class='keyword'>if</span> (<span class='macro'>uprv_strncmp(variants, toDelete, toDeleteLen)<span class='expansion'>:: strncmp(variants, toDelete, toDeleteLen)</span></span> == 0 &amp;&amp;</td></tr>
<tr><td class="num" id="LN1437">1437</td><td class="line">            (variantsLen == toDeleteLen ||</td></tr>
<tr><td class="num" id="LN1438">1438</td><td class="line">             (flag=(variants[toDeleteLen] == '_'))))</td></tr>
<tr><td class="num" id="LN1439">1439</td><td class="line">        {</td></tr>
<tr><td class="num" id="LN1440">1440</td><td class="line">            int32_t d = toDeleteLen + (flag?1:0);</td></tr>
<tr><td class="num" id="LN1441">1441</td><td class="line">            variantsLen -= d;</td></tr>
<tr><td class="num" id="LN1442">1442</td><td class="line">            delta += d;</td></tr>
<tr><td class="num" id="LN1443">1443</td><td class="line">            <span class='keyword'>if</span> (variantsLen &gt; 0) {</td></tr>
<tr><td class="num" id="LN1444">1444</td><td class="line">                <span class='macro'>uprv_memmove(variants, variants+d, variantsLen)<span class='expansion'>:: memmove(variants, variants+d, variantsLen)</span></span>;</td></tr>
<tr><td class="num" id="LN1445">1445</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1446">1446</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1447">1447</td><td class="line">            <span class='keyword'>char</span>* p = _strnchr(variants, variantsLen, '_');</td></tr>
<tr><td class="num" id="LN1448">1448</td><td class="line">            <span class='keyword'>if</span> (p == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1449">1449</td><td class="line">                <span class='keyword'>return</span> delta;</td></tr>
<tr><td class="num" id="LN1450">1450</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1451">1451</td><td class="line">            ++p;</td></tr>
<tr><td class="num" id="LN1452">1452</td><td class="line">            variantsLen -= (int32_t)(p - variants);</td></tr>
<tr><td class="num" id="LN1453">1453</td><td class="line">            variants = p;</td></tr>
<tr><td class="num" id="LN1454">1454</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1455">1455</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1456">1456</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1457">1457</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1458">1458</td><td class="line"><span class='comment'>/* Keyword enumeration */</span></td></tr>
<tr><td class="num" id="LN1459">1459</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1460">1460</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>struct</span> UKeywordsContext {</td></tr>
<tr><td class="num" id="LN1461">1461</td><td class="line">    <span class='keyword'>char</span>* keywords;</td></tr>
<tr><td class="num" id="LN1462">1462</td><td class="line">    <span class='keyword'>char</span>* current;</td></tr>
<tr><td class="num" id="LN1463">1463</td><td class="line">} UKeywordsContext;</td></tr>
<tr><td class="num" id="LN1464">1464</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1465">1465</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> U_CALLCONV</td></tr>
<tr><td class="num" id="LN1466">1466</td><td class="line">uloc_kw_closeKeywords(UEnumeration *enumerator) {</td></tr>
<tr><td class="num" id="LN1467">1467</td><td class="line">    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(((UKeywordsContext *)enumerator-&gt;context)-&gt;keywords);</td></tr>
<tr><td class="num" id="LN1468">1468</td><td class="line">    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(enumerator-&gt;context);</td></tr>
<tr><td class="num" id="LN1469">1469</td><td class="line">    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(enumerator);</td></tr>
<tr><td class="num" id="LN1470">1470</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1471">1471</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1472">1472</td><td class="line"><span class='keyword'>static</span> int32_t U_CALLCONV</td></tr>
<tr><td class="num" id="LN1473">1473</td><td class="line">uloc_kw_countKeywords(UEnumeration *en, UErrorCode * <span class='comment'>/*status*/</span>) {</td></tr>
<tr><td class="num" id="LN1474">1474</td><td class="line">    <span class='keyword'>char</span> *kw = ((UKeywordsContext *)en-&gt;context)-&gt;keywords;</td></tr>
<tr><td class="num" id="LN1475">1475</td><td class="line">    int32_t result = 0;</td></tr>
<tr><td class="num" id="LN1476">1476</td><td class="line">    <span class='keyword'>while</span>(*kw) {</td></tr>
<tr><td class="num" id="LN1477">1477</td><td class="line">        result++;</td></tr>
<tr><td class="num" id="LN1478">1478</td><td class="line">        kw += <span class='macro'>uprv_strlen(kw)<span class='expansion'>:: strlen(kw)</span></span>+1;</td></tr>
<tr><td class="num" id="LN1479">1479</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1480">1480</td><td class="line">    <span class='keyword'>return</span> result;</td></tr>
<tr><td class="num" id="LN1481">1481</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1482">1482</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1483">1483</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span>* U_CALLCONV </td></tr>
<tr><td class="num" id="LN1484">1484</td><td class="line">uloc_kw_nextKeyword(UEnumeration* en,</td></tr>
<tr><td class="num" id="LN1485">1485</td><td class="line">                    int32_t* resultLength,</td></tr>
<tr><td class="num" id="LN1486">1486</td><td class="line">                    UErrorCode* <span class='comment'>/*status*/</span>) {</td></tr>
<tr><td class="num" id="LN1487">1487</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* result = ((UKeywordsContext *)en-&gt;context)-&gt;current;</td></tr>
<tr><td class="num" id="LN1488">1488</td><td class="line">    int32_t len = 0;</td></tr>
<tr><td class="num" id="LN1489">1489</td><td class="line">    <span class='keyword'>if</span>(*result) {</td></tr>
<tr><td class="num" id="LN1490">1490</td><td class="line">        len = (int32_t)<span class='macro'>uprv_strlen(((UKeywordsContext *)en-&gt;context)-&gt;current)<span class='expansion'>:: strlen(((UKeywordsContext *)en-&gt;context)-&gt;current)</span></span>;</td></tr>
<tr><td class="num" id="LN1491">1491</td><td class="line">        ((UKeywordsContext *)en-&gt;context)-&gt;current += len+1;</td></tr>
<tr><td class="num" id="LN1492">1492</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1493">1493</td><td class="line">        result = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1494">1494</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1495">1495</td><td class="line">    <span class='keyword'>if</span> (resultLength) {</td></tr>
<tr><td class="num" id="LN1496">1496</td><td class="line">        *resultLength = len;</td></tr>
<tr><td class="num" id="LN1497">1497</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1498">1498</td><td class="line">    <span class='keyword'>return</span> result;</td></tr>
<tr><td class="num" id="LN1499">1499</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1500">1500</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1501">1501</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> U_CALLCONV </td></tr>
<tr><td class="num" id="LN1502">1502</td><td class="line">uloc_kw_resetKeywords(UEnumeration* en, </td></tr>
<tr><td class="num" id="LN1503">1503</td><td class="line">                      UErrorCode* <span class='comment'>/*status*/</span>) {</td></tr>
<tr><td class="num" id="LN1504">1504</td><td class="line">    ((UKeywordsContext *)en-&gt;context)-&gt;current = ((UKeywordsContext *)en-&gt;context)-&gt;keywords;</td></tr>
<tr><td class="num" id="LN1505">1505</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1506">1506</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1507">1507</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> UEnumeration gKeywordsEnum = {</td></tr>
<tr><td class="num" id="LN1508">1508</td><td class="line">    <span class='macro'>NULL<span class='expansion'>__null</span></span>,</td></tr>
<tr><td class="num" id="LN1509">1509</td><td class="line">    <span class='macro'>NULL<span class='expansion'>__null</span></span>,</td></tr>
<tr><td class="num" id="LN1510">1510</td><td class="line">    uloc_kw_closeKeywords,</td></tr>
<tr><td class="num" id="LN1511">1511</td><td class="line">    uloc_kw_countKeywords,</td></tr>
<tr><td class="num" id="LN1512">1512</td><td class="line">    <span class='macro'>uenum_unextDefault<span class='expansion'>uenum_unextDefault_54</span></span>,</td></tr>
<tr><td class="num" id="LN1513">1513</td><td class="line">    uloc_kw_nextKeyword,</td></tr>
<tr><td class="num" id="LN1514">1514</td><td class="line">    uloc_kw_resetKeywords</td></tr>
<tr><td class="num" id="LN1515">1515</td><td class="line">};</td></tr>
<tr><td class="num" id="LN1516">1516</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1517">1517</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> UEnumeration* U_EXPORT2</td></tr>
<tr><td class="num" id="LN1518">1518</td><td class="line"><span class='macro'>uloc_openKeywordList<span class='expansion'>uloc_openKeywordList_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span> *keywordList, int32_t keywordListSize, UErrorCode* status)</td></tr>
<tr><td class="num" id="LN1519">1519</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1520">1520</td><td class="line">    UKeywordsContext *myContext = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1521">1521</td><td class="line">    UEnumeration *result = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1522">1522</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1523">1523</td><td class="line">    <span class='keyword'>if</span>(U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN1524">1524</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1525">1525</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1526">1526</td><td class="line">    result = (UEnumeration *)<span class='macro'>uprv_malloc<span class='expansion'>uprv_malloc_54</span></span>(<span class='keyword'>sizeof</span>(UEnumeration));</td></tr>
<tr><td class="num" id="LN1527">1527</td><td class="line">    <span class='comment'>/* Null pointer test */</span></td></tr>
<tr><td class="num" id="LN1528">1528</td><td class="line">    <span class='keyword'>if</span> (result == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1529">1529</td><td class="line">        *status = U_MEMORY_ALLOCATION_ERROR;</td></tr>
<tr><td class="num" id="LN1530">1530</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1531">1531</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1532">1532</td><td class="line">    <span class='macro'>uprv_memcpy(result, &amp;gKeywordsEnum, <span class='keyword'>sizeof</span>(UEnumeration))<span class='expansion'>:: memcpy(result, &amp;gKeywordsEnum, sizeof(UEnumeration))</span></span>;</td></tr>
<tr><td class="num" id="LN1533">1533</td><td class="line">    myContext = <span class='keyword'>static_cast</span>&lt;UKeywordsContext *&gt;(<span class='macro'>uprv_malloc<span class='expansion'>uprv_malloc_54</span></span>(<span class='keyword'>sizeof</span>(UKeywordsContext)));</td></tr>
<tr><td class="num" id="LN1534">1534</td><td class="line">    <span class='keyword'>if</span> (myContext == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1535">1535</td><td class="line">        *status = U_MEMORY_ALLOCATION_ERROR;</td></tr>
<tr><td class="num" id="LN1536">1536</td><td class="line">        <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(result);</td></tr>
<tr><td class="num" id="LN1537">1537</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1538">1538</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1539">1539</td><td class="line">    myContext-&gt;keywords = (<span class='keyword'>char</span> *)<span class='macro'>uprv_malloc<span class='expansion'>uprv_malloc_54</span></span>(keywordListSize+1);</td></tr>
<tr><td class="num" id="LN1540">1540</td><td class="line">    <span class='macro'>uprv_memcpy(myContext-&gt;keywords, keywordList, keywordListSize)<span class='expansion'>:: memcpy(myContext-&gt;keywords, keywordList, keywordListSize<br>)</span></span>;</td></tr>
<tr><td class="num" id="LN1541">1541</td><td class="line">    myContext-&gt;keywords[keywordListSize] = 0;</td></tr>
<tr><td class="num" id="LN1542">1542</td><td class="line">    myContext-&gt;current = myContext-&gt;keywords;</td></tr>
<tr><td class="num" id="LN1543">1543</td><td class="line">    result-&gt;context = myContext;</td></tr>
<tr><td class="num" id="LN1544">1544</td><td class="line">    <span class='keyword'>return</span> result;</td></tr>
<tr><td class="num" id="LN1545">1545</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1546">1546</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1547">1547</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> UEnumeration* U_EXPORT2</td></tr>
<tr><td class="num" id="LN1548">1548</td><td class="line"><span class='macro'>uloc_openKeywords<span class='expansion'>uloc_openKeywords_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN1549">1549</td><td class="line">                        UErrorCode* status) </td></tr>
<tr><td class="num" id="LN1550">1550</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1551">1551</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1552">1552</td><td class="line">    <span class='keyword'>char</span> keywords[256];</td></tr>
<tr><td class="num" id="LN1553">1553</td><td class="line">    int32_t keywordsCapacity = 256;</td></tr>
<tr><td class="num" id="LN1554">1554</td><td class="line">    <span class='keyword'>char</span> tempBuffer[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN1555">1555</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1556">1556</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1557">1557</td><td class="line">    <span class='keyword'>if</span>(status==<span class='macro'>NULL<span class='expansion'>__null</span></span> || U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN1558">1558</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1559">1559</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1560">1560</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1561">1561</td><td class="line">    <span class='keyword'>if</span> (<span class='macro'>_hasBCP47Extension(localeID)<span class='expansion'>(localeID &amp;&amp; :: strstr(localeID, "@") == __null &amp;&amp;<br> getShortestSubtagLength(localeID) == 1)</span></span>) {</td></tr>
<tr><td class="num" id="LN1562">1562</td><td class="line">        <span class='macro'>_ConvertBCP47(tmpLocaleID, localeID, tempBuffer, <span class='keyword'>sizeof</span>(tempBuffer), status)<span class='expansion'>if (uloc_forLanguageTag_54(localeID, tempBuffer, sizeof(tempBuffer<br>), __null, status) &lt;= 0 || U_FAILURE(*status)) { tmpLocaleID<br>=localeID; } else { tmpLocaleID=tempBuffer; }</span></span>;</td></tr>
<tr><td class="num" id="LN1563">1563</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1564">1564</td><td class="line">        <span class='keyword'>if</span> (localeID==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1565">1565</td><td class="line">           localeID=<span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1566">1566</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1567">1567</td><td class="line">        tmpLocaleID=localeID;</td></tr>
<tr><td class="num" id="LN1568">1568</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1569">1569</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1570">1570</td><td class="line">    <span class='comment'>/* Skip the language */</span></td></tr>
<tr><td class="num" id="LN1571">1571</td><td class="line">    <span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(tmpLocaleID, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;tmpLocaleID);</td></tr>
<tr><td class="num" id="LN1572">1572</td><td class="line">    <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1573">1573</td><td class="line">        <span class='keyword'>const</span> <span class='keyword'>char</span> *scriptID;</td></tr>
<tr><td class="num" id="LN1574">1574</td><td class="line">        <span class='comment'>/* Skip the script if available */</span></td></tr>
<tr><td class="num" id="LN1575">1575</td><td class="line">        <span class='macro'>ulocimp_getScript<span class='expansion'>ulocimp_getScript_54</span></span>(tmpLocaleID+1, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;scriptID);</td></tr>
<tr><td class="num" id="LN1576">1576</td><td class="line">        <span class='keyword'>if</span>(scriptID != tmpLocaleID+1) {</td></tr>
<tr><td class="num" id="LN1577">1577</td><td class="line">            <span class='comment'>/* Found optional script */</span></td></tr>
<tr><td class="num" id="LN1578">1578</td><td class="line">            tmpLocaleID = scriptID;</td></tr>
<tr><td class="num" id="LN1579">1579</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1580">1580</td><td class="line">        <span class='comment'>/* Skip the Country */</span></td></tr>
<tr><td class="num" id="LN1581">1581</td><td class="line">        <span class='keyword'>if</span> (<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1582">1582</td><td class="line">            <span class='macro'>ulocimp_getCountry<span class='expansion'>ulocimp_getCountry_54</span></span>(tmpLocaleID+1, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;tmpLocaleID);</td></tr>
<tr><td class="num" id="LN1583">1583</td><td class="line">            <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1584">1584</td><td class="line">                _getVariant(tmpLocaleID+1, *tmpLocaleID, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0);</td></tr>
<tr><td class="num" id="LN1585">1585</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1586">1586</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1587">1587</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1588">1588</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1589">1589</td><td class="line">    <span class='comment'>/* keywords are located after '@' */</span></td></tr>
<tr><td class="num" id="LN1590">1590</td><td class="line">    <span class='keyword'>if</span>((tmpLocaleID = <span class='macro'>locale_getKeywordsStart<span class='expansion'>locale_getKeywordsStart_54</span></span>(tmpLocaleID)) != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1591">1591</td><td class="line">        i=<span class='macro'>locale_getKeywords<span class='expansion'>locale_getKeywords_54</span></span>(tmpLocaleID+1, '@', keywords, keywordsCapacity, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>FALSE<span class='expansion'>0</span></span>, status);</td></tr>
<tr><td class="num" id="LN1592">1592</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1593">1593</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1594">1594</td><td class="line">    <span class='keyword'>if</span>(i) {</td></tr>
<tr><td class="num" id="LN1595">1595</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>uloc_openKeywordList<span class='expansion'>uloc_openKeywordList_54</span></span>(keywords, i, status);</td></tr>
<tr><td class="num" id="LN1596">1596</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1597">1597</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1598">1598</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1599">1599</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1600">1600</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1601">1601</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1602">1602</td><td class="line"><span class='comment'>/* bit-flags for 'options' parameter of _canonicalize */</span></td></tr>
<tr><td class="num" id="LN1603">1603</td><td class="line"><span class='directive'>#define <span class='macro'>_ULOC_STRIP_KEYWORDS<span class='expansion'>0x2</span></span> 0x2</span></td></tr>
<tr><td class="num" id="LN1604">1604</td><td class="line"><span class='directive'>#define <span class='macro'>_ULOC_CANONICALIZE<span class='expansion'>0x1</span></span>   0x1</span></td></tr>
<tr><td class="num" id="LN1605">1605</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1606">1606</td><td class="line"><span class='directive'>#define <span class='macro'>OPTION_SET(options, mask)<span class='expansion'>((options &amp; mask) != 0)</span></span> ((options &amp; mask) != 0)</span></td></tr>
<tr><td class="num" id="LN1607">1607</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1608">1608</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> i_default[] = {'i', '-', 'd', 'e', 'f', 'a', 'u', 'l', 't'};</td></tr>
<tr><td class="num" id="LN1609">1609</td><td class="line"><span class='directive'>#define <span class='macro'>I_DEFAULT_LENGTH<span class='expansion'>(sizeof i_default / sizeof i_default[0])</span></span> (sizeof i_default / sizeof i_default[0])</span></td></tr>
<tr><td class="num" id="LN1610">1610</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1611">1611</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN1612">1612</td><td class="line"> <span class='comment'>* Canonicalize the given localeID, to level 1 or to level 2,</span></td></tr>
<tr><td class="num" id="LN1613">1613</td><td class="line"> <span class='comment'>* depending on the options.  To specify level 1, pass in options=0.</span></td></tr>
<tr><td class="num" id="LN1614">1614</td><td class="line"> <span class='comment'>* To specify level 2, pass in options=_ULOC_CANONICALIZE.</span></td></tr>
<tr><td class="num" id="LN1615">1615</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr><td class="num" id="LN1616">1616</td><td class="line"> <span class='comment'>* This is the code underlying uloc_getName and uloc_canonicalize.</span></td></tr>
<tr><td class="num" id="LN1617">1617</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN1618">1618</td><td class="line"><span class='keyword'>static</span> int32_t</td></tr>
<tr><td class="num" id="LN1619">1619</td><td class="line">_canonicalize(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN1620">1620</td><td class="line">              <span class='keyword'>char</span>* result,</td></tr>
<tr><td class="num" id="LN1621">1621</td><td class="line">              int32_t resultCapacity,</td></tr>
<tr><td class="num" id="LN1622">1622</td><td class="line">              uint32_t options,</td></tr>
<tr><td class="num" id="LN1623">1623</td><td class="line">              UErrorCode* err) {</td></tr>
<tr><td class="num" id="LN1624">1624</td><td class="line">    int32_t j, len, fieldCount=0, scriptSize=0, variantSize=0, nameCapacity;</td></tr>
<tr><td class="num" id="LN1625">1625</td><td class="line">    <span class='keyword'>char</span> localeBuffer[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN1626">1626</td><td class="line">    <span class='keyword'>char</span> tempBuffer[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN1627">1627</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* origLocaleID;</td></tr>
<tr><td class="num" id="LN1628">1628</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1629">1629</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* keywordAssign = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1630">1630</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* separatorIndicator = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1631">1631</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* addKeyword = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1632">1632</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* addValue = <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1633">1633</td><td class="line">    <span class='keyword'>char</span>* name;</td></tr>
<tr><td class="num" id="LN1634">1634</td><td class="line">    <span class='keyword'>char</span>* variant = <span class='macro'>NULL<span class='expansion'>__null</span></span>; <span class='comment'>/* pointer into name, or NULL */</span></td></tr>
<tr><td class="num" id="LN1635">1635</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1636">1636</td><td class="line">    <span class='keyword'>if</span> (U_FAILURE(*err)) {</td></tr>
<tr><td class="num" id="LN1637">1637</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1638">1638</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1639">1639</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1640">1640</td><td class="line">    <span class='keyword'>if</span> (<span class='macro'>_hasBCP47Extension(localeID)<span class='expansion'>(localeID &amp;&amp; :: strstr(localeID, "@") == __null &amp;&amp;<br> getShortestSubtagLength(localeID) == 1)</span></span>) {</td></tr>
<tr><td class="num" id="LN1641">1641</td><td class="line">        <span class='macro'>_ConvertBCP47(tmpLocaleID, localeID, tempBuffer, <span class='keyword'>sizeof</span>(tempBuffer), err)<span class='expansion'>if (uloc_forLanguageTag_54(localeID, tempBuffer, sizeof(tempBuffer<br>), __null, err) &lt;= 0 || U_FAILURE(*err)) { tmpLocaleID=localeID<br>; } else { tmpLocaleID=tempBuffer; }</span></span>;</td></tr>
<tr><td class="num" id="LN1642">1642</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1643">1643</td><td class="line">        <span class='keyword'>if</span> (localeID==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1644">1644</td><td class="line">           localeID=<span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1645">1645</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1646">1646</td><td class="line">        tmpLocaleID=localeID;</td></tr>
<tr><td class="num" id="LN1647">1647</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1648">1648</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1649">1649</td><td class="line">    origLocaleID=tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1650">1650</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1651">1651</td><td class="line">    <span class='comment'>/* if we are doing a full canonicalization, then put results in</span></td></tr>
<tr><td class="num" id="LN1652">1652</td><td class="line">       <span class='comment'>localeBuffer, if necessary; otherwise send them to result. */</span></td></tr>
<tr><td class="num" id="LN1653">1653</td><td class="line">    <span class='keyword'>if</span> (<span class='comment'>/*OPTION_SET(options, _ULOC_CANONICALIZE) &amp;&amp;*/</span></td></tr>
<tr><td class="num" id="LN1654">1654</td><td class="line">        (result == <span class='macro'>NULL<span class='expansion'>__null</span></span> || resultCapacity &lt; (int32_t)<span class='keyword'>sizeof</span>(localeBuffer))) {</td></tr>
<tr><td class="num" id="LN1655">1655</td><td class="line">        name = localeBuffer;</td></tr>
<tr><td class="num" id="LN1656">1656</td><td class="line">        nameCapacity = (int32_t)<span class='keyword'>sizeof</span>(localeBuffer);</td></tr>
<tr><td class="num" id="LN1657">1657</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1658">1658</td><td class="line">        name = result;</td></tr>
<tr><td class="num" id="LN1659">1659</td><td class="line">        nameCapacity = resultCapacity;</td></tr>
<tr><td class="num" id="LN1660">1660</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1661">1661</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1662">1662</td><td class="line">    <span class='comment'>/* get all pieces, one after another, and separate with '_' */</span></td></tr>
<tr><td class="num" id="LN1663">1663</td><td class="line">    len=<span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(tmpLocaleID, name, nameCapacity, &amp;tmpLocaleID);</td></tr>
<tr><td class="num" id="LN1664">1664</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1665">1665</td><td class="line">    <span class='keyword'>if</span>(len == <span class='macro'>I_DEFAULT_LENGTH<span class='expansion'>(sizeof i_default / sizeof i_default[0])</span></span> &amp;&amp; <span class='macro'>uprv_strncmp(origLocaleID, i_default, len)<span class='expansion'>:: strncmp(origLocaleID, i_default, len)</span></span> == 0) {</td></tr>
<tr><td class="num" id="LN1666">1666</td><td class="line">        <span class='keyword'>const</span> <span class='keyword'>char</span> *d = <span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1667">1667</td><td class="line">        </td></tr>
<tr><td class="num" id="LN1668">1668</td><td class="line">        len = (int32_t)<span class='macro'>uprv_strlen(d)<span class='expansion'>:: strlen(d)</span></span>;</td></tr>
<tr><td class="num" id="LN1669">1669</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1670">1670</td><td class="line">        <span class='keyword'>if</span> (name != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1671">1671</td><td class="line">            <span class='macro'>uprv_strncpy(name, d, len)<span class='expansion'>:: strncpy(name, d, len)</span></span>;</td></tr>
<tr><td class="num" id="LN1672">1672</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1673">1673</td><td class="line">    } <span class='keyword'>else</span> <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1674">1674</td><td class="line">        <span class='keyword'>const</span> <span class='keyword'>char</span> *scriptID;</td></tr>
<tr><td class="num" id="LN1675">1675</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1676">1676</td><td class="line">        ++fieldCount;</td></tr>
<tr><td class="num" id="LN1677">1677</td><td class="line">        <span class='keyword'>if</span>(len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1678">1678</td><td class="line">            name[len]='_';</td></tr>
<tr><td class="num" id="LN1679">1679</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1680">1680</td><td class="line">        ++len;</td></tr>
<tr><td class="num" id="LN1681">1681</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1682">1682</td><td class="line">        scriptSize=<span class='macro'>ulocimp_getScript<span class='expansion'>ulocimp_getScript_54</span></span>(tmpLocaleID+1,</td></tr>
<tr><td class="num" id="LN1683">1683</td><td class="line">            (len&lt;nameCapacity ? name+len : <span class='macro'>NULL<span class='expansion'>__null</span></span>), nameCapacity-len, &amp;scriptID);</td></tr>
<tr><td class="num" id="LN1684">1684</td><td class="line">        <span class='keyword'>if</span>(scriptSize &gt; 0) {</td></tr>
<tr><td class="num" id="LN1685">1685</td><td class="line">            <span class='comment'>/* Found optional script */</span></td></tr>
<tr><td class="num" id="LN1686">1686</td><td class="line">            tmpLocaleID = scriptID;</td></tr>
<tr><td class="num" id="LN1687">1687</td><td class="line">            ++fieldCount;</td></tr>
<tr><td class="num" id="LN1688">1688</td><td class="line">            len+=scriptSize;</td></tr>
<tr><td class="num" id="LN1689">1689</td><td class="line">            <span class='keyword'>if</span> (<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1690">1690</td><td class="line">                <span class='comment'>/* If there is something else, then we add the _ */</span></td></tr>
<tr><td class="num" id="LN1691">1691</td><td class="line">                <span class='keyword'>if</span>(len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1692">1692</td><td class="line">                    name[len]='_';</td></tr>
<tr><td class="num" id="LN1693">1693</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1694">1694</td><td class="line">                ++len;</td></tr>
<tr><td class="num" id="LN1695">1695</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1696">1696</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1697">1697</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1698">1698</td><td class="line">        <span class='keyword'>if</span> (<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1699">1699</td><td class="line">            <span class='keyword'>const</span> <span class='keyword'>char</span> *cntryID;</td></tr>
<tr><td class="num" id="LN1700">1700</td><td class="line">            int32_t cntrySize = <span class='macro'>ulocimp_getCountry<span class='expansion'>ulocimp_getCountry_54</span></span>(tmpLocaleID+1,</td></tr>
<tr><td class="num" id="LN1701">1701</td><td class="line">                (len&lt;nameCapacity ? name+len : <span class='macro'>NULL<span class='expansion'>__null</span></span>), nameCapacity-len, &amp;cntryID);</td></tr>
<tr><td class="num" id="LN1702">1702</td><td class="line">            <span class='keyword'>if</span> (cntrySize &gt; 0) {</td></tr>
<tr><td class="num" id="LN1703">1703</td><td class="line">                <span class='comment'>/* Found optional country */</span></td></tr>
<tr><td class="num" id="LN1704">1704</td><td class="line">                tmpLocaleID = cntryID;</td></tr>
<tr><td class="num" id="LN1705">1705</td><td class="line">                len+=cntrySize;</td></tr>
<tr><td class="num" id="LN1706">1706</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1707">1707</td><td class="line">            <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1708">1708</td><td class="line">                <span class='comment'>/* If there is something else, then we add the _  if we found country before. */</span></td></tr>
<tr><td class="num" id="LN1709">1709</td><td class="line">                <span class='keyword'>if</span> (cntrySize &gt;= 0 &amp;&amp; ! <span class='macro'>_isIDSeparator(*(tmpLocaleID+1))<span class='expansion'>(*(tmpLocaleID+1) == '_' || *(tmpLocaleID+1) == '-')</span></span> ) {</td></tr>
<tr><td class="num" id="LN1710">1710</td><td class="line">                    ++fieldCount;</td></tr>
<tr><td class="num" id="LN1711">1711</td><td class="line">                    <span class='keyword'>if</span>(len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1712">1712</td><td class="line">                        name[len]='_';</td></tr>
<tr><td class="num" id="LN1713">1713</td><td class="line">                    }</td></tr>
<tr><td class="num" id="LN1714">1714</td><td class="line">                    ++len;</td></tr>
<tr><td class="num" id="LN1715">1715</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1716">1716</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1717">1717</td><td class="line">                variantSize = _getVariant(tmpLocaleID+1, *tmpLocaleID,</td></tr>
<tr><td class="num" id="LN1718">1718</td><td class="line">                    (len&lt;nameCapacity ? name+len : <span class='macro'>NULL<span class='expansion'>__null</span></span>), nameCapacity-len);</td></tr>
<tr><td class="num" id="LN1719">1719</td><td class="line">                <span class='keyword'>if</span> (variantSize &gt; 0) {</td></tr>
<tr><td class="num" id="LN1720">1720</td><td class="line">                    variant = len&lt;nameCapacity ? name+len : <span class='macro'>NULL<span class='expansion'>__null</span></span>;</td></tr>
<tr><td class="num" id="LN1721">1721</td><td class="line">                    len += variantSize;</td></tr>
<tr><td class="num" id="LN1722">1722</td><td class="line">                    tmpLocaleID += variantSize + 1; <span class='comment'>/* skip '_' and variant */</span></td></tr>
<tr><td class="num" id="LN1723">1723</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1724">1724</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1725">1725</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1726">1726</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1727">1727</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1728">1728</td><td class="line">    <span class='comment'>/* Copy POSIX-style charset specifier, if any [mr.utf8] */</span></td></tr>
<tr><td class="num" id="LN1729">1729</td><td class="line">    <span class='keyword'>if</span> (!<span class='macro'>OPTION_SET(options, _ULOC_CANONICALIZE)<span class='expansion'>((options &amp; 0x1) != 0)</span></span> &amp;&amp; *tmpLocaleID == '.') {</td></tr>
<tr><td class="num" id="LN1730">1730</td><td class="line">        UBool done = <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN1731">1731</td><td class="line">        <span class='keyword'>do</span> {</td></tr>
<tr><td class="num" id="LN1732">1732</td><td class="line">            <span class='keyword'>char</span> c = *tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1733">1733</td><td class="line">            <span class='keyword'>switch</span> (c) {</td></tr>
<tr><td class="num" id="LN1734">1734</td><td class="line">            <span class='keyword'>case</span> 0:</td></tr>
<tr><td class="num" id="LN1735">1735</td><td class="line">            <span class='keyword'>case</span> '@':</td></tr>
<tr><td class="num" id="LN1736">1736</td><td class="line">                done = <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN1737">1737</td><td class="line">                <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1738">1738</td><td class="line">            <span class='keyword'>default</span>:</td></tr>
<tr><td class="num" id="LN1739">1739</td><td class="line">                <span class='keyword'>if</span> (len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1740">1740</td><td class="line">                    name[len] = c;</td></tr>
<tr><td class="num" id="LN1741">1741</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1742">1742</td><td class="line">                ++len;</td></tr>
<tr><td class="num" id="LN1743">1743</td><td class="line">                ++tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1744">1744</td><td class="line">                <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1745">1745</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1746">1746</td><td class="line">        } <span class='keyword'>while</span> (!done);</td></tr>
<tr><td class="num" id="LN1747">1747</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1748">1748</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1749">1749</td><td class="line">    <span class='comment'>/* Scan ahead to next '@' and determine if it is followed by '=' and/or ';'</span></td></tr>
<tr><td class="num" id="LN1750">1750</td><td class="line">       <span class='comment'>After this, tmpLocaleID either points to '@' or is NULL */</span></td></tr>
<tr><td class="num" id="LN1751">1751</td><td class="line">    <span class='keyword'>if</span> ((tmpLocaleID=<span class='macro'>locale_getKeywordsStart<span class='expansion'>locale_getKeywordsStart_54</span></span>(tmpLocaleID))!=<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1752">1752</td><td class="line">        keywordAssign = <span class='macro'>uprv_strchr(tmpLocaleID, '=')<span class='expansion'>:: strchr(tmpLocaleID, '=')</span></span>;</td></tr>
<tr><td class="num" id="LN1753">1753</td><td class="line">        separatorIndicator = <span class='macro'>uprv_strchr(tmpLocaleID, ';')<span class='expansion'>:: strchr(tmpLocaleID, ';')</span></span>;</td></tr>
<tr><td class="num" id="LN1754">1754</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1755">1755</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1756">1756</td><td class="line">    <span class='comment'>/* Copy POSIX-style variant, if any [mr@FOO] */</span></td></tr>
<tr><td class="num" id="LN1757">1757</td><td class="line">    <span class='keyword'>if</span> (!<span class='macro'>OPTION_SET(options, _ULOC_CANONICALIZE)<span class='expansion'>((options &amp; 0x1) != 0)</span></span> &amp;&amp;</td></tr>
<tr><td class="num" id="LN1758">1758</td><td class="line">        tmpLocaleID != <span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; keywordAssign == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1759">1759</td><td class="line">        <span class='keyword'>for</span> (;;) {</td></tr>
<tr><td class="num" id="LN1760">1760</td><td class="line">            <span class='keyword'>char</span> c = *tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1761">1761</td><td class="line">            <span class='keyword'>if</span> (c == 0) {</td></tr>
<tr><td class="num" id="LN1762">1762</td><td class="line">                <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1763">1763</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1764">1764</td><td class="line">            <span class='keyword'>if</span> (len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1765">1765</td><td class="line">                name[len] = c;</td></tr>
<tr><td class="num" id="LN1766">1766</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1767">1767</td><td class="line">            ++len;</td></tr>
<tr><td class="num" id="LN1768">1768</td><td class="line">            ++tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1769">1769</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1770">1770</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1771">1771</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1772">1772</td><td class="line">    <span class='keyword'>if</span> (<span class='macro'>OPTION_SET(options, _ULOC_CANONICALIZE)<span class='expansion'>((options &amp; 0x1) != 0)</span></span>) {</td></tr>
<tr><td class="num" id="LN1773">1773</td><td class="line">        <span class='comment'>/* Handle @FOO variant if @ is present and not followed by = */</span></td></tr>
<tr><td class="num" id="LN1774">1774</td><td class="line">        <span class='keyword'>if</span> (tmpLocaleID!=<span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; keywordAssign==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1775">1775</td><td class="line">            int32_t posixVariantSize;</td></tr>
<tr><td class="num" id="LN1776">1776</td><td class="line">            <span class='comment'>/* Add missing '_' if needed */</span></td></tr>
<tr><td class="num" id="LN1777">1777</td><td class="line">            <span class='keyword'>if</span> (fieldCount &lt; 2 || (fieldCount &lt; 3 &amp;&amp; scriptSize &gt; 0)) {</td></tr>
<tr><td class="num" id="LN1778">1778</td><td class="line">                <span class='keyword'>do</span> {</td></tr>
<tr><td class="num" id="LN1779">1779</td><td class="line">                    <span class='keyword'>if</span>(len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1780">1780</td><td class="line">                        name[len]='_';</td></tr>
<tr><td class="num" id="LN1781">1781</td><td class="line">                    }</td></tr>
<tr><td class="num" id="LN1782">1782</td><td class="line">                    ++len;</td></tr>
<tr><td class="num" id="LN1783">1783</td><td class="line">                    ++fieldCount;</td></tr>
<tr><td class="num" id="LN1784">1784</td><td class="line">                } <span class='keyword'>while</span>(fieldCount&lt;2);</td></tr>
<tr><td class="num" id="LN1785">1785</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1786">1786</td><td class="line">            posixVariantSize = _getVariantEx(tmpLocaleID+1, '@', name+len, nameCapacity-len,</td></tr>
<tr><td class="num" id="LN1787">1787</td><td class="line">                                             (UBool)(variantSize &gt; 0));</td></tr>
<tr><td class="num" id="LN1788">1788</td><td class="line">            <span class='keyword'>if</span> (posixVariantSize &gt; 0) {</td></tr>
<tr><td class="num" id="LN1789">1789</td><td class="line">                <span class='keyword'>if</span> (variant == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1790">1790</td><td class="line">                    variant = name+len;</td></tr>
<tr><td class="num" id="LN1791">1791</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1792">1792</td><td class="line">                len += posixVariantSize;</td></tr>
<tr><td class="num" id="LN1793">1793</td><td class="line">                variantSize += posixVariantSize;</td></tr>
<tr><td class="num" id="LN1794">1794</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1795">1795</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1796">1796</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1797">1797</td><td class="line">        <span class='comment'>/* Handle generic variants first */</span></td></tr>
<tr><td class="num" id="LN1798">1798</td><td class="line">        <span class='keyword'>if</span> (variant) {</td></tr>
<tr><td class="num" id="LN1799">1799</td><td class="line">            <span class='keyword'>for</span> (j=0; j&lt;(int32_t)(<span class='keyword'>sizeof</span>(VARIANT_MAP)/<span class='keyword'>sizeof</span>(VARIANT_MAP[0])); j++) {</td></tr>
<tr><td class="num" id="LN1800">1800</td><td class="line">                <span class='keyword'>const</span> <span class='keyword'>char</span>* variantToCompare = VARIANT_MAP[j].variant;</td></tr>
<tr><td class="num" id="LN1801">1801</td><td class="line">                int32_t n = (int32_t)<span class='macro'>uprv_strlen(variantToCompare)<span class='expansion'>:: strlen(variantToCompare)</span></span>;</td></tr>
<tr><td class="num" id="LN1802">1802</td><td class="line">                int32_t variantLen = _deleteVariant(variant, <span class='macro'>uprv_min<span class='expansion'>uprv_min_54</span></span>(variantSize, (nameCapacity-len)), variantToCompare, n);</td></tr>
<tr><td class="num" id="LN1803">1803</td><td class="line">                len -= variantLen;</td></tr>
<tr><td class="num" id="LN1804">1804</td><td class="line">                <span class='keyword'>if</span> (variantLen &gt; 0) {</td></tr>
<tr><td class="num" id="LN1805">1805</td><td class="line">                    <span class='keyword'>if</span> (len &gt; 0 &amp;&amp; name[len-1] == '_') { <span class='comment'>/* delete trailing '_' */</span></td></tr>
<tr><td class="num" id="LN1806">1806</td><td class="line">                        --len;</td></tr>
<tr><td class="num" id="LN1807">1807</td><td class="line">                    }</td></tr>
<tr><td class="num" id="LN1808">1808</td><td class="line">                    addKeyword = VARIANT_MAP[j].keyword;</td></tr>
<tr><td class="num" id="LN1809">1809</td><td class="line">                    addValue = VARIANT_MAP[j].value;</td></tr>
<tr><td class="num" id="LN1810">1810</td><td class="line">                    <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1811">1811</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1812">1812</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1813">1813</td><td class="line">            <span class='keyword'>if</span> (len &gt; 0 &amp;&amp; len &lt;= nameCapacity &amp;&amp; name[len-1] == '_') { <span class='comment'>/* delete trailing '_' */</span></td></tr>
<tr><td class="num" id="LN1814">1814</td><td class="line">                --len;</td></tr>
<tr><td class="num" id="LN1815">1815</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1816">1816</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1817">1817</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1818">1818</td><td class="line">        <span class='comment'>/* Look up the ID in the canonicalization map */</span></td></tr>
<tr><td class="num" id="LN1819">1819</td><td class="line">        <span class='keyword'>for</span> (j=0; j&lt;(int32_t)(<span class='keyword'>sizeof</span>(CANONICALIZE_MAP)/<span class='keyword'>sizeof</span>(CANONICALIZE_MAP[0])); j++) {</td></tr>
<tr><td class="num" id="LN1820">1820</td><td class="line">            <span class='keyword'>const</span> <span class='keyword'>char</span>* id = CANONICALIZE_MAP[j].id;</td></tr>
<tr><td class="num" id="LN1821">1821</td><td class="line">            int32_t n = (int32_t)<span class='macro'>uprv_strlen(id)<span class='expansion'>:: strlen(id)</span></span>;</td></tr>
<tr><td class="num" id="LN1822">1822</td><td class="line">            <span class='keyword'>if</span> (len == n &amp;&amp; <span class='macro'>uprv_strncmp(name, id, n)<span class='expansion'>:: strncmp(name, id, n)</span></span> == 0) {</td></tr>
<tr><td class="num" id="LN1823">1823</td><td class="line">                <span class='keyword'>if</span> (n == 0 &amp;&amp; tmpLocaleID != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1824">1824</td><td class="line">                    <span class='keyword'>break</span>; <span class='comment'>/* Don't remap "" if keywords present */</span></td></tr>
<tr><td class="num" id="LN1825">1825</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1826">1826</td><td class="line">                len = _copyCount(name, nameCapacity, CANONICALIZE_MAP[j].canonicalID);</td></tr>
<tr><td class="num" id="LN1827">1827</td><td class="line">                <span class='keyword'>if</span> (CANONICALIZE_MAP[j].keyword) {</td></tr>
<tr><td class="num" id="LN1828">1828</td><td class="line">                    addKeyword = CANONICALIZE_MAP[j].keyword;</td></tr>
<tr><td class="num" id="LN1829">1829</td><td class="line">                    addValue = CANONICALIZE_MAP[j].value;</td></tr>
<tr><td class="num" id="LN1830">1830</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN1831">1831</td><td class="line">                <span class='keyword'>break</span>;</td></tr>
<tr><td class="num" id="LN1832">1832</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1833">1833</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1834">1834</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1835">1835</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1836">1836</td><td class="line">    <span class='keyword'>if</span> (!<span class='macro'>OPTION_SET(options, _ULOC_STRIP_KEYWORDS)<span class='expansion'>((options &amp; 0x2) != 0)</span></span>) {</td></tr>
<tr><td class="num" id="LN1837">1837</td><td class="line">        <span class='keyword'>if</span> (tmpLocaleID!=<span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; keywordAssign!=<span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp;</td></tr>
<tr><td class="num" id="LN1838">1838</td><td class="line">            (!separatorIndicator || separatorIndicator &gt; keywordAssign)) {</td></tr>
<tr><td class="num" id="LN1839">1839</td><td class="line">            <span class='keyword'>if</span>(len&lt;nameCapacity) {</td></tr>
<tr><td class="num" id="LN1840">1840</td><td class="line">                name[len]='@';</td></tr>
<tr><td class="num" id="LN1841">1841</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN1842">1842</td><td class="line">            ++len;</td></tr>
<tr><td class="num" id="LN1843">1843</td><td class="line">            ++fieldCount;</td></tr>
<tr><td class="num" id="LN1844">1844</td><td class="line">            len += _getKeywords(tmpLocaleID+1, '@', (len&lt;nameCapacity ? name+len : <span class='macro'>NULL<span class='expansion'>__null</span></span>), nameCapacity-len,</td></tr>
<tr><td class="num" id="LN1845">1845</td><td class="line">                                <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>TRUE<span class='expansion'>1</span></span>, addKeyword, addValue, err);</td></tr>
<tr><td class="num" id="LN1846">1846</td><td class="line">        } <span class='keyword'>else</span> <span class='keyword'>if</span> (addKeyword != <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1847">1847</td><td class="line">            U_ASSERT(addValue != NULL &amp;&amp; len &lt; nameCapacity);</td></tr>
<tr><td class="num" id="LN1848">1848</td><td class="line">            <span class='comment'>/* inelegant but works -- later make _getKeywords do this? */</span></td></tr>
<tr><td class="num" id="LN1849">1849</td><td class="line">            len += _copyCount(name+len, nameCapacity-len, <span class='string_literal'>"@"</span>);</td></tr>
<tr><td class="num" id="LN1850">1850</td><td class="line">            len += _copyCount(name+len, nameCapacity-len, addKeyword);</td></tr>
<tr><td class="num" id="LN1851">1851</td><td class="line">            len += _copyCount(name+len, nameCapacity-len, <span class='string_literal'>"="</span>);</td></tr>
<tr><td class="num" id="LN1852">1852</td><td class="line">            len += _copyCount(name+len, nameCapacity-len, addValue);</td></tr>
<tr><td class="num" id="LN1853">1853</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1854">1854</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1855">1855</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1856">1856</td><td class="line">    <span class='keyword'>if</span> (U_SUCCESS(*err) &amp;&amp; result != <span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; name == localeBuffer) {</td></tr>
<tr><td class="num" id="LN1857">1857</td><td class="line">        <span class='macro'>uprv_strncpy(result, localeBuffer, (len &gt; resultCapacity) ? resultCapacity : len)<span class='expansion'>:: strncpy(result, localeBuffer, (len &gt; resultCapacity) ? resultCapacity<br> : len)</span></span>;</td></tr>
<tr><td class="num" id="LN1858">1858</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1859">1859</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1860">1860</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(result, resultCapacity, len, err);</td></tr>
<tr><td class="num" id="LN1861">1861</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1862">1862</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1863">1863</td><td class="line"><span class='comment'>/* ### ID parsing API **************************************************/</span></td></tr>
<tr><td class="num" id="LN1864">1864</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1865">1865</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN1866">1866</td><td class="line"><span class='macro'>uloc_getParent<span class='expansion'>uloc_getParent_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>*    localeID,</td></tr>
<tr><td class="num" id="LN1867">1867</td><td class="line">               <span class='keyword'>char</span>* parent,</td></tr>
<tr><td class="num" id="LN1868">1868</td><td class="line">               int32_t parentCapacity,</td></tr>
<tr><td class="num" id="LN1869">1869</td><td class="line">               UErrorCode* err)</td></tr>
<tr><td class="num" id="LN1870">1870</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1871">1871</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *lastUnderscore;</td></tr>
<tr><td class="num" id="LN1872">1872</td><td class="line">    int32_t i;</td></tr>
<tr><td class="num" id="LN1873">1873</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1874">1874</td><td class="line">    <span class='keyword'>if</span> (U_FAILURE(*err))</td></tr>
<tr><td class="num" id="LN1875">1875</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1876">1876</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1877">1877</td><td class="line">    <span class='keyword'>if</span> (localeID == <span class='macro'>NULL<span class='expansion'>__null</span></span>)</td></tr>
<tr><td class="num" id="LN1878">1878</td><td class="line">        localeID = <span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1879">1879</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1880">1880</td><td class="line">    lastUnderscore=<span class='macro'>uprv_strrchr(localeID, '_')<span class='expansion'>:: strrchr(localeID, '_')</span></span>;</td></tr>
<tr><td class="num" id="LN1881">1881</td><td class="line">    <span class='keyword'>if</span>(lastUnderscore!=<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1882">1882</td><td class="line">        i=(int32_t)(lastUnderscore-localeID);</td></tr>
<tr><td class="num" id="LN1883">1883</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1884">1884</td><td class="line">        i=0;</td></tr>
<tr><td class="num" id="LN1885">1885</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1886">1886</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1887">1887</td><td class="line">    <span class='keyword'>if</span>(i&gt;0 &amp;&amp; parent != localeID) {</td></tr>
<tr><td class="num" id="LN1888">1888</td><td class="line">        <span class='macro'>uprv_memcpy(parent, localeID, uprv_min(i, parentCapacity))<span class='expansion'>:: memcpy(parent, localeID, uprv_min_54(i, parentCapacity))</span></span>;</td></tr>
<tr><td class="num" id="LN1889">1889</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1890">1890</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(parent, parentCapacity, i, err);</td></tr>
<tr><td class="num" id="LN1891">1891</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1892">1892</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1893">1893</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN1894">1894</td><td class="line"><span class='macro'>uloc_getLanguage<span class='expansion'>uloc_getLanguage_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>*    localeID,</td></tr>
<tr><td class="num" id="LN1895">1895</td><td class="line">         <span class='keyword'>char</span>* language,</td></tr>
<tr><td class="num" id="LN1896">1896</td><td class="line">         int32_t languageCapacity,</td></tr>
<tr><td class="num" id="LN1897">1897</td><td class="line">         UErrorCode* err)</td></tr>
<tr><td class="num" id="LN1898">1898</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1899">1899</td><td class="line">    <span class='comment'>/* uloc_getLanguage will return a 2 character iso-639 code if one exists. *CWB*/</span></td></tr>
<tr><td class="num" id="LN1900">1900</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1901">1901</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1902">1902</td><td class="line">    <span class='keyword'>if</span> (err==<span class='macro'>NULL<span class='expansion'>__null</span></span> || U_FAILURE(*err)) {</td></tr>
<tr><td class="num" id="LN1903">1903</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1904">1904</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1905">1905</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1906">1906</td><td class="line">    <span class='keyword'>if</span>(localeID==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1907">1907</td><td class="line">        localeID=<span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1908">1908</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1909">1909</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1910">1910</td><td class="line">    i=<span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(localeID, language, languageCapacity, <span class='macro'>NULL<span class='expansion'>__null</span></span>);</td></tr>
<tr><td class="num" id="LN1911">1911</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(language, languageCapacity, i, err);</td></tr>
<tr><td class="num" id="LN1912">1912</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1913">1913</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1914">1914</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN1915">1915</td><td class="line"><span class='macro'>uloc_getScript<span class='expansion'>uloc_getScript_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>*    localeID,</td></tr>
<tr><td class="num" id="LN1916">1916</td><td class="line">         <span class='keyword'>char</span>* script,</td></tr>
<tr><td class="num" id="LN1917">1917</td><td class="line">         int32_t scriptCapacity,</td></tr>
<tr><td class="num" id="LN1918">1918</td><td class="line">         UErrorCode* err)</td></tr>
<tr><td class="num" id="LN1919">1919</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1920">1920</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1921">1921</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1922">1922</td><td class="line">    <span class='keyword'>if</span>(err==<span class='macro'>NULL<span class='expansion'>__null</span></span> || U_FAILURE(*err)) {</td></tr>
<tr><td class="num" id="LN1923">1923</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1924">1924</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1925">1925</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1926">1926</td><td class="line">    <span class='keyword'>if</span>(localeID==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1927">1927</td><td class="line">        localeID=<span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1928">1928</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1929">1929</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1930">1930</td><td class="line">    <span class='comment'>/* skip the language */</span></td></tr>
<tr><td class="num" id="LN1931">1931</td><td class="line">    <span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(localeID, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;localeID);</td></tr>
<tr><td class="num" id="LN1932">1932</td><td class="line">    <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*localeID)<span class='expansion'>(*localeID == '_' || *localeID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1933">1933</td><td class="line">        i=<span class='macro'>ulocimp_getScript<span class='expansion'>ulocimp_getScript_54</span></span>(localeID+1, script, scriptCapacity, <span class='macro'>NULL<span class='expansion'>__null</span></span>);</td></tr>
<tr><td class="num" id="LN1934">1934</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1935">1935</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(script, scriptCapacity, i, err);</td></tr>
<tr><td class="num" id="LN1936">1936</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1937">1937</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1938">1938</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN1939">1939</td><td class="line"><span class='macro'>uloc_getCountry<span class='expansion'>uloc_getCountry_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN1940">1940</td><td class="line">            <span class='keyword'>char</span>* country,</td></tr>
<tr><td class="num" id="LN1941">1941</td><td class="line">            int32_t countryCapacity,</td></tr>
<tr><td class="num" id="LN1942">1942</td><td class="line">            UErrorCode* err) </td></tr>
<tr><td class="num" id="LN1943">1943</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1944">1944</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1945">1945</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1946">1946</td><td class="line">    <span class='keyword'>if</span>(err==<span class='macro'>NULL<span class='expansion'>__null</span></span> || U_FAILURE(*err)) {</td></tr>
<tr><td class="num" id="LN1947">1947</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1948">1948</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1949">1949</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1950">1950</td><td class="line">    <span class='keyword'>if</span>(localeID==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1951">1951</td><td class="line">        localeID=<span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1952">1952</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1953">1953</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1954">1954</td><td class="line">    <span class='comment'>/* Skip the language */</span></td></tr>
<tr><td class="num" id="LN1955">1955</td><td class="line">    <span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(localeID, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;localeID);</td></tr>
<tr><td class="num" id="LN1956">1956</td><td class="line">    <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*localeID)<span class='expansion'>(*localeID == '_' || *localeID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1957">1957</td><td class="line">        <span class='keyword'>const</span> <span class='keyword'>char</span> *scriptID;</td></tr>
<tr><td class="num" id="LN1958">1958</td><td class="line">        <span class='comment'>/* Skip the script if available */</span></td></tr>
<tr><td class="num" id="LN1959">1959</td><td class="line">        <span class='macro'>ulocimp_getScript<span class='expansion'>ulocimp_getScript_54</span></span>(localeID+1, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;scriptID);</td></tr>
<tr><td class="num" id="LN1960">1960</td><td class="line">        <span class='keyword'>if</span>(scriptID != localeID+1) {</td></tr>
<tr><td class="num" id="LN1961">1961</td><td class="line">            <span class='comment'>/* Found optional script */</span></td></tr>
<tr><td class="num" id="LN1962">1962</td><td class="line">            localeID = scriptID;</td></tr>
<tr><td class="num" id="LN1963">1963</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1964">1964</td><td class="line">        <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*localeID)<span class='expansion'>(*localeID == '_' || *localeID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1965">1965</td><td class="line">            i=<span class='macro'>ulocimp_getCountry<span class='expansion'>ulocimp_getCountry_54</span></span>(localeID+1, country, countryCapacity, <span class='macro'>NULL<span class='expansion'>__null</span></span>);</td></tr>
<tr><td class="num" id="LN1966">1966</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1967">1967</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1968">1968</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(country, countryCapacity, i, err);</td></tr>
<tr><td class="num" id="LN1969">1969</td><td class="line">}</td></tr>
<tr><td class="num" id="LN1970">1970</td><td class="line"> </td></tr>
<tr><td class="num" id="LN1971">1971</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN1972">1972</td><td class="line"><span class='macro'>uloc_getVariant<span class='expansion'>uloc_getVariant_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN1973">1973</td><td class="line">                <span class='keyword'>char</span>* variant,</td></tr>
<tr><td class="num" id="LN1974">1974</td><td class="line">                int32_t variantCapacity,</td></tr>
<tr><td class="num" id="LN1975">1975</td><td class="line">                UErrorCode* err) </td></tr>
<tr><td class="num" id="LN1976">1976</td><td class="line">{</td></tr>
<tr><td class="num" id="LN1977">1977</td><td class="line">    <span class='keyword'>char</span> tempBuffer[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN1978">1978</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* tmpLocaleID;</td></tr>
<tr><td class="num" id="LN1979">1979</td><td class="line">    int32_t i=0;</td></tr>
<tr><td class="num" id="LN1980">1980</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1981">1981</td><td class="line">    <span class='keyword'>if</span>(err==<span class='macro'>NULL<span class='expansion'>__null</span></span> || U_FAILURE(*err)) {</td></tr>
<tr><td class="num" id="LN1982">1982</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN1983">1983</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1984">1984</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1985">1985</td><td class="line">    <span class='keyword'>if</span> (<span class='macro'>_hasBCP47Extension(localeID)<span class='expansion'>(localeID &amp;&amp; :: strstr(localeID, "@") == __null &amp;&amp;<br> getShortestSubtagLength(localeID) == 1)</span></span>) {</td></tr>
<tr><td class="num" id="LN1986">1986</td><td class="line">        <span class='macro'>_ConvertBCP47(tmpLocaleID, localeID, tempBuffer, <span class='keyword'>sizeof</span>(tempBuffer), err)<span class='expansion'>if (uloc_forLanguageTag_54(localeID, tempBuffer, sizeof(tempBuffer<br>), __null, err) &lt;= 0 || U_FAILURE(*err)) { tmpLocaleID=localeID<br>; } else { tmpLocaleID=tempBuffer; }</span></span>;</td></tr>
<tr><td class="num" id="LN1987">1987</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN1988">1988</td><td class="line">        <span class='keyword'>if</span> (localeID==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN1989">1989</td><td class="line">           localeID=<span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN1990">1990</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN1991">1991</td><td class="line">        tmpLocaleID=localeID;</td></tr>
<tr><td class="num" id="LN1992">1992</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN1993">1993</td><td class="line">    </td></tr>
<tr><td class="num" id="LN1994">1994</td><td class="line">    <span class='comment'>/* Skip the language */</span></td></tr>
<tr><td class="num" id="LN1995">1995</td><td class="line">    <span class='macro'>ulocimp_getLanguage<span class='expansion'>ulocimp_getLanguage_54</span></span>(tmpLocaleID, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;tmpLocaleID);</td></tr>
<tr><td class="num" id="LN1996">1996</td><td class="line">    <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN1997">1997</td><td class="line">        <span class='keyword'>const</span> <span class='keyword'>char</span> *scriptID;</td></tr>
<tr><td class="num" id="LN1998">1998</td><td class="line">        <span class='comment'>/* Skip the script if available */</span></td></tr>
<tr><td class="num" id="LN1999">1999</td><td class="line">        <span class='macro'>ulocimp_getScript<span class='expansion'>ulocimp_getScript_54</span></span>(tmpLocaleID+1, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;scriptID);</td></tr>
<tr><td class="num" id="LN2000">2000</td><td class="line">        <span class='keyword'>if</span>(scriptID != tmpLocaleID+1) {</td></tr>
<tr><td class="num" id="LN2001">2001</td><td class="line">            <span class='comment'>/* Found optional script */</span></td></tr>
<tr><td class="num" id="LN2002">2002</td><td class="line">            tmpLocaleID = scriptID;</td></tr>
<tr><td class="num" id="LN2003">2003</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2004">2004</td><td class="line">        <span class='comment'>/* Skip the Country */</span></td></tr>
<tr><td class="num" id="LN2005">2005</td><td class="line">        <span class='keyword'>if</span> (<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN2006">2006</td><td class="line">            <span class='keyword'>const</span> <span class='keyword'>char</span> *cntryID;</td></tr>
<tr><td class="num" id="LN2007">2007</td><td class="line">            <span class='macro'>ulocimp_getCountry<span class='expansion'>ulocimp_getCountry_54</span></span>(tmpLocaleID+1, <span class='macro'>NULL<span class='expansion'>__null</span></span>, 0, &amp;cntryID);</td></tr>
<tr><td class="num" id="LN2008">2008</td><td class="line">            <span class='keyword'>if</span> (cntryID != tmpLocaleID+1) {</td></tr>
<tr><td class="num" id="LN2009">2009</td><td class="line">                <span class='comment'>/* Found optional country */</span></td></tr>
<tr><td class="num" id="LN2010">2010</td><td class="line">                tmpLocaleID = cntryID;</td></tr>
<tr><td class="num" id="LN2011">2011</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2012">2012</td><td class="line">            <span class='keyword'>if</span>(<span class='macro'>_isIDSeparator(*tmpLocaleID)<span class='expansion'>(*tmpLocaleID == '_' || *tmpLocaleID == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN2013">2013</td><td class="line">                <span class='comment'>/* If there was no country ID, skip a possible extra IDSeparator */</span></td></tr>
<tr><td class="num" id="LN2014">2014</td><td class="line">                <span class='keyword'>if</span> (tmpLocaleID != cntryID &amp;&amp; <span class='macro'>_isIDSeparator(tmpLocaleID[1])<span class='expansion'>(tmpLocaleID[1] == '_' || tmpLocaleID[1] == '-')</span></span>) {</td></tr>
<tr><td class="num" id="LN2015">2015</td><td class="line">                    tmpLocaleID++;</td></tr>
<tr><td class="num" id="LN2016">2016</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2017">2017</td><td class="line">                i=_getVariant(tmpLocaleID+1, *tmpLocaleID, variant, variantCapacity);</td></tr>
<tr><td class="num" id="LN2018">2018</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2019">2019</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2020">2020</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2021">2021</td><td class="line">    </td></tr>
<tr><td class="num" id="LN2022">2022</td><td class="line">    <span class='comment'>/* removed by weiv. We don't want to handle POSIX variants anymore. Use canonicalization function */</span></td></tr>
<tr><td class="num" id="LN2023">2023</td><td class="line">    <span class='comment'>/* if we do not have a variant tag yet then try a POSIX variant after '@' */</span></td></tr>
<tr><td class="num" id="LN2024">2024</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr><td class="num" id="LN2025">2025</td><td class="line">    <span class='comment'>if(!haveVariant &amp;&amp; (localeID=uprv_strrchr(localeID, '@'))!=NULL) {</span></td></tr>
<tr><td class="num" id="LN2026">2026</td><td class="line">        <span class='comment'>i=_getVariant(localeID+1, '@', variant, variantCapacity);</span></td></tr>
<tr><td class="num" id="LN2027">2027</td><td class="line">    <span class='comment'>}</span></td></tr>
<tr><td class="num" id="LN2028">2028</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN2029">2029</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(variant, variantCapacity, i, err);</td></tr>
<tr><td class="num" id="LN2030">2030</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2031">2031</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2032">2032</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2033">2033</td><td class="line"><span class='macro'>uloc_getName<span class='expansion'>uloc_getName_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN2034">2034</td><td class="line">             <span class='keyword'>char</span>* name,</td></tr>
<tr><td class="num" id="LN2035">2035</td><td class="line">             int32_t nameCapacity,</td></tr>
<tr><td class="num" id="LN2036">2036</td><td class="line">             UErrorCode* err)  </td></tr>
<tr><td class="num" id="LN2037">2037</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2038">2038</td><td class="line">    <span class='keyword'>return</span> _canonicalize(localeID, name, nameCapacity, 0, err);</td></tr>
<tr><td class="num" id="LN2039">2039</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2040">2040</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2041">2041</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2042">2042</td><td class="line"><span class='macro'>uloc_getBaseName<span class='expansion'>uloc_getBaseName_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN2043">2043</td><td class="line">                 <span class='keyword'>char</span>* name,</td></tr>
<tr><td class="num" id="LN2044">2044</td><td class="line">                 int32_t nameCapacity,</td></tr>
<tr><td class="num" id="LN2045">2045</td><td class="line">                 UErrorCode* err)  </td></tr>
<tr><td class="num" id="LN2046">2046</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2047">2047</td><td class="line">    <span class='keyword'>return</span> _canonicalize(localeID, name, nameCapacity, <span class='macro'>_ULOC_STRIP_KEYWORDS<span class='expansion'>0x2</span></span>, err);</td></tr>
<tr><td class="num" id="LN2048">2048</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2049">2049</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2050">2050</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2051">2051</td><td class="line"><span class='macro'>uloc_canonicalize<span class='expansion'>uloc_canonicalize_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID,</td></tr>
<tr><td class="num" id="LN2052">2052</td><td class="line">                  <span class='keyword'>char</span>* name,</td></tr>
<tr><td class="num" id="LN2053">2053</td><td class="line">                  int32_t nameCapacity,</td></tr>
<tr><td class="num" id="LN2054">2054</td><td class="line">                  UErrorCode* err)  </td></tr>
<tr><td class="num" id="LN2055">2055</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2056">2056</td><td class="line">    <span class='keyword'>return</span> _canonicalize(localeID, name, nameCapacity, <span class='macro'>_ULOC_CANONICALIZE<span class='expansion'>0x1</span></span>, err);</td></tr>
<tr><td class="num" id="LN2057">2057</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2058">2058</td><td class="line">  </td></tr>
<tr><td class="num" id="LN2059">2059</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>*  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2060">2060</td><td class="line"><span class='macro'>uloc_getISO3Language<span class='expansion'>uloc_getISO3Language_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID) </td></tr>
<tr><td class="num" id="LN2061">2061</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2062">2062</td><td class="line">    int16_t offset;</td></tr>
<tr><td class="num" id="LN2063">2063</td><td class="line">    <span class='keyword'>char</span> lang[<span class='macro'>ULOC_LANG_CAPACITY<span class='expansion'>12</span></span>];</td></tr>
<tr><td class="num" id="LN2064">2064</td><td class="line">    UErrorCode err = U_ZERO_ERROR;</td></tr>
<tr><td class="num" id="LN2065">2065</td><td class="line">    </td></tr>
<tr><td class="num" id="LN2066">2066</td><td class="line">    <span class='keyword'>if</span> (localeID == <span class='macro'>NULL<span class='expansion'>__null</span></span>)</td></tr>
<tr><td class="num" id="LN2067">2067</td><td class="line">    {</td></tr>
<tr><td class="num" id="LN2068">2068</td><td class="line">        localeID = <span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN2069">2069</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2070">2070</td><td class="line">    <span class='macro'>uloc_getLanguage<span class='expansion'>uloc_getLanguage_54</span></span>(localeID, lang, <span class='macro'>ULOC_LANG_CAPACITY<span class='expansion'>12</span></span>, &amp;err);</td></tr>
<tr><td class="num" id="LN2071">2071</td><td class="line">    <span class='keyword'>if</span> (U_FAILURE(err))</td></tr>
<tr><td class="num" id="LN2072">2072</td><td class="line">        <span class='keyword'>return</span> <span class='string_literal'>""</span>;</td></tr>
<tr><td class="num" id="LN2073">2073</td><td class="line">    offset = _findIndex(LANGUAGES, lang);</td></tr>
<tr><td class="num" id="LN2074">2074</td><td class="line">    <span class='keyword'>if</span> (offset &lt; 0)</td></tr>
<tr><td class="num" id="LN2075">2075</td><td class="line">        <span class='keyword'>return</span> <span class='string_literal'>""</span>;</td></tr>
<tr><td class="num" id="LN2076">2076</td><td class="line">    <span class='keyword'>return</span> LANGUAGES_3[offset];</td></tr>
<tr><td class="num" id="LN2077">2077</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2078">2078</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2079">2079</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>*  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2080">2080</td><td class="line"><span class='macro'>uloc_getISO3Country<span class='expansion'>uloc_getISO3Country_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID) </td></tr>
<tr><td class="num" id="LN2081">2081</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2082">2082</td><td class="line">    int16_t offset;</td></tr>
<tr><td class="num" id="LN2083">2083</td><td class="line">    <span class='keyword'>char</span> cntry[<span class='macro'>ULOC_LANG_CAPACITY<span class='expansion'>12</span></span>];</td></tr>
<tr><td class="num" id="LN2084">2084</td><td class="line">    UErrorCode err = U_ZERO_ERROR;</td></tr>
<tr><td class="num" id="LN2085">2085</td><td class="line">    </td></tr>
<tr><td class="num" id="LN2086">2086</td><td class="line">    <span class='keyword'>if</span> (localeID == <span class='macro'>NULL<span class='expansion'>__null</span></span>)</td></tr>
<tr><td class="num" id="LN2087">2087</td><td class="line">    {</td></tr>
<tr><td class="num" id="LN2088">2088</td><td class="line">        localeID = <span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>();</td></tr>
<tr><td class="num" id="LN2089">2089</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2090">2090</td><td class="line">    <span class='macro'>uloc_getCountry<span class='expansion'>uloc_getCountry_54</span></span>(localeID, cntry, <span class='macro'>ULOC_LANG_CAPACITY<span class='expansion'>12</span></span>, &amp;err);</td></tr>
<tr><td class="num" id="LN2091">2091</td><td class="line">    <span class='keyword'>if</span> (U_FAILURE(err))</td></tr>
<tr><td class="num" id="LN2092">2092</td><td class="line">        <span class='keyword'>return</span> <span class='string_literal'>""</span>;</td></tr>
<tr><td class="num" id="LN2093">2093</td><td class="line">    offset = _findIndex(COUNTRIES, cntry);</td></tr>
<tr><td class="num" id="LN2094">2094</td><td class="line">    <span class='keyword'>if</span> (offset &lt; 0)</td></tr>
<tr><td class="num" id="LN2095">2095</td><td class="line">        <span class='keyword'>return</span> <span class='string_literal'>""</span>;</td></tr>
<tr><td class="num" id="LN2096">2096</td><td class="line">    </td></tr>
<tr><td class="num" id="LN2097">2097</td><td class="line">    <span class='keyword'>return</span> COUNTRIES_3[offset];</td></tr>
<tr><td class="num" id="LN2098">2098</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2099">2099</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2100">2100</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> uint32_t  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2101">2101</td><td class="line"><span class='macro'>uloc_getLCID<span class='expansion'>uloc_getLCID_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* localeID) </td></tr>
<tr><td class="num" id="LN2102">2102</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2103">2103</td><td class="line">    UErrorCode status = U_ZERO_ERROR;</td></tr>
<tr><td class="num" id="LN2104">2104</td><td class="line">    <span class='keyword'>char</span>       langID[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN2105">2105</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2106">2106</td><td class="line">    <span class='macro'>uloc_getLanguage<span class='expansion'>uloc_getLanguage_54</span></span>(localeID, langID, <span class='keyword'>sizeof</span>(langID), &amp;status);</td></tr>
<tr><td class="num" id="LN2107">2107</td><td class="line">    <span class='keyword'>if</span> (U_FAILURE(status)) {</td></tr>
<tr><td class="num" id="LN2108">2108</td><td class="line">        <span class='keyword'>return</span> 0;</td></tr>
<tr><td class="num" id="LN2109">2109</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2110">2110</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2111">2111</td><td class="line">    <span class='keyword'>if</span> (<span class='macro'>uprv_strchr(localeID, '@')<span class='expansion'>:: strchr(localeID, '@')</span></span>) {</td></tr>
<tr><td class="num" id="LN2112">2112</td><td class="line">        <span class='comment'>// uprv_convertToLCID does not support keywords other than collation.</span></td></tr>
<tr><td class="num" id="LN2113">2113</td><td class="line">        <span class='comment'>// Remove all keywords except collation.</span></td></tr>
<tr><td class="num" id="LN2114">2114</td><td class="line">        int32_t len;</td></tr>
<tr><td class="num" id="LN2115">2115</td><td class="line">        <span class='keyword'>char</span> collVal[<span class='macro'>ULOC_KEYWORDS_CAPACITY<span class='expansion'>96</span></span>];</td></tr>
<tr><td class="num" id="LN2116">2116</td><td class="line">        <span class='keyword'>char</span> tmpLocaleID[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>];</td></tr>
<tr><td class="num" id="LN2117">2117</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2118">2118</td><td class="line">        len = <span class='macro'>uloc_getKeywordValue<span class='expansion'>uloc_getKeywordValue_54</span></span>(localeID, <span class='string_literal'>"collation"</span>, collVal,</td></tr>
<tr><td class="num" id="LN2119">2119</td><td class="line">            <span class='keyword'>sizeof</span>(collVal)/<span class='keyword'>sizeof</span>(collVal[0]) - 1, &amp;status);</td></tr>
<tr><td class="num" id="LN2120">2120</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2121">2121</td><td class="line">        <span class='keyword'>if</span> (U_SUCCESS(status) &amp;&amp; len &gt; 0) {</td></tr>
<tr><td class="num" id="LN2122">2122</td><td class="line">            collVal[len] = 0;</td></tr>
<tr><td class="num" id="LN2123">2123</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2124">2124</td><td class="line">            len = <span class='macro'>uloc_getBaseName<span class='expansion'>uloc_getBaseName_54</span></span>(localeID, tmpLocaleID,</td></tr>
<tr><td class="num" id="LN2125">2125</td><td class="line">                <span class='keyword'>sizeof</span>(tmpLocaleID)/<span class='keyword'>sizeof</span>(tmpLocaleID[0]) - 1, &amp;status);</td></tr>
<tr><td class="num" id="LN2126">2126</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2127">2127</td><td class="line">            <span class='keyword'>if</span> (U_SUCCESS(status)) {</td></tr>
<tr><td class="num" id="LN2128">2128</td><td class="line">                tmpLocaleID[len] = 0;</td></tr>
<tr><td class="num" id="LN2129">2129</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2130">2130</td><td class="line">                len = <span class='macro'>uloc_setKeywordValue<span class='expansion'>uloc_setKeywordValue_54</span></span>(<span class='string_literal'>"collation"</span>, collVal, tmpLocaleID,</td></tr>
<tr><td class="num" id="LN2131">2131</td><td class="line">                    <span class='keyword'>sizeof</span>(tmpLocaleID)/<span class='keyword'>sizeof</span>(tmpLocaleID[0]) - len - 1, &amp;status);</td></tr>
<tr><td class="num" id="LN2132">2132</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2133">2133</td><td class="line">                <span class='keyword'>if</span> (U_SUCCESS(status)) {</td></tr>
<tr><td class="num" id="LN2134">2134</td><td class="line">                    tmpLocaleID[len] = 0;</td></tr>
<tr><td class="num" id="LN2135">2135</td><td class="line">                    <span class='keyword'>return</span> <span class='macro'>uprv_convertToLCID<span class='expansion'>uprv_convertToLCID_54</span></span>(langID, tmpLocaleID, &amp;status);</td></tr>
<tr><td class="num" id="LN2136">2136</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2137">2137</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2138">2138</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2139">2139</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2140">2140</td><td class="line">        <span class='comment'>// fall through - all keywords are simply ignored</span></td></tr>
<tr><td class="num" id="LN2141">2141</td><td class="line">        status = U_ZERO_ERROR;</td></tr>
<tr><td class="num" id="LN2142">2142</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2143">2143</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2144">2144</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>uprv_convertToLCID<span class='expansion'>uprv_convertToLCID_54</span></span>(langID, localeID, &amp;status);</td></tr>
<tr><td class="num" id="LN2145">2145</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2146">2146</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2147">2147</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN2148">2148</td><td class="line"><span class='macro'>uloc_getLocaleForLCID<span class='expansion'>uloc_getLocaleForLCID_54</span></span>(uint32_t hostid, <span class='keyword'>char</span> *locale, int32_t localeCapacity,</td></tr>
<tr><td class="num" id="LN2149">2149</td><td class="line">                UErrorCode *status)</td></tr>
<tr><td class="num" id="LN2150">2150</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2151">2151</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>uprv_convertToPosix<span class='expansion'>uprv_convertToPosix_54</span></span>(hostid, locale, localeCapacity, status);</td></tr>
<tr><td class="num" id="LN2152">2152</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2153">2153</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2154">2154</td><td class="line"><span class='comment'>/* ### Default locale **************************************************/</span></td></tr>
<tr><td class="num" id="LN2155">2155</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2156">2156</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>*  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2157">2157</td><td class="line"><span class='macro'>uloc_getDefault<span class='expansion'>uloc_getDefault_54</span></span>()</td></tr>
<tr><td class="num" id="LN2158">2158</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2159">2159</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>locale_get_default<span class='expansion'>locale_get_default_54</span></span>();</td></tr>
<tr><td class="num" id="LN2160">2160</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2161">2161</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2162">2162</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>void</span>  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2163">2163</td><td class="line"><span class='macro'>uloc_setDefault<span class='expansion'>uloc_setDefault_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>*   newDefaultLocale,</td></tr>
<tr><td class="num" id="LN2164">2164</td><td class="line">             UErrorCode* err) </td></tr>
<tr><td class="num" id="LN2165">2165</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2166">2166</td><td class="line">    <span class='keyword'>if</span> (U_FAILURE(*err))</td></tr>
<tr><td class="num" id="LN2167">2167</td><td class="line">        <span class='keyword'>return</span>;</td></tr>
<tr><td class="num" id="LN2168">2168</td><td class="line">    <span class='comment'>/* the error code isn't currently used for anything by this function*/</span></td></tr>
<tr><td class="num" id="LN2169">2169</td><td class="line">    </td></tr>
<tr><td class="num" id="LN2170">2170</td><td class="line">    <span class='comment'>/* propagate change to C++ */</span></td></tr>
<tr><td class="num" id="LN2171">2171</td><td class="line">    <span class='macro'>locale_set_default<span class='expansion'>locale_set_default_54</span></span>(newDefaultLocale);</td></tr>
<tr><td class="num" id="LN2172">2172</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2173">2173</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2174">2174</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN2175">2175</td><td class="line"> <span class='comment'>* Returns a list of all 2-letter language codes defined in ISO 639.  This is a pointer</span></td></tr>
<tr><td class="num" id="LN2176">2176</td><td class="line"> <span class='comment'>* to an array of pointers to arrays of char.  All of these pointers are owned</span></td></tr>
<tr><td class="num" id="LN2177">2177</td><td class="line"> <span class='comment'>* by ICU-- do not delete them, and do not write through them.  The array is</span></td></tr>
<tr><td class="num" id="LN2178">2178</td><td class="line"> <span class='comment'>* terminated with a null pointer.</span></td></tr>
<tr><td class="num" id="LN2179">2179</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN2180">2180</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span>*  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2181">2181</td><td class="line"><span class='macro'>uloc_getISOLanguages<span class='expansion'>uloc_getISOLanguages_54</span></span>() </td></tr>
<tr><td class="num" id="LN2182">2182</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2183">2183</td><td class="line">    <span class='keyword'>return</span> LANGUAGES;</td></tr>
<tr><td class="num" id="LN2184">2184</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2185">2185</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2186">2186</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr><td class="num" id="LN2187">2187</td><td class="line"> <span class='comment'>* Returns a list of all 2-letter country codes defined in ISO 639.  This is a</span></td></tr>
<tr><td class="num" id="LN2188">2188</td><td class="line"> <span class='comment'>* pointer to an array of pointers to arrays of char.  All of these pointers are</span></td></tr>
<tr><td class="num" id="LN2189">2189</td><td class="line"> <span class='comment'>* owned by ICU-- do not delete them, and do not write through them.  The array is</span></td></tr>
<tr><td class="num" id="LN2190">2190</td><td class="line"> <span class='comment'>* terminated with a null pointer.</span></td></tr>
<tr><td class="num" id="LN2191">2191</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN2192">2192</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* <span class='keyword'>const</span>*  U_EXPORT2</td></tr>
<tr><td class="num" id="LN2193">2193</td><td class="line"><span class='macro'>uloc_getISOCountries<span class='expansion'>uloc_getISOCountries_54</span></span>() </td></tr>
<tr><td class="num" id="LN2194">2194</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2195">2195</td><td class="line">    <span class='keyword'>return</span> COUNTRIES;</td></tr>
<tr><td class="num" id="LN2196">2196</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2197">2197</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2198">2198</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2199">2199</td><td class="line"><span class='comment'>/* this function to be moved into cstring.c later */</span></td></tr>
<tr><td class="num" id="LN2200">2200</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>char</span> gDecimal = 0;</td></tr>
<tr><td class="num" id="LN2201">2201</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2202">2202</td><td class="line"><span class='keyword'>static</span> <span class='comment'>/* U_CAPI */</span></td></tr>
<tr><td class="num" id="LN2203">2203</td><td class="line"><span class='keyword'>double</span></td></tr>
<tr><td class="num" id="LN2204">2204</td><td class="line"><span class='comment'>/* U_EXPORT2 */</span></td></tr>
<tr><td class="num" id="LN2205">2205</td><td class="line">_uloc_strtod(<span class='keyword'>const</span> <span class='keyword'>char</span> *start, <span class='keyword'>char</span> **end) {</td></tr>
<tr><td class="num" id="LN2206">2206</td><td class="line">    <span class='keyword'>char</span> *decimal;</td></tr>
<tr><td class="num" id="LN2207">2207</td><td class="line">    <span class='keyword'>char</span> *myEnd;</td></tr>
<tr><td class="num" id="LN2208">2208</td><td class="line">    <span class='keyword'>char</span> buf[30];</td></tr>
<tr><td class="num" id="LN2209">2209</td><td class="line">    <span class='keyword'>double</span> rv;</td></tr>
<tr><td class="num" id="LN2210">2210</td><td class="line">    <span class='keyword'>if</span> (!gDecimal) {</td></tr>
<tr><td class="num" id="LN2211">2211</td><td class="line">        <span class='keyword'>char</span> rep[5];</td></tr>
<tr><td class="num" id="LN2212">2212</td><td class="line">        <span class='comment'>/* For machines that decide to change the decimal on you,</span></td></tr>
<tr><td class="num" id="LN2213">2213</td><td class="line">        <span class='comment'>and try to be too smart with localization.</span></td></tr>
<tr><td class="num" id="LN2214">2214</td><td class="line">        <span class='comment'>This normally should be just a '.'. */</span></td></tr>
<tr><td class="num" id="LN2215">2215</td><td class="line">        sprintf(rep, <span class='string_literal'>"%+1.1f"</span>, 1.0);</td></tr>
<tr><td class="num" id="LN2216">2216</td><td class="line">        gDecimal = rep[2];</td></tr>
<tr><td class="num" id="LN2217">2217</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2218">2218</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2219">2219</td><td class="line">    <span class='keyword'>if</span>(gDecimal == '.') {</td></tr>
<tr><td class="num" id="LN2220">2220</td><td class="line">        <span class='keyword'>return</span> <span class='macro'>uprv_strtod(start, end)<span class='expansion'>:: strtod(start, end)</span></span>; <span class='comment'>/* fall through to OS */</span></td></tr>
<tr><td class="num" id="LN2221">2221</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2222">2222</td><td class="line">        <span class='macro'>uprv_strncpy(buf, start, 29)<span class='expansion'>:: strncpy(buf, start, 29)</span></span>;</td></tr>
<tr><td class="num" id="LN2223">2223</td><td class="line">        buf[29]=0;</td></tr>
<tr><td class="num" id="LN2224">2224</td><td class="line">        decimal = <span class='macro'>uprv_strchr(buf, '.')<span class='expansion'>:: strchr(buf, '.')</span></span>;</td></tr>
<tr><td class="num" id="LN2225">2225</td><td class="line">        <span class='keyword'>if</span>(decimal) {</td></tr>
<tr><td class="num" id="LN2226">2226</td><td class="line">            *decimal = gDecimal;</td></tr>
<tr><td class="num" id="LN2227">2227</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2228">2228</td><td class="line">            <span class='keyword'>return</span> <span class='macro'>uprv_strtod(start, end)<span class='expansion'>:: strtod(start, end)</span></span>; <span class='comment'>/* no decimal point */</span></td></tr>
<tr><td class="num" id="LN2229">2229</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2230">2230</td><td class="line">        rv = <span class='macro'>uprv_strtod(buf, &amp;myEnd)<span class='expansion'>:: strtod(buf, &amp;myEnd)</span></span>;</td></tr>
<tr><td class="num" id="LN2231">2231</td><td class="line">        <span class='keyword'>if</span>(end) {</td></tr>
<tr><td class="num" id="LN2232">2232</td><td class="line">            *end = (<span class='keyword'>char</span>*)(start+(myEnd-buf)); <span class='comment'>/* cast away const (to follow uprv_strtod API.) */</span></td></tr>
<tr><td class="num" id="LN2233">2233</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2234">2234</td><td class="line">        <span class='keyword'>return</span> rv;</td></tr>
<tr><td class="num" id="LN2235">2235</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2236">2236</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2237">2237</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2238">2238</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>struct</span> { </td></tr>
<tr><td class="num" id="LN2239">2239</td><td class="line">    <span class='keyword'>float</span> q;</td></tr>
<tr><td class="num" id="LN2240">2240</td><td class="line">    int32_t dummy;  <span class='comment'>/* to avoid uninitialized memory copy from qsort */</span></td></tr>
<tr><td class="num" id="LN2241">2241</td><td class="line">    <span class='keyword'>char</span> *locale;</td></tr>
<tr><td class="num" id="LN2242">2242</td><td class="line">} _acceptLangItem;</td></tr>
<tr><td class="num" id="LN2243">2243</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2244">2244</td><td class="line"><span class='keyword'>static</span> int32_t U_CALLCONV</td></tr>
<tr><td class="num" id="LN2245">2245</td><td class="line">uloc_acceptLanguageCompare(<span class='keyword'>const</span> <span class='keyword'>void</span> * <span class='comment'>/*context*/</span>, <span class='keyword'>const</span> <span class='keyword'>void</span> *a, <span class='keyword'>const</span> <span class='keyword'>void</span> *b)</td></tr>
<tr><td class="num" id="LN2246">2246</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2247">2247</td><td class="line">    <span class='keyword'>const</span> _acceptLangItem *aa = (<span class='keyword'>const</span> _acceptLangItem*)a;</td></tr>
<tr><td class="num" id="LN2248">2248</td><td class="line">    <span class='keyword'>const</span> _acceptLangItem *bb = (<span class='keyword'>const</span> _acceptLangItem*)b;</td></tr>
<tr><td class="num" id="LN2249">2249</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2250">2250</td><td class="line">    int32_t rc = 0;</td></tr>
<tr><td class="num" id="LN2251">2251</td><td class="line">    <span class='keyword'>if</span>(bb-&gt;q &lt; aa-&gt;q) {</td></tr>
<tr><td class="num" id="LN2252">2252</td><td class="line">        rc = -1;  <span class='comment'>/* A &gt; B */</span></td></tr>
<tr><td class="num" id="LN2253">2253</td><td class="line">    } <span class='keyword'>else</span> <span class='keyword'>if</span>(bb-&gt;q &gt; aa-&gt;q) {</td></tr>
<tr><td class="num" id="LN2254">2254</td><td class="line">        rc = 1;   <span class='comment'>/* A &lt; B */</span></td></tr>
<tr><td class="num" id="LN2255">2255</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2256">2256</td><td class="line">        rc = 0;   <span class='comment'>/* A = B */</span></td></tr>
<tr><td class="num" id="LN2257">2257</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2258">2258</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2259">2259</td><td class="line">    <span class='keyword'>if</span>(rc==0) {</td></tr>
<tr><td class="num" id="LN2260">2260</td><td class="line">        rc = <span class='macro'>uprv_stricmp<span class='expansion'>uprv_stricmp_54</span></span>(aa-&gt;locale, bb-&gt;locale);</td></tr>
<tr><td class="num" id="LN2261">2261</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2262">2262</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2263">2263</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2264">2264</td><td class="line">    <span class='comment'>/*  fprintf(stderr, "a:[%s:%g], b:[%s:%g] -&gt; %d\n",</span> </td></tr>
<tr><td class="num" id="LN2265">2265</td><td class="line">    <span class='comment'>aa-&gt;locale, aa-&gt;q,</span> </td></tr>
<tr><td class="num" id="LN2266">2266</td><td class="line">    <span class='comment'>bb-&gt;locale, bb-&gt;q,</span></td></tr>
<tr><td class="num" id="LN2267">2267</td><td class="line">    <span class='comment'>rc);*/</span></td></tr>
<tr><td class="num" id="LN2268">2268</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2269">2269</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2270">2270</td><td class="line">    <span class='keyword'>return</span> rc;</td></tr>
<tr><td class="num" id="LN2271">2271</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2272">2272</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2273">2273</td><td class="line"><span class='comment'>/*</span> </td></tr>
<tr><td class="num" id="LN2274">2274</td><td class="line"><span class='comment'>mt-mt, ja;q=0.76, en-us;q=0.95, en;q=0.92, en-gb;q=0.89, fr;q=0.87, iu-ca;q=0.84, iu;q=0.82, ja-jp;q=0.79, mt;q=0.97, de-de;q=0.74, de;q=0.71, es;q=0.68, it-it;q=0.66, it;q=0.63, vi-vn;q=0.61, vi;q=0.58, nl-nl;q=0.55, nl;q=0.53</span></td></tr>
<tr><td class="num" id="LN2275">2275</td><td class="line"><span class='comment'>*/</span></td></tr>
<tr><td class="num" id="LN2276">2276</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2277">2277</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN2278">2278</td><td class="line"><span class='macro'>uloc_acceptLanguageFromHTTP<span class='expansion'>uloc_acceptLanguageFromHTTP_54</span></span>(<span class='keyword'>char</span> *result, int32_t resultAvailable, UAcceptResult *outResult,</td></tr>
<tr><td class="num" id="LN2279">2279</td><td class="line">                            <span class='keyword'>const</span> <span class='keyword'>char</span> *httpAcceptLanguage,</td></tr>
<tr><td class="num" id="LN2280">2280</td><td class="line">                            UEnumeration* availableLocales,</td></tr>
<tr><td class="num" id="LN2281">2281</td><td class="line">                            UErrorCode *status)</td></tr>
<tr><td class="num" id="LN2282">2282</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2283">2283</td><td class="line">    _acceptLangItem *j;</td></tr>
<tr><td class="num" id="LN2284">2284</td><td class="line">    _acceptLangItem smallBuffer[30];</td></tr>
<tr><td class="num" id="LN2285">2285</td><td class="line">    <span class='keyword'>char</span> **strs;</td></tr>
<tr><td class="num" id="LN2286">2286</td><td class="line">    <span class='keyword'>char</span> tmp[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span> +1];</td></tr>
<tr><td class="num" id="LN2287">2287</td><td class="line">    int32_t n = 0;</td></tr>
<tr><td class="num" id="LN2288">2288</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *itemEnd;</td></tr>
<tr><td class="num" id="LN2289">2289</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *paramEnd;</td></tr>
<tr><td class="num" id="LN2290">2290</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *s;</td></tr>
<tr><td class="num" id="LN2291">2291</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *t;</td></tr>
<tr><td class="num" id="LN2292">2292</td><td class="line">    int32_t res;</td></tr>
<tr><td class="num" id="LN2293">2293</td><td class="line">    int32_t i;</td></tr>
<tr><td class="num" id="LN2294">2294</td><td class="line">    int32_t l = (int32_t)<span class='macro'>uprv_strlen(httpAcceptLanguage)<span class='expansion'>:: strlen(httpAcceptLanguage)</span></span>;</td></tr>
<tr><td class="num" id="LN2295">2295</td><td class="line">    int32_t jSize;</td></tr>
<tr><td class="num" id="LN2296">2296</td><td class="line">    <span class='keyword'>char</span> *tempstr; <span class='comment'>/* Use for null pointer check */</span></td></tr>
<tr><td class="num" id="LN2297">2297</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2298">2298</td><td class="line">    j = smallBuffer;</td></tr>
<tr><td class="num" id="LN2299">2299</td><td class="line">    jSize = <span class='keyword'>sizeof</span>(smallBuffer)/<span class='keyword'>sizeof</span>(smallBuffer[0]);</td></tr>
<tr><td class="num" id="LN2300">2300</td><td class="line">    <span class='keyword'>if</span>(U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN2301">2301</td><td class="line">        <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2302">2302</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2303">2303</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2304">2304</td><td class="line">    <span class='keyword'>for</span>(s=httpAcceptLanguage;s&amp;&amp;*s;) {</td></tr>
<tr><td class="num" id="LN2305">2305</td><td class="line">        <span class='keyword'>while</span>(isspace(*s)) <span class='comment'>/* eat space at the beginning */</span></td></tr>
<tr><td class="num" id="LN2306">2306</td><td class="line">            s++;</td></tr>
<tr><td class="num" id="LN2307">2307</td><td class="line">        itemEnd=<span class='macro'>uprv_strchr(s,',')<span class='expansion'>:: strchr(s, ',')</span></span>;</td></tr>
<tr><td class="num" id="LN2308">2308</td><td class="line">        paramEnd=<span class='macro'>uprv_strchr(s,';')<span class='expansion'>:: strchr(s, ';')</span></span>;</td></tr>
<tr><td class="num" id="LN2309">2309</td><td class="line">        <span class='keyword'>if</span>(!itemEnd) {</td></tr>
<tr><td class="num" id="LN2310">2310</td><td class="line">            itemEnd = httpAcceptLanguage+l; <span class='comment'>/* end of string */</span></td></tr>
<tr><td class="num" id="LN2311">2311</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2312">2312</td><td class="line">        <span class='keyword'>if</span>(paramEnd &amp;&amp; paramEnd&lt;itemEnd) { </td></tr>
<tr><td class="num" id="LN2313">2313</td><td class="line">            <span class='comment'>/* semicolon (;) is closer than end (,) */</span></td></tr>
<tr><td class="num" id="LN2314">2314</td><td class="line">            t = paramEnd+1;</td></tr>
<tr><td class="num" id="LN2315">2315</td><td class="line">            <span class='keyword'>if</span>(*t=='q') {</td></tr>
<tr><td class="num" id="LN2316">2316</td><td class="line">                t++;</td></tr>
<tr><td class="num" id="LN2317">2317</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2318">2318</td><td class="line">            <span class='keyword'>while</span>(isspace(*t)) {</td></tr>
<tr><td class="num" id="LN2319">2319</td><td class="line">                t++;</td></tr>
<tr><td class="num" id="LN2320">2320</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2321">2321</td><td class="line">            <span class='keyword'>if</span>(*t=='=') {</td></tr>
<tr><td class="num" id="LN2322">2322</td><td class="line">                t++;</td></tr>
<tr><td class="num" id="LN2323">2323</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2324">2324</td><td class="line">            <span class='keyword'>while</span>(isspace(*t)) {</td></tr>
<tr><td class="num" id="LN2325">2325</td><td class="line">                t++;</td></tr>
<tr><td class="num" id="LN2326">2326</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2327">2327</td><td class="line">            j[n].q = (<span class='keyword'>float</span>)_uloc_strtod(t,<span class='macro'>NULL<span class='expansion'>__null</span></span>);</td></tr>
<tr><td class="num" id="LN2328">2328</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2329">2329</td><td class="line">            <span class='comment'>/* no semicolon - it's 1.0 */</span></td></tr>
<tr><td class="num" id="LN2330">2330</td><td class="line">            j[n].q = 1.0f;</td></tr>
<tr><td class="num" id="LN2331">2331</td><td class="line">            paramEnd = itemEnd;</td></tr>
<tr><td class="num" id="LN2332">2332</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2333">2333</td><td class="line">        j[n].dummy=0;</td></tr>
<tr><td class="num" id="LN2334">2334</td><td class="line">        <span class='comment'>/* eat spaces prior to semi */</span></td></tr>
<tr><td class="num" id="LN2335">2335</td><td class="line">        <span class='keyword'>for</span>(t=(paramEnd-1);(paramEnd&gt;s)&amp;&amp;isspace(*t);t--)</td></tr>
<tr><td class="num" id="LN2336">2336</td><td class="line">            ;</td></tr>
<tr><td class="num" id="LN2337">2337</td><td class="line">        <span class='comment'>/* Check for null pointer from uprv_strndup */</span></td></tr>
<tr><td class="num" id="LN2338">2338</td><td class="line">        tempstr = <span class='macro'>uprv_strndup<span class='expansion'>uprv_strndup_54</span></span>(s,(int32_t)((t+1)-s));</td></tr>
<tr><td class="num" id="LN2339">2339</td><td class="line">        <span class='keyword'>if</span> (tempstr == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2340">2340</td><td class="line">            *status = U_MEMORY_ALLOCATION_ERROR;</td></tr>
<tr><td class="num" id="LN2341">2341</td><td class="line">            <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2342">2342</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2343">2343</td><td class="line">        j[n].locale = tempstr;</td></tr>
<tr><td class="num" id="LN2344">2344</td><td class="line">        <span class='macro'>uloc_canonicalize<span class='expansion'>uloc_canonicalize_54</span></span>(j[n].locale,tmp,<span class='keyword'>sizeof</span>(tmp)/<span class='keyword'>sizeof</span>(tmp[0]),status);</td></tr>
<tr><td class="num" id="LN2345">2345</td><td class="line">        <span class='keyword'>if</span>(strcmp(j[n].locale,tmp)) {</td></tr>
<tr><td class="num" id="LN2346">2346</td><td class="line">            <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(j[n].locale);</td></tr>
<tr><td class="num" id="LN2347">2347</td><td class="line">            j[n].locale=<span class='macro'>uprv_strdup<span class='expansion'>uprv_strdup_54</span></span>(tmp);</td></tr>
<tr><td class="num" id="LN2348">2348</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2349">2349</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2350">2350</td><td class="line">        <span class='comment'>/*fprintf(stderr,"%d: s &lt;%s&gt; q &lt;%g&gt;\n", n, j[n].locale, j[n].q);*/</span></td></tr>
<tr><td class="num" id="LN2351">2351</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2352">2352</td><td class="line">        n++;</td></tr>
<tr><td class="num" id="LN2353">2353</td><td class="line">        s = itemEnd;</td></tr>
<tr><td class="num" id="LN2354">2354</td><td class="line">        <span class='keyword'>while</span>(*s==',') { <span class='comment'>/* eat duplicate commas */</span></td></tr>
<tr><td class="num" id="LN2355">2355</td><td class="line">            s++;</td></tr>
<tr><td class="num" id="LN2356">2356</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2357">2357</td><td class="line">        <span class='keyword'>if</span>(n&gt;=jSize) {</td></tr>
<tr><td class="num" id="LN2358">2358</td><td class="line">            <span class='keyword'>if</span>(j==smallBuffer) {  <span class='comment'>/* overflowed the small buffer. */</span></td></tr>
<tr><td class="num" id="LN2359">2359</td><td class="line">                j = <span class='keyword'>static_cast</span>&lt;_acceptLangItem *&gt;(<span class='macro'>uprv_malloc<span class='expansion'>uprv_malloc_54</span></span>(<span class='keyword'>sizeof</span>(j[0])*(jSize*2)));</td></tr>
<tr><td class="num" id="LN2360">2360</td><td class="line">                <span class='keyword'>if</span>(j!=<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2361">2361</td><td class="line">                    <span class='macro'>uprv_memcpy(j,smallBuffer,<span class='keyword'>sizeof</span>(j[0])*jSize)<span class='expansion'>:: memcpy(j, smallBuffer, sizeof(j[0])*jSize)</span></span>;</td></tr>
<tr><td class="num" id="LN2362">2362</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2363">2363</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2364">2364</td><td class="line">                fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"malloced at size %d\n"</span>, jSize);</td></tr>
<tr><td class="num" id="LN2365">2365</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2366">2366</td><td class="line">            } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2367">2367</td><td class="line">                j = <span class='keyword'>static_cast</span>&lt;_acceptLangItem *&gt;(<span class='macro'>uprv_realloc<span class='expansion'>uprv_realloc_54</span></span>(j, <span class='keyword'>sizeof</span>(j[0])*jSize*2));</td></tr>
<tr><td class="num" id="LN2368">2368</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2369">2369</td><td class="line">                fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"re-alloced at size %d\n"</span>, jSize);</td></tr>
<tr><td class="num" id="LN2370">2370</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2371">2371</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2372">2372</td><td class="line">            jSize *= 2;</td></tr>
<tr><td class="num" id="LN2373">2373</td><td class="line">            <span class='keyword'>if</span>(j==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2374">2374</td><td class="line">                *status = U_MEMORY_ALLOCATION_ERROR;</td></tr>
<tr><td class="num" id="LN2375">2375</td><td class="line">                <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2376">2376</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2377">2377</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2378">2378</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2379">2379</td><td class="line">    <span class='macro'>uprv_sortArray<span class='expansion'>uprv_sortArray_54</span></span>(j, n, <span class='keyword'>sizeof</span>(j[0]), uloc_acceptLanguageCompare, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>TRUE<span class='expansion'>1</span></span>, status);</td></tr>
<tr><td class="num" id="LN2380">2380</td><td class="line">    <span class='keyword'>if</span>(U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN2381">2381</td><td class="line">        <span class='keyword'>if</span>(j != smallBuffer) {</td></tr>
<tr><td class="num" id="LN2382">2382</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2383">2383</td><td class="line">            fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"freeing j %p\n"</span>, j);</td></tr>
<tr><td class="num" id="LN2384">2384</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2385">2385</td><td class="line">            <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(j);</td></tr>
<tr><td class="num" id="LN2386">2386</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2387">2387</td><td class="line">        <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2388">2388</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2389">2389</td><td class="line">    strs = <span class='keyword'>static_cast</span>&lt;<span class='keyword'>char</span> **&gt;(<span class='macro'>uprv_malloc<span class='expansion'>uprv_malloc_54</span></span>((size_t)(<span class='keyword'>sizeof</span>(strs[0])*n)));</td></tr>
<tr><td class="num" id="LN2390">2390</td><td class="line">    <span class='comment'>/* Check for null pointer */</span></td></tr>
<tr><td class="num" id="LN2391">2391</td><td class="line">    <span class='keyword'>if</span> (strs == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2392">2392</td><td class="line">        <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(j); <span class='comment'>/* Free to avoid memory leak */</span></td></tr>
<tr><td class="num" id="LN2393">2393</td><td class="line">        *status = U_MEMORY_ALLOCATION_ERROR;</td></tr>
<tr><td class="num" id="LN2394">2394</td><td class="line">        <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2395">2395</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2396">2396</td><td class="line">    <span class='keyword'>for</span>(i=0;i&lt;n;i++) {</td></tr>
<tr><td class="num" id="LN2397">2397</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2398">2398</td><td class="line">        <span class='comment'>/*fprintf(stderr,"%d: s &lt;%s&gt; q &lt;%g&gt;\n", i, j[i].locale, j[i].q);*/</span></td></tr>
<tr><td class="num" id="LN2399">2399</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2400">2400</td><td class="line">        strs[i]=j[i].locale;</td></tr>
<tr><td class="num" id="LN2401">2401</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2402">2402</td><td class="line">    res =  <span class='macro'>uloc_acceptLanguage<span class='expansion'>uloc_acceptLanguage_54</span></span>(result, resultAvailable, outResult, </td></tr>
<tr><td class="num" id="LN2403">2403</td><td class="line">        (<span class='keyword'>const</span> <span class='keyword'>char</span>**)strs, n, availableLocales, status);</td></tr>
<tr><td class="num" id="LN2404">2404</td><td class="line">    <span class='keyword'>for</span>(i=0;i&lt;n;i++) {</td></tr>
<tr><td class="num" id="LN2405">2405</td><td class="line">        <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(strs[i]);</td></tr>
<tr><td class="num" id="LN2406">2406</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2407">2407</td><td class="line">    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(strs);</td></tr>
<tr><td class="num" id="LN2408">2408</td><td class="line">    <span class='keyword'>if</span>(j != smallBuffer) {</td></tr>
<tr><td class="num" id="LN2409">2409</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2410">2410</td><td class="line">        fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"freeing j %p\n"</span>, j);</td></tr>
<tr><td class="num" id="LN2411">2411</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2412">2412</td><td class="line">        <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(j);</td></tr>
<tr><td class="num" id="LN2413">2413</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2414">2414</td><td class="line">    <span class='keyword'>return</span> res;</td></tr>
<tr><td class="num" id="LN2415">2415</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2416">2416</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2417">2417</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2418">2418</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> int32_t U_EXPORT2</td></tr>
<tr><td class="num" id="LN2419">2419</td><td class="line"><span class='macro'>uloc_acceptLanguage<span class='expansion'>uloc_acceptLanguage_54</span></span>(<span class='keyword'>char</span> *result, int32_t resultAvailable, </td></tr>
<tr><td class="num" id="LN2420">2420</td><td class="line">                    UAcceptResult *outResult, <span class='keyword'>const</span> <span class='keyword'>char</span> **acceptList,</td></tr>
<tr><td class="num" id="LN2421">2421</td><td class="line">                    int32_t acceptListCount,</td></tr>
<tr><td class="num" id="LN2422">2422</td><td class="line">                    UEnumeration* availableLocales,</td></tr>
<tr><td class="num" id="LN2423">2423</td><td class="line">                    UErrorCode *status)</td></tr>
<tr><td class="num" id="LN2424">2424</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2425">2425</td><td class="line">    int32_t i,j;</td></tr>
<tr><td class="num" id="LN2426">2426</td><td class="line">    int32_t len;</td></tr>
<tr><td class="num" id="LN2427">2427</td><td class="line">    int32_t maxLen=0;</td></tr>
<tr><td class="num" id="LN2428">2428</td><td class="line">    <span class='keyword'>char</span> tmp[<span class='macro'>ULOC_FULLNAME_CAPACITY<span class='expansion'>157</span></span>+1];</td></tr>
<tr><td class="num" id="LN2429">2429</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span> *l;</td></tr>
<tr><td class="num" id="LN2430">2430</td><td class="line">    <span class='keyword'>char</span> **fallbackList;</td></tr>
<tr><td class="num" id="LN2431">2431</td><td class="line">    <span class='keyword'>if</span>(U_FAILURE(*status)) {</td></tr>
<tr><td class="num" id="LN2432">2432</td><td class="line">        <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2433">2433</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2434">2434</td><td class="line">    fallbackList = <span class='keyword'>static_cast</span>&lt;<span class='keyword'>char</span> **&gt;(<span class='macro'>uprv_malloc<span class='expansion'>uprv_malloc_54</span></span>((size_t)(<span class='keyword'>sizeof</span>(fallbackList[0])*acceptListCount)));</td></tr>
<tr><td class="num" id="LN2435">2435</td><td class="line">    <span class='keyword'>if</span>(fallbackList==<span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2436">2436</td><td class="line">        *status = U_MEMORY_ALLOCATION_ERROR;</td></tr>
<tr><td class="num" id="LN2437">2437</td><td class="line">        <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2438">2438</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2439">2439</td><td class="line">    <span class='keyword'>for</span>(i=0;i&lt;acceptListCount;i++) {</td></tr>
<tr><td class="num" id="LN2440">2440</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2441">2441</td><td class="line">        fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"%02d: %s\n"</span>, i, acceptList[i]);</td></tr>
<tr><td class="num" id="LN2442">2442</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2443">2443</td><td class="line">        <span class='keyword'>while</span>((l=<span class='macro'>uenum_next<span class='expansion'>uenum_next_54</span></span>(availableLocales, <span class='macro'>NULL<span class='expansion'>__null</span></span>, status))) {</td></tr>
<tr><td class="num" id="LN2444">2444</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2445">2445</td><td class="line">            fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"  %s\n"</span>, l);</td></tr>
<tr><td class="num" id="LN2446">2446</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2447">2447</td><td class="line">            len = (int32_t)<span class='macro'>uprv_strlen(l)<span class='expansion'>:: strlen(l)</span></span>;</td></tr>
<tr><td class="num" id="LN2448">2448</td><td class="line">            <span class='keyword'>if</span>(!<span class='macro'>uprv_strcmp(acceptList[i], l)<span class='expansion'>:: strcmp(acceptList[i], l)</span></span>) {</td></tr>
<tr><td class="num" id="LN2449">2449</td><td class="line">                <span class='keyword'>if</span>(outResult) { </td></tr>
<tr><td class="num" id="LN2450">2450</td><td class="line">                    *outResult = ULOC_ACCEPT_VALID;</td></tr>
<tr><td class="num" id="LN2451">2451</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2452">2452</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2453">2453</td><td class="line">                fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>, <span class='string_literal'>"MATCH! %s\n"</span>, l);</td></tr>
<tr><td class="num" id="LN2454">2454</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2455">2455</td><td class="line">                <span class='keyword'>if</span>(len&gt;0) {</td></tr>
<tr><td class="num" id="LN2456">2456</td><td class="line">                    <span class='macro'>uprv_strncpy(result, l, uprv_min(len, resultAvailable))<span class='expansion'>:: strncpy(result, l, uprv_min_54(len, resultAvailable))</span></span>;</td></tr>
<tr><td class="num" id="LN2457">2457</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2458">2458</td><td class="line">                <span class='keyword'>for</span>(j=0;j&lt;i;j++) {</td></tr>
<tr><td class="num" id="LN2459">2459</td><td class="line">                    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList[j]);</td></tr>
<tr><td class="num" id="LN2460">2460</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2461">2461</td><td class="line">                <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList);</td></tr>
<tr><td class="num" id="LN2462">2462</td><td class="line">                <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(result, resultAvailable, len, status);   </td></tr>
<tr><td class="num" id="LN2463">2463</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2464">2464</td><td class="line">            <span class='keyword'>if</span>(len&gt;maxLen) {</td></tr>
<tr><td class="num" id="LN2465">2465</td><td class="line">                maxLen = len;</td></tr>
<tr><td class="num" id="LN2466">2466</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2467">2467</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2468">2468</td><td class="line">        <span class='macro'>uenum_reset<span class='expansion'>uenum_reset_54</span></span>(availableLocales, status);    </td></tr>
<tr><td class="num" id="LN2469">2469</td><td class="line">        <span class='comment'>/* save off parent info */</span></td></tr>
<tr><td class="num" id="LN2470">2470</td><td class="line">        <span class='keyword'>if</span>(<span class='macro'>uloc_getParent<span class='expansion'>uloc_getParent_54</span></span>(acceptList[i], tmp, <span class='keyword'>sizeof</span>(tmp)/<span class='keyword'>sizeof</span>(tmp[0]), status)!=0) {</td></tr>
<tr><td class="num" id="LN2471">2471</td><td class="line">            fallbackList[i] = <span class='macro'>uprv_strdup<span class='expansion'>uprv_strdup_54</span></span>(tmp);</td></tr>
<tr><td class="num" id="LN2472">2472</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2473">2473</td><td class="line">            fallbackList[i]=0;</td></tr>
<tr><td class="num" id="LN2474">2474</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2475">2475</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2476">2476</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2477">2477</td><td class="line">    <span class='keyword'>for</span>(maxLen--;maxLen&gt;0;maxLen--) {</td></tr>
<tr><td class="num" id="LN2478">2478</td><td class="line">        <span class='keyword'>for</span>(i=0;i&lt;acceptListCount;i++) {</td></tr>
<tr><td class="num" id="LN2479">2479</td><td class="line">            <span class='keyword'>if</span>(fallbackList[i] &amp;&amp; ((int32_t)<span class='macro'>uprv_strlen(fallbackList[i])<span class='expansion'>:: strlen(fallbackList[i])</span></span>==maxLen)) {</td></tr>
<tr><td class="num" id="LN2480">2480</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2481">2481</td><td class="line">                fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"Try: [%s]"</span>, fallbackList[i]);</td></tr>
<tr><td class="num" id="LN2482">2482</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2483">2483</td><td class="line">                <span class='keyword'>while</span>((l=<span class='macro'>uenum_next<span class='expansion'>uenum_next_54</span></span>(availableLocales, <span class='macro'>NULL<span class='expansion'>__null</span></span>, status))) {</td></tr>
<tr><td class="num" id="LN2484">2484</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2485">2485</td><td class="line">                    fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>,<span class='string_literal'>"  %s\n"</span>, l);</td></tr>
<tr><td class="num" id="LN2486">2486</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2487">2487</td><td class="line">                    len = (int32_t)<span class='macro'>uprv_strlen(l)<span class='expansion'>:: strlen(l)</span></span>;</td></tr>
<tr><td class="num" id="LN2488">2488</td><td class="line">                    <span class='keyword'>if</span>(!<span class='macro'>uprv_strcmp(fallbackList[i], l)<span class='expansion'>:: strcmp(fallbackList[i], l)</span></span>) {</td></tr>
<tr><td class="num" id="LN2489">2489</td><td class="line">                        <span class='keyword'>if</span>(outResult) { </td></tr>
<tr><td class="num" id="LN2490">2490</td><td class="line">                            *outResult = ULOC_ACCEPT_FALLBACK;</td></tr>
<tr><td class="num" id="LN2491">2491</td><td class="line">                        }</td></tr>
<tr><td class="num" id="LN2492">2492</td><td class="line"><span class='directive'>#if defined(ULOC_DEBUG)</span></td></tr>
<tr><td class="num" id="LN2493">2493</td><td class="line">                        fprintf(<span class='macro'>stderr<span class='expansion'>stderr</span></span>, <span class='string_literal'>"fallback MATCH! %s\n"</span>, l);</td></tr>
<tr><td class="num" id="LN2494">2494</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr><td class="num" id="LN2495">2495</td><td class="line">                        <span class='keyword'>if</span>(len&gt;0) {</td></tr>
<tr><td class="num" id="LN2496">2496</td><td class="line">                            <span class='macro'>uprv_strncpy(result, l, uprv_min(len, resultAvailable))<span class='expansion'>:: strncpy(result, l, uprv_min_54(len, resultAvailable))</span></span>;</td></tr>
<tr><td class="num" id="LN2497">2497</td><td class="line">                        }</td></tr>
<tr><td class="num" id="LN2498">2498</td><td class="line">                        <span class='keyword'>for</span>(j=0;j&lt;acceptListCount;j++) {</td></tr>
<tr><td class="num" id="LN2499">2499</td><td class="line">                            <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList[j]);</td></tr>
<tr><td class="num" id="LN2500">2500</td><td class="line">                        }</td></tr>
<tr><td class="num" id="LN2501">2501</td><td class="line">                        <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList);</td></tr>
<tr><td class="num" id="LN2502">2502</td><td class="line">                        <span class='keyword'>return</span> <span class='macro'>u_terminateChars<span class='expansion'>u_terminateChars_54</span></span>(result, resultAvailable, len, status);</td></tr>
<tr><td class="num" id="LN2503">2503</td><td class="line">                    }</td></tr>
<tr><td class="num" id="LN2504">2504</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2505">2505</td><td class="line">                <span class='macro'>uenum_reset<span class='expansion'>uenum_reset_54</span></span>(availableLocales, status);    </td></tr>
<tr><td class="num" id="LN2506">2506</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2507">2507</td><td class="line">                <span class='keyword'>if</span>(<span class='macro'>uloc_getParent<span class='expansion'>uloc_getParent_54</span></span>(fallbackList[i], tmp, <span class='keyword'>sizeof</span>(tmp)/<span class='keyword'>sizeof</span>(tmp[0]), status)!=0) {</td></tr>
<tr><td class="num" id="LN2508">2508</td><td class="line">                    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList[i]);</td></tr>
<tr><td class="num" id="LN2509">2509</td><td class="line">                    fallbackList[i] = <span class='macro'>uprv_strdup<span class='expansion'>uprv_strdup_54</span></span>(tmp);</td></tr>
<tr><td class="num" id="LN2510">2510</td><td class="line">                } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2511">2511</td><td class="line">                    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList[i]);</td></tr>
<tr><td class="num" id="LN2512">2512</td><td class="line">                    fallbackList[i]=0;</td></tr>
<tr><td class="num" id="LN2513">2513</td><td class="line">                }</td></tr>
<tr><td class="num" id="LN2514">2514</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2515">2515</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2516">2516</td><td class="line">        <span class='keyword'>if</span>(outResult) { </td></tr>
<tr><td class="num" id="LN2517">2517</td><td class="line">            *outResult = ULOC_ACCEPT_FAILED;</td></tr>
<tr><td class="num" id="LN2518">2518</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2519">2519</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2520">2520</td><td class="line">    <span class='keyword'>for</span>(i=0;i&lt;acceptListCount;i++) {</td></tr>
<tr><td class="num" id="LN2521">2521</td><td class="line">        <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList[i]);</td></tr>
<tr><td class="num" id="LN2522">2522</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2523">2523</td><td class="line">    <span class='macro'>uprv_free<span class='expansion'>uprv_free_54</span></span>(fallbackList);</td></tr>
<tr><td class="num" id="LN2524">2524</td><td class="line">    <span class='keyword'>return</span> -1;</td></tr>
<tr><td class="num" id="LN2525">2525</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2526">2526</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2527">2527</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* U_EXPORT2</td></tr>
<tr><td class="num" id="LN2528">2528</td><td class="line"><span class='macro'>uloc_toUnicodeLocaleKey<span class='expansion'>uloc_toUnicodeLocaleKey_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* keyword)</td></tr>
<tr><td class="num" id="LN2529">2529</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2530">2530</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* bcpKey = <span class='macro'>ulocimp_toBcpKey<span class='expansion'>ulocimp_toBcpKey_54</span></span>(keyword);</td></tr>
<tr><td class="num" id="LN2531">2531</td><td class="line">    <span class='keyword'>if</span> (bcpKey == <span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; <span class='macro'>ultag_isUnicodeLocaleKey<span class='expansion'>ultag_isUnicodeLocaleKey_54</span></span>(keyword, -1)) {</td></tr>
<tr><td class="num" id="LN2532">2532</td><td class="line">        <span class='comment'>// unknown keyword, but syntax is fine..</span></td></tr>
<tr><td class="num" id="LN2533">2533</td><td class="line">        <span class='keyword'>return</span> keyword;</td></tr>
<tr><td class="num" id="LN2534">2534</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2535">2535</td><td class="line">    <span class='keyword'>return</span> bcpKey;</td></tr>
<tr><td class="num" id="LN2536">2536</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2537">2537</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2538">2538</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* U_EXPORT2</td></tr>
<tr><td class="num" id="LN2539">2539</td><td class="line"><span class='macro'>uloc_toUnicodeLocaleType<span class='expansion'>uloc_toUnicodeLocaleType_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* keyword, <span class='keyword'>const</span> <span class='keyword'>char</span>* value)</td></tr>
<tr><td class="num" id="LN2540">2540</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2541">2541</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* bcpType = <span class='macro'>ulocimp_toBcpType<span class='expansion'>ulocimp_toBcpType_54</span></span>(keyword, value, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>);</td></tr>
<tr><td class="num" id="LN2542">2542</td><td class="line">    <span class='keyword'>if</span> (bcpType == <span class='macro'>NULL<span class='expansion'>__null</span></span> &amp;&amp; <span class='macro'>ultag_isUnicodeLocaleType<span class='expansion'>ultag_isUnicodeLocaleType_54</span></span>(value, -1)) {</td></tr>
<tr><td class="num" id="LN2543">2543</td><td class="line">        <span class='comment'>// unknown keyword, but syntax is fine..</span></td></tr>
<tr><td class="num" id="LN2544">2544</td><td class="line">        <span class='keyword'>return</span> value;</td></tr>
<tr><td class="num" id="LN2545">2545</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2546">2546</td><td class="line">    <span class='keyword'>return</span> bcpType;</td></tr>
<tr><td class="num" id="LN2547">2547</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2548">2548</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2549">2549</td><td class="line"><span class='directive'>#define <span class='macro'>UPRV_ISDIGIT(c)<span class='expansion'>(((c) &gt;= '0') &amp;&amp; ((c) &lt;= '9'))</span></span> (((c) &gt;= '0') &amp;&amp; ((c) &lt;= '9'))</span></td></tr>
<tr><td class="num" id="LN2550">2550</td><td class="line"><span class='directive'>#define <span class='macro'>UPRV_ISALPHANUM(c)<span class='expansion'>(uprv_isASCIILetter_54(c) || (((c) &gt;= '0') &amp;&amp; ((c)<br> &lt;= '9')) )</span></span> (<span class='macro'>uprv_isASCIILetter<span class='expansion'>uprv_isASCIILetter_54</span></span>(c) || <span class='macro'>UPRV_ISDIGIT(c)<span class='expansion'>(((c) &gt;= '0') &amp;&amp; ((c) &lt;= '9'))</span></span> )</span></td></tr>
<tr><td class="num" id="LN2551">2551</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2552">2552</td><td class="line"><span class='keyword'>static</span> UBool</td></tr>
<tr><td class="num" id="LN2553">2553</td><td class="line">isWellFormedLegacyKey(<span class='keyword'>const</span> <span class='keyword'>char</span>* legacyKey)</td></tr>
<tr><td class="num" id="LN2554">2554</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2555">2555</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* p = legacyKey;</td></tr>
<tr><td class="num" id="LN2556">2556</td><td class="line">    <span class='keyword'>while</span> (*p) {</td></tr>
<tr><td class="num" id="LN2557">2557</td><td class="line">        <span class='keyword'>if</span> (!<span class='macro'>UPRV_ISALPHANUM(*p)<span class='expansion'>(uprv_isASCIILetter_54(*p) || (((*p) &gt;= '0') &amp;&amp; ((<br>*p) &lt;= '9')) )</span></span>) {</td></tr>
<tr><td class="num" id="LN2558">2558</td><td class="line">            <span class='keyword'>return</span> <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN2559">2559</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2560">2560</td><td class="line">        p++;</td></tr>
<tr><td class="num" id="LN2561">2561</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2562">2562</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>TRUE<span class='expansion'>1</span></span>;</td></tr>
<tr><td class="num" id="LN2563">2563</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2564">2564</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2565">2565</td><td class="line"><span class='keyword'>static</span> UBool</td></tr>
<tr><td class="num" id="LN2566">2566</td><td class="line">isWellFormedLegacyType(<span class='keyword'>const</span> <span class='keyword'>char</span>* legacyType)</td></tr>
<tr><td class="num" id="LN2567">2567</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2568">2568</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* p = legacyType;</td></tr>
<tr><td class="num" id="LN2569">2569</td><td class="line">    int32_t alphaNumLen = 0;</td></tr>
<tr><td class="num" id="LN2570">2570</td><td class="line">    <span class='keyword'>while</span> (*p) {</td></tr>
<tr><td class="num" id="LN2571">2571</td><td class="line">        <span class='keyword'>if</span> (*p == '_' || *p == '/' || *p == '-') {</td></tr>
<tr><td class="num" id="LN2572">2572</td><td class="line">            <span class='keyword'>if</span> (alphaNumLen == 0) {</td></tr>
<tr><td class="num" id="LN2573">2573</td><td class="line">                <span class='keyword'>return</span> <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN2574">2574</td><td class="line">            }</td></tr>
<tr><td class="num" id="LN2575">2575</td><td class="line">            alphaNumLen = 0;</td></tr>
<tr><td class="num" id="LN2576">2576</td><td class="line">        } <span class='keyword'>else</span> <span class='keyword'>if</span> (<span class='macro'>UPRV_ISALPHANUM(*p)<span class='expansion'>(uprv_isASCIILetter_54(*p) || (((*p) &gt;= '0') &amp;&amp; ((<br>*p) &lt;= '9')) )</span></span>) {</td></tr>
<tr><td class="num" id="LN2577">2577</td><td class="line">            alphaNumLen++;</td></tr>
<tr><td class="num" id="LN2578">2578</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr><td class="num" id="LN2579">2579</td><td class="line">            <span class='keyword'>return</span> <span class='macro'>FALSE<span class='expansion'>0</span></span>;</td></tr>
<tr><td class="num" id="LN2580">2580</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2581">2581</td><td class="line">        p++;</td></tr>
<tr><td class="num" id="LN2582">2582</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2583">2583</td><td class="line">    <span class='keyword'>return</span> (alphaNumLen != 0);</td></tr>
<tr><td class="num" id="LN2584">2584</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2585">2585</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2586">2586</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* U_EXPORT2</td></tr>
<tr><td class="num" id="LN2587">2587</td><td class="line"><span class='macro'>uloc_toLegacyKey<span class='expansion'>uloc_toLegacyKey_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* keyword)</td></tr>
<tr><td class="num" id="LN2588">2588</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2589">2589</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* legacyKey = <span class='macro'>ulocimp_toLegacyKey<span class='expansion'>ulocimp_toLegacyKey_54</span></span>(keyword);</td></tr>
<tr><td class="num" id="LN2590">2590</td><td class="line">    <span class='keyword'>if</span> (legacyKey == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2591">2591</td><td class="line">        <span class='comment'>// Checks if the specified locale key is well-formed with the legacy locale syntax.</span></td></tr>
<tr><td class="num" id="LN2592">2592</td><td class="line">        <span class='comment'>//</span></td></tr>
<tr><td class="num" id="LN2593">2593</td><td class="line">        <span class='comment'>// Note:</span></td></tr>
<tr><td class="num" id="LN2594">2594</td><td class="line">        <span class='comment'>//  Neither ICU nor LDML/CLDR provides the definition of keyword syntax.</span></td></tr>
<tr><td class="num" id="LN2595">2595</td><td class="line">        <span class='comment'>//  However, a key should not contain '=' obviously. For now, all existing</span></td></tr>
<tr><td class="num" id="LN2596">2596</td><td class="line">        <span class='comment'>//  keys are using ASCII alphabetic letters only. We won't add any new key</span></td></tr>
<tr><td class="num" id="LN2597">2597</td><td class="line">        <span class='comment'>//  that is not compatible with the BCP 47 syntax. Therefore, we assume</span></td></tr>
<tr><td class="num" id="LN2598">2598</td><td class="line">        <span class='comment'>//  a valid key consist from [0-9a-zA-Z], no symbols.</span></td></tr>
<tr><td class="num" id="LN2599">2599</td><td class="line">        <span class='keyword'>if</span> (isWellFormedLegacyKey(keyword)) {</td></tr>
<tr><td class="num" id="LN2600">2600</td><td class="line">            <span class='keyword'>return</span> keyword;</td></tr>
<tr><td class="num" id="LN2601">2601</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2602">2602</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2603">2603</td><td class="line">    <span class='keyword'>return</span> legacyKey;</td></tr>
<tr><td class="num" id="LN2604">2604</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2605">2605</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2606">2606</td><td class="line"><span class='macro'>U_CAPI<span class='expansion'>extern "C"</span></span> <span class='keyword'>const</span> <span class='keyword'>char</span>* U_EXPORT2</td></tr>
<tr><td class="num" id="LN2607">2607</td><td class="line"><span class='macro'>uloc_toLegacyType<span class='expansion'>uloc_toLegacyType_54</span></span>(<span class='keyword'>const</span> <span class='keyword'>char</span>* keyword, <span class='keyword'>const</span> <span class='keyword'>char</span>* value)</td></tr>
<tr><td class="num" id="LN2608">2608</td><td class="line">{</td></tr>
<tr><td class="num" id="LN2609">2609</td><td class="line">    <span class='keyword'>const</span> <span class='keyword'>char</span>* legacyType = <span class='macro'>ulocimp_toLegacyType<span class='expansion'>ulocimp_toLegacyType_54</span></span>(keyword, value, <span class='macro'>NULL<span class='expansion'>__null</span></span>, <span class='macro'>NULL<span class='expansion'>__null</span></span>);</td></tr>
<tr><td class="num" id="LN2610">2610</td><td class="line">    <span class='keyword'>if</span> (legacyType == <span class='macro'>NULL<span class='expansion'>__null</span></span>) {</td></tr>
<tr><td class="num" id="LN2611">2611</td><td class="line">        <span class='comment'>// Checks if the specified locale type is well-formed with the legacy locale syntax.</span></td></tr>
<tr><td class="num" id="LN2612">2612</td><td class="line">        <span class='comment'>//</span></td></tr>
<tr><td class="num" id="LN2613">2613</td><td class="line">        <span class='comment'>// Note:</span></td></tr>
<tr><td class="num" id="LN2614">2614</td><td class="line">        <span class='comment'>//  Neither ICU nor LDML/CLDR provides the definition of keyword syntax.</span></td></tr>
<tr><td class="num" id="LN2615">2615</td><td class="line">        <span class='comment'>//  However, a type should not contain '=' obviously. For now, all existing</span></td></tr>
<tr><td class="num" id="LN2616">2616</td><td class="line">        <span class='comment'>//  types are using ASCII alphabetic letters with a few symbol letters. We won't</span></td></tr>
<tr><td class="num" id="LN2617">2617</td><td class="line">        <span class='comment'>//  add any new type that is not compatible with the BCP 47 syntax except timezone</span></td></tr>
<tr><td class="num" id="LN2618">2618</td><td class="line">        <span class='comment'>//  IDs. For now, we assume a valid type start with [0-9a-zA-Z], but may contain</span></td></tr>
<tr><td class="num" id="LN2619">2619</td><td class="line">        <span class='comment'>//  '-' '_' '/' in the middle.</span></td></tr>
<tr><td class="num" id="LN2620">2620</td><td class="line">        <span class='keyword'>if</span> (isWellFormedLegacyType(value)) {</td></tr>
<tr><td class="num" id="LN2621">2621</td><td class="line">            <span class='keyword'>return</span> value;</td></tr>
<tr><td class="num" id="LN2622">2622</td><td class="line">        }</td></tr>
<tr><td class="num" id="LN2623">2623</td><td class="line">    }</td></tr>
<tr><td class="num" id="LN2624">2624</td><td class="line">    <span class='keyword'>return</span> legacyType;</td></tr>
<tr><td class="num" id="LN2625">2625</td><td class="line">}</td></tr>
<tr><td class="num" id="LN2626">2626</td><td class="line"> </td></tr>
<tr><td class="num" id="LN2627">2627</td><td class="line"><span class='comment'>/*eof*/</span></td></tr>
</table></body></html>
